{"version":3,"sources":["../../../../src/components/label-pill/LabelPillIcon.tsx","../../../../src/components/label-pill/LabelPillText.tsx","../../../../src/components/label-pill/LabelPill.tsx","../node_modules/lodash/_hasUnicode.js","../node_modules/lodash/upperFirst.js","../node_modules/lodash/startCase.js","../node_modules/lodash/_createCaseFirst.js","../node_modules/lodash/_castSlice.js","../node_modules/lodash/_stringToArray.js","../node_modules/lodash/_asciiToArray.js","../node_modules/lodash/_unicodeToArray.js","../../../../src/components/avatar/AvatarImage.tsx","../../../../src/components/avatar/AvatarInitials.tsx","../../../../src/components/avatar/UnknownUserAvatar.tsx","../../../../src/components/badgeable/Badgeable.tsx","../../../../src/icon/fill/GlobeBadge16.tsx","../../../../src/components/avatar/messages.ts","../../../../src/components/avatar/Avatar.tsx","../node_modules/immutable/dist/immutable.js","../../../../src/components/pill-selector-dropdown/RoundPill.js","../../../../src/components/pill-selector-dropdown/Pill.js","../../../../src/components/pill-selector-dropdown/SuggestedPill.js","../../../../src/components/pill-selector-dropdown/SuggestedPillsRow.js","../../../../src/components/pill-selector-dropdown/PillSelector.js"],"names":["LabelPillIcon","Component","className","rest","classNames","width","height","LabelPillStatus","LabelPillSize","LabelPillText","children","LabelPillContainer","props","ref","type","DEFAULT","size","REGULAR","labelPillClasses","startCase","displayName","LabelPill","Pill","Text","Icon","reHasUnicode","RegExp","module","exports","string","test","upperFirst","require","createCaseFirst","createCompounder","result","word","index","castSlice","hasUnicode","stringToArray","toString","methodName","strSymbols","undefined","chr","charAt","trailing","join","slice","baseSlice","array","start","end","length","asciiToArray","unicodeToArray","split","rsAstralRange","rsAstral","rsCombo","rsFitz","rsNonAstral","rsRegional","rsSurrPair","reOptMod","rsOptVar","rsSeq","rsSymbol","reUnicode","match","AvatarImage","url","onError","alt","event","src","AvatarInitials","id","name","backgroundColorIndex","parseInt","avatarColors","cleanedName","replace","trim","lastIndexOf","toUpperCase","getInitials","UnknownUserAvatar","title","AccessibleSVG","viewBox","fill","vars","fillRule","d","Badgeable","topLeft","topRight","bottomLeft","bottomRight","classnames","GlobeBadge16","messages","defineMessages","externalUser","SIZES","small","large","injectIntl","avatar","avatarUrl","badgeIcon","intl","isExternal","shouldShowExternal","formatMessage","React","hasImageErrored","setHasImageErrored","prevAvatarUrl","setPrevAvatarUrl","classes","badge","SLICE$0","Array","prototype","createClass","ctor","superClass","Object","create","constructor","Iterable","value","isIterable","Seq","KeyedIterable","isKeyed","KeyedSeq","IndexedIterable","isIndexed","IndexedSeq","SetIterable","isAssociative","SetSeq","maybeIterable","IS_ITERABLE_SENTINEL","maybeKeyed","IS_KEYED_SENTINEL","maybeIndexed","IS_INDEXED_SENTINEL","maybeAssociative","isOrdered","maybeOrdered","IS_ORDERED_SENTINEL","Keyed","Indexed","Set","DELETE","SHIFT","SIZE","MASK","NOT_SET","CHANGE_LENGTH","DID_ALTER","MakeRef","SetRef","OwnerID","arrCopy","arr","offset","len","Math","max","newArr","ii","ensureSize","iter","__iterate","returnTrue","wrapIndex","uint32Index","NaN","wholeSlice","begin","resolveBegin","resolveIndex","resolveEnd","defaultIndex","min","ITERATE_KEYS","ITERATE_VALUES","ITERATE_ENTRIES","REAL_ITERATOR_SYMBOL","Symbol","iterator","FAUX_ITERATOR_SYMBOL","ITERATOR_SYMBOL","Iterator","next","this","iteratorValue","k","v","iteratorResult","done","iteratorDone","hasIterator","getIteratorFn","isIterator","maybeIterator","getIterator","iterable","iteratorFn","call","isArrayLike","emptySequence","toSeq","seqFromValue","toKeyedSeq","fromEntrySeq","keyedSeqFromValue","entrySeq","toIndexedSeq","indexedSeqFromValue","toSetSeq","KEYS","VALUES","ENTRIES","inspect","toSource","of","arguments","__toString","cacheResult","_cache","__iterateUncached","toArray","fn","reverse","seqIterate","__iterator","seqIterator","isSeq","EMPTY_SEQ","EMPTY_REPEAT","EMPTY_RANGE","IS_SEQ_SENTINEL","ArraySeq","_array","ObjectSeq","object","keys","_object","_keys","IterableSeq","_iterable","IteratorSeq","_iterator","_iteratorCache","maybeSeq","seq","isArray","TypeError","maybeIndexedSeqFromValue","useKeys","cache","maxIndex","entry","__iteratorUncached","fromJS","json","converter","fromJSWith","fromJSDefault","key","parentJSON","map","isPlainObj","toList","toMap","is","valueA","valueB","valueOf","equals","deepEqual","a","b","__hash","notAssociative","entries","every","flipped","_","allEqual","bSize","has","get","Repeat","times","_value","Infinity","invariant","condition","error","Error","Range","step","abs","_start","_end","_step","ceil","Collection","KeyedCollection","IndexedCollection","SetCollection","notSetValue","hasOwnProperty","iterations","val","includes","searchValue","indexOf","this$0","other","possibleIndex","floor","offsetValue","imul","c","smi","i32","hash","o","h","STRING_HASH_CACHE_MIN_STRLEN","cachedHashString","hashString","hashCode","hashJSObj","stringHashCache","STRING_HASH_CACHE_SIZE","STRING_HASH_CACHE_MAX_SIZE","charCodeAt","obj","usingWeakMap","weakMap","UID_HASH_KEY","canDefineProperty","propertyIsEnumerable","getIENodeHash","objHashUID","set","isExtensible","defineProperty","apply","nodeType","e","node","uniqueID","documentElement","WeakMap","assertNotInfinite","Map","emptyMap","isMap","withMutations","forEach","maybeMap","IS_MAP_SENTINEL","keyValues","i","_root","updateMap","setIn","keyPath","updateIn","remove","deleteIn","update","updater","updatedValue","updateInDeepMap","forceIterator","clear","__ownerID","__altered","merge","mergeIntoMapWith","mergeWith","merger","mergeIn","iters","m","mergeDeep","deepMerger","mergeDeepWith","deepMergerWith","mergeDeepIn","sort","comparator","OrderedMap","sortFactory","sortBy","mapper","mutable","asMutable","wasAltered","__ensureOwner","asImmutable","MapIterator","iterate","ownerID","makeMap","EMPTY_MAP","MapPrototype","ArrayMapNode","BitmapIndexedNode","bitmap","nodes","HashArrayMapNode","count","HashCollisionNode","keyHash","ValueNode","_type","_reverse","_stack","mapIteratorFrame","mapIteratorValue","prev","__prev","root","newRoot","newSize","didChangeSize","didAlter","updateNode","shift","isLeafNode","mergeIntoNode","newNode","idx1","idx2","createNodes","packNodes","excluding","packedII","packedNodes","bit","expandNodes","including","expandedNodes","iterables","push","mergeIntoCollectionWith","existing","nextValue","collection","filter","x","mergeIntoMap","keyPathIter","isNotSet","existingValue","newValue","nextExisting","nextUpdated","popCount","idx","canEdit","newArray","spliceIn","newLen","after","spliceOut","pop","removeIn","removed","exists","MAX_ARRAY_MAP_SIZE","isEditable","newEntries","keyHashFrag","MAX_BITMAP_INDEXED_SIZE","newBitmap","newNodes","newCount","MIN_HASH_ARRAY_MAP_SIZE","keyMatch","stack","subNode","List","empty","emptyList","isList","makeList","VNode","list","setSize","maybeList","IS_LIST_SENTINEL","listNodeFor","_origin","updateList","splice","insert","_capacity","_level","_tail","values","oldSize","setListBounds","unshift","mergeIntoListWith","iterateList","DONE","ListPrototype","removeBefore","level","originIndex","newChild","removingFirst","oldChild","editable","editableVNode","removeAfter","sizeIndex","EMPTY_LIST","EMPTY_ORDERED_MAP","left","right","tailPos","getTailOffset","tail","iterateNodeOrLeaf","iterateLeaf","iterateNode","from","to","origin","capacity","newTail","updateVNode","nodeHas","lowerNode","newLowerNode","rawIndex","owner","oldOrigin","oldCapacity","newOrigin","newCapacity","newLevel","offsetShift","oldTailOffset","newTailOffset","oldTail","beginIndex","maxSize","emptyOrderedMap","isOrderedMap","maybeOrderedMap","makeOrderedMap","omap","_map","_list","updateOrderedMap","newMap","newList","flip","ToKeyedSequence","indexed","_iter","_useKeys","ToIndexedSequence","ToSetSequence","FromEntriesSequence","flipFactory","flipSequence","makeSequence","reversedSequence","cacheResultThrough","mapFactory","context","mappedSequence","reverseFactory","filterFactory","predicate","filterSequence","countByFactory","grouper","groups","groupByFactory","isKeyedIter","coerce","iterableClass","reify","sliceFactory","originalSize","resolvedBegin","resolvedEnd","sliceSize","resolvedSize","sliceSeq","skipped","isSkipping","takeWhileFactory","takeSequence","iterating","skipWhileFactory","skipSequence","skipping","concatFactory","isKeyedIterable","concat","singleton","concatSeq","flatten","reduce","sum","flattenFactory","depth","flatSequence","stopped","flatDeep","currentDepth","flatMapFactory","interposeFactory","separator","interposedSequence","defaultComparator","maxFactory","maxCompare","comp","zipWithFactory","keyIter","zipper","zipSequence","iterators","isDone","steps","some","s","validateEntry","resolveSize","Record","defaultValues","hasInitialized","RecordType","setProps","RecordTypePrototype","_name","_defaultValues","RecordPrototype","valueSeq","indexedIterable","recordName","defaultVal","_empty","makeRecord","likeRecord","record","getPrototypeOf","names","setProp","bind","emptySet","isSet","add","maybeSet","IS_SET_SENTINEL","fromKeys","keySeq","updateSet","union","intersect","originalSet","subtract","OrderedSet","__make","EMPTY_SET","SetPrototype","__empty","makeSet","emptyOrderedSet","isOrderedSet","maybeOrderedSet","EMPTY_ORDERED_SET","OrderedSetPrototype","makeOrderedSet","Stack","emptyStack","isStack","unshiftAll","maybeStack","IS_STACK_SENTINEL","head","_head","peek","makeStack","pushAll","EMPTY_STACK","StackPrototype","mixin","methods","keyCopier","getOwnPropertySymbols","toJS","__toJS","toJSON","toObject","toOrderedMap","toOrderedSet","toSet","toStack","__toStringMapper","returnValue","find","findEntry","sideEffect","joined","isFirst","reducer","initialReduction","reduction","useFirst","reduceRight","reversed","not","butLast","isEmpty","countBy","entriesSequence","entryMapper","filterNot","found","findKey","findLast","findLastEntry","findLastKey","first","flatMap","searchKey","getIn","searchKeyPath","nested","groupBy","hasIn","isSubset","isSuperset","keyOf","keyMapper","last","lastKeyOf","maxBy","neg","defaultNegComparator","minBy","skip","amount","skipLast","skipWhile","skipUntil","take","takeLast","takeWhile","takeUntil","hashIterable","IterablePrototype","quoteString","chain","contains","mapEntries","mapKeys","KeyedIterablePrototype","JSON","stringify","String","defaultZipper","ordered","keyed","murmurHashOfSize","hashMerge","findIndex","removeNum","numArgs","spliced","findLastIndex","interpose","interleave","zipped","interleaved","zip","zipWith","factory","RemoveButton","onClick","RoundPill","isSelected","isDisabled","hasWarning","isValid","onRemove","noop","isMounted","setState","getPillImageUrl","Promise","resolve","then","getAvatarUrlHandler","catch","getAvatarUrl","showAvatar","text","state","getStyles","Avatar","handleClickRemove","PureComponent","styles","SuggestedPill","email","onAdd","addSuggestedPill","preventDefault","position","onKeyDown","enter","SuggestedPillsRow","onSuggestedPillAdd","selectedPillsValues","suggestedPillsData","suggestedPillsFilter","filteredSuggestedPillData","item","stopDefaultEvent","stopPropagation","PillSelectorBase","isFocused","selectedIndex","selectedOptions","option","inputEl","focus","inputValue","numPills","getNumSelected","backspace","resetSelectedIndex","arrowLeft","hiddenEl","arrowRight","uniqueId","allowInvalidPills","disabled","errorTooltipPosition","getPillClassName","inputProps","onInput","placeholder","innerRef","showAvatars","showRoundedPills","suggestedPillsTitle","validator","suggestedPillsEnabled","hasError","ariaAttrs","errorMessageID","isShown","theme","onBlur","handleBlur","handleClick","onFocus","handleFocus","handleKeyDown","displayText","isExternalUser","hiddenRef","tabIndex","autoComplete","input","getPillsByKey","role","PillSelector"],"mappings":"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","file":"static/js/1.680041ea.chunk.js","sourcesContent":["import * as React from 'react';\nimport classNames from 'classnames';\nimport { SVGProps } from '../../components/accessible-svg/AccessibleSVG';\n\nexport interface LabelPillIconProps {\n    /** Icon component */\n    Component: React.FunctionComponent<SVGProps>;\n    /** Additional CSS classname(s) */\n    className?: string;\n}\n\nconst LabelPillIcon = ({ Component, className, ...rest }: LabelPillIconProps) => (\n    <Component className={classNames('bdl-LabelPill-iconContent', className)} width={12} height={12} {...rest} />\n);\n\nexport default LabelPillIcon;\n","import * as React from 'react';\nimport classNames from 'classnames';\n\nexport interface LabelPillTextProps {\n    /** Text content, ie string or FormattedMessage */\n    children: React.ReactChild;\n    /** Additional CSS classname(s) */\n    className?: string;\n}\n\nconst LabelPillText = ({ children, className, ...rest }: LabelPillTextProps) => (\n    <span className={classNames('bdl-LabelPill-textContent', className)} {...rest}>\n        {children}\n    </span>\n);\n\nexport default LabelPillText;\n","import * as React from 'react';\nimport classNames from 'classnames';\nimport startCase from 'lodash/startCase';\nimport LabelPillIcon from './LabelPillIcon';\nimport LabelPillText from './LabelPillText';\n\nimport './LabelPill.scss';\n\nexport enum LabelPillStatus {\n    DEFAULT = 'default',\n    INFO = 'info',\n    FTUX = 'ftux',\n    HIGHLIGHT = 'highlight',\n    SUCCESS = 'success',\n    WARNING = 'warning',\n    ALERT = 'alert',\n    ERROR = 'error',\n}\n\nexport enum LabelPillSize {\n    REGULAR = 'regular',\n    LARGE = 'large',\n}\n\nexport interface LabelPillProps {\n    /** Content, wrapped in either LabelPill.Text or LabelPill.Icon */\n    children: Array<React.ReactChild> | React.ReactChild;\n    /** Type of pill */\n    type?: LabelPillStatus;\n    /** Size of pill */\n    size?: LabelPillSize;\n    /** Additional CSS classname(s) */\n    className?: string;\n}\n\nconst LabelPillContainer = React.forwardRef((props: LabelPillProps, ref: React.Ref<HTMLSpanElement>) => {\n    const { children, type = LabelPillStatus.DEFAULT, size = LabelPillSize.REGULAR, className, ...rest } = props;\n    const labelPillClasses = classNames(\n        'bdl-LabelPill',\n        `bdl-LabelPill--${type}`,\n        `bdl-LabelPill--size${startCase(size)}`,\n        className,\n    );\n    return (\n        <span ref={ref} className={labelPillClasses} {...rest}>\n            {children}\n        </span>\n    );\n});\n\nLabelPillContainer.displayName = 'LabelPill';\n\nconst LabelPill = {\n    Pill: LabelPillContainer,\n    Text: LabelPillText,\n    Icon: LabelPillIcon,\n};\n\nexport default LabelPill;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsZWJ = '\\\\u200d';\n\n/** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */\nvar reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange  + rsComboRange + rsVarRange + ']');\n\n/**\n * Checks if `string` contains Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a symbol is found, else `false`.\n */\nfunction hasUnicode(string) {\n  return reHasUnicode.test(string);\n}\n\nmodule.exports = hasUnicode;\n","var createCaseFirst = require('./_createCaseFirst');\n\n/**\n * Converts the first character of `string` to upper case.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.upperFirst('fred');\n * // => 'Fred'\n *\n * _.upperFirst('FRED');\n * // => 'FRED'\n */\nvar upperFirst = createCaseFirst('toUpperCase');\n\nmodule.exports = upperFirst;\n","var createCompounder = require('./_createCompounder'),\n    upperFirst = require('./upperFirst');\n\n/**\n * Converts `string` to\n * [start case](https://en.wikipedia.org/wiki/Letter_case#Stylistic_or_specialised_usage).\n *\n * @static\n * @memberOf _\n * @since 3.1.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the start cased string.\n * @example\n *\n * _.startCase('--foo-bar--');\n * // => 'Foo Bar'\n *\n * _.startCase('fooBar');\n * // => 'Foo Bar'\n *\n * _.startCase('__FOO_BAR__');\n * // => 'FOO BAR'\n */\nvar startCase = createCompounder(function(result, word, index) {\n  return result + (index ? ' ' : '') + upperFirst(word);\n});\n\nmodule.exports = startCase;\n","var castSlice = require('./_castSlice'),\n    hasUnicode = require('./_hasUnicode'),\n    stringToArray = require('./_stringToArray'),\n    toString = require('./toString');\n\n/**\n * Creates a function like `_.lowerFirst`.\n *\n * @private\n * @param {string} methodName The name of the `String` case method to use.\n * @returns {Function} Returns the new case function.\n */\nfunction createCaseFirst(methodName) {\n  return function(string) {\n    string = toString(string);\n\n    var strSymbols = hasUnicode(string)\n      ? stringToArray(string)\n      : undefined;\n\n    var chr = strSymbols\n      ? strSymbols[0]\n      : string.charAt(0);\n\n    var trailing = strSymbols\n      ? castSlice(strSymbols, 1).join('')\n      : string.slice(1);\n\n    return chr[methodName]() + trailing;\n  };\n}\n\nmodule.exports = createCaseFirst;\n","var baseSlice = require('./_baseSlice');\n\n/**\n * Casts `array` to a slice if it's needed.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {number} start The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the cast slice.\n */\nfunction castSlice(array, start, end) {\n  var length = array.length;\n  end = end === undefined ? length : end;\n  return (!start && end >= length) ? array : baseSlice(array, start, end);\n}\n\nmodule.exports = castSlice;\n","var asciiToArray = require('./_asciiToArray'),\n    hasUnicode = require('./_hasUnicode'),\n    unicodeToArray = require('./_unicodeToArray');\n\n/**\n * Converts `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction stringToArray(string) {\n  return hasUnicode(string)\n    ? unicodeToArray(string)\n    : asciiToArray(string);\n}\n\nmodule.exports = stringToArray;\n","/**\n * Converts an ASCII `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction asciiToArray(string) {\n  return string.split('');\n}\n\nmodule.exports = asciiToArray;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsAstral = '[' + rsAstralRange + ']',\n    rsCombo = '[' + rsComboRange + ']',\n    rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n    rsNonAstral = '[^' + rsAstralRange + ']',\n    rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n    rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n    rsZWJ = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar reOptMod = rsModifier + '?',\n    rsOptVar = '[' + rsVarRange + ']?',\n    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n    rsSeq = rsOptVar + reOptMod + rsOptJoin,\n    rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';\n\n/** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */\nvar reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');\n\n/**\n * Converts a Unicode `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction unicodeToArray(string) {\n  return string.match(reUnicode) || [];\n}\n\nmodule.exports = unicodeToArray;\n","import * as React from 'react';\n\nexport interface AvatarImageProps {\n    className?: string;\n    onError?: Function;\n    url: string;\n}\n\nconst AvatarImage = ({ className = '', url, onError }: AvatarImageProps) => (\n    <img\n        alt=\"\"\n        className={`avatar-image ${className}`}\n        onError={event => {\n            if (typeof onError === 'function') {\n                onError(event);\n            }\n        }}\n        src={url}\n    />\n);\n\nexport default AvatarImage;\n","import * as React from 'react';\nimport { avatarColors } from '../../styles/variables';\n\nconst getInitials = (name: string) => {\n    // Remove any bracketed text from the user name\n    const cleanedName = name.replace(/[[({<]+.*[\\])}>]+/g, '').trim();\n    const firstInitial = cleanedName.slice(0, 1);\n    const lastInitial = cleanedName.slice(cleanedName.lastIndexOf(' ') + 1, cleanedName.lastIndexOf(' ') + 2);\n    return (firstInitial + lastInitial).toUpperCase();\n};\n\nexport interface AvatarInitialsProps {\n    className?: string;\n    id?: string | number | null;\n    name: string;\n}\n\nconst AvatarInitials = ({ className = '', id = 0, name }: AvatarInitialsProps) => {\n    const avatarColorSelector = parseInt(id as string, 10) || 0;\n    const backgroundColorIndex = avatarColorSelector % avatarColors.length;\n\n    return (\n        <span className={`avatar-initials ${className}`} data-bg-idx={backgroundColorIndex}>\n            {getInitials(name)}\n        </span>\n    );\n};\n\nexport default AvatarInitials;\n","import * as React from 'react';\nimport AccessibleSVG, { SVGProps } from '../accessible-svg/AccessibleSVG';\nimport * as vars from '../../styles/variables';\n\nconst UnknownUserAvatar = ({ className = '', height = 28, title, width = 28 }: SVGProps) => (\n    <AccessibleSVG\n        className={`unknown-user-avatar ${className}`}\n        height={height}\n        title={title}\n        viewBox=\"0 0 16 16\"\n        width={width}\n    >\n        <path\n            fill={vars.bdlGray50}\n            fillRule=\"evenodd\"\n            d=\"M8 0a8 8 0 110 16A8 8 0 018 0zm0 9.5c-1.21 0-2.293.413-3.232 1.096-.56.407-.953.817-1.168 1.104a.5.5 0 00.8.6c.035-.047.114-.141.234-.267.205-.214.447-.428.722-.629.78-.567 1.665-.904 2.644-.904.979 0 1.865.337 2.644.904.275.2.517.415.722.63.12.125.199.219.234.266a.5.5 0 00.8-.6c-.215-.287-.607-.697-1.168-1.104C10.293 9.913 9.21 9.5 8 9.5zm0-6a2.5 2.5 0 000 5 2.5 2.5 0 000-5zm0 1a1.5 1.5 0 11-.001 3.001A1.5 1.5 0 018 4.5z\"\n        />\n    </AccessibleSVG>\n);\n\nexport default UnknownUserAvatar;\n","import * as React from 'react';\nimport classnames from 'classnames';\n\nimport './Badgeable.scss';\n\ntype Props = {\n    /** Component to render when badging the bottom left corner of the rendered container */\n    bottomLeft?: React.ReactNode;\n    /** Component to render when badging the bottom right corner of the rendered container */\n    bottomRight?: React.ReactNode;\n    /** the item(s) to receive the badge */\n    children: React.ReactNode;\n    className?: string;\n    /** Component to render when badging the top left corner of the rendered container */\n    topLeft?: React.ReactNode;\n    /** Component to render when badging the top right corner of the rendered container */\n    topRight?: React.ReactNode;\n};\n\nconst Badgeable = (props: Props) => {\n    const { children, className = '', topLeft = null, topRight = null, bottomLeft = null, bottomRight = null } = props;\n\n    return (\n        <div className={classnames('badgeable-container', className)}>\n            {children}\n            <div className=\"badges\">\n                {topLeft && <div className=\"top-left-badge\">{topLeft}</div>}\n                {topRight && <div className=\"top-right-badge\">{topRight}</div>}\n                {bottomLeft && <div className=\"bottom-left-badge\">{bottomLeft}</div>}\n                {bottomRight && <div className=\"bottom-right-badge\">{bottomRight}</div>}\n            </div>\n        </div>\n    );\n};\n\nexport default Badgeable;\n","/* eslint-disable react/jsx-sort-props */\nimport * as React from 'react';\nimport * as vars from '../../styles/variables';\nimport AccessibleSVG, { SVGProps } from '../../components/accessible-svg/AccessibleSVG';\n\n/**\n * This is an auto-generated component and should not be edited\n * manually in contributor pull requests.\n *\n * If you have problems with this component:\n * - https://github.com/box/box-ui-elements/issues/new?template=Bug_report.md\n *\n * If there are missing features in this component:\n * - https://github.com/box/box-ui-elements/issues/new?template=Feature_request.md\n */\n\nconst GlobeBadge16 = (props: SVGProps) => (\n    <AccessibleSVG width={16} height={16} viewBox=\"0 0 16 16\" {...props}>\n        <path\n            fill={vars.bdlGray50}\n            fillRule=\"evenodd\"\n            d=\"M8 0a7.988 7.988 0 00-5.662 2.338A7.992 7.992 0 000 8a7.988 7.988 0 002.338 5.662A7.992 7.992 0 008 16a7.988 7.988 0 005.662-2.338A7.992 7.992 0 0016 8a7.988 7.988 0 00-2.338-5.662A7.992 7.992 0 008 0zm-.862 14.4C4.062 13.908 1.6 11.323 1.6 8c0-.492.123-.984.123-1.477L5.54 10.34v.861c0 .862.738 1.6 1.6 1.6v1.6zm5.539-2.092c-.247-.616-.861-1.108-1.477-1.108h-.862V8.738c0-.368-.246-.738-.738-.738H4.8V6.4h1.6c.492 0 .862-.37.862-.862V4.062h1.6c.861 0 1.6-.739 1.6-1.6v-.37C12.8 3.077 14.4 5.292 14.4 8c0 1.723-.616 3.2-1.723 4.308z\"\n        />\n    </AccessibleSVG>\n);\n\nexport default GlobeBadge16;\n","import { defineMessages } from 'react-intl';\n\nconst messages = defineMessages({\n    externalUser: {\n        defaultMessage: 'External user',\n        description: 'Text for an icon aria label to convey an external user of the enterprise',\n        id: 'boxui.avatar.externalUser',\n    },\n});\n\nexport default messages;\n","import * as React from 'react';\nimport { injectIntl, IntlShape } from 'react-intl';\nimport classNames from 'classnames';\nimport Badgeable from '../badgeable';\nimport AvatarImage from './AvatarImage';\nimport AvatarInitials from './AvatarInitials';\nimport UnknownUserAvatar from './UnknownUserAvatar';\nimport GlobeBadge16 from '../../icon/fill/GlobeBadge16';\n\nimport messages from './messages';\n\nimport './Avatar.scss';\n\nconst SIZES = { small: true, large: true };\n\nexport interface AvatarProps {\n    /**\n     * Url to avatar image.  If passed in, component will render the avatar image instead of the initials\n     *\n     * Required if \"name\" is not specified.\n     */\n    avatarUrl?: string | null;\n    /**\n     * Icon React Element that will be shown as a badge in bottom right corner of Avatar.\n     *\n     * Will not be used if `shouldShowExternal` and `isExternal` is true, then GlobalBadge will be shown.\n     */\n    badgeIcon?: React.ReactElement;\n    /** classname to add to the container element. */\n    className?: string;\n    /** Users id */\n    id?: string | number | null;\n    /** Intl object */\n    intl: IntlShape;\n    /** Whether this avatar should be labeled as external in the current context */\n    isExternal?: boolean;\n    /**\n     * Users full name.\n     *\n     * Required if \"avatarUrl\" is not specified.\n     */\n    name?: string | null;\n    /** Show the external avatar marker if the avatar is marked as for an external user */\n    shouldShowExternal?: boolean;\n    /* avatar size (enum) */\n    size?: keyof typeof SIZES | '';\n}\n\nfunction Avatar({\n    avatarUrl,\n    badgeIcon,\n    className,\n    name,\n    id,\n    intl,\n    isExternal,\n    shouldShowExternal = false,\n    size = '',\n}: AvatarProps) {\n    const { formatMessage } = intl;\n\n    const [hasImageErrored, setHasImageErrored] = React.useState<boolean>(false);\n    const [prevAvatarUrl, setPrevAvatarUrl] = React.useState<AvatarProps['avatarUrl']>(null);\n\n    const classes = classNames([\n        'avatar',\n        className,\n        {\n            [`avatar--${size}`]: size && SIZES[size],\n            'avatar--isExternal': shouldShowExternal && isExternal,\n            'avatar--iconBadge': !!badgeIcon,\n        },\n    ]);\n\n    // Reset hasImageErrored state when avatarUrl changes\n    if (avatarUrl !== prevAvatarUrl) {\n        setHasImageErrored(false);\n        setPrevAvatarUrl(avatarUrl);\n    }\n\n    let avatar;\n    if (avatarUrl && !hasImageErrored) {\n        avatar = (\n            <AvatarImage\n                onError={() => {\n                    setHasImageErrored(true);\n                }}\n                url={avatarUrl}\n            />\n        );\n    } else if (name) {\n        avatar = <AvatarInitials id={id} name={name} />;\n    } else {\n        avatar = <UnknownUserAvatar className=\"avatar-icon\" />;\n    }\n\n    let badge = null;\n    if (shouldShowExternal && isExternal) {\n        badge = <GlobeBadge16 className=\"bdl-Avatar-externalBadge\" title={formatMessage(messages.externalUser)} />;\n    } else if (badgeIcon) {\n        badge = <div className=\"bdl-Avatar-badge bdl-Avatar-iconBadge\">{badgeIcon}</div>;\n    }\n\n    return (\n        <Badgeable className={classes} bottomRight={badge}>\n            <span>{avatar}</span>\n        </Badgeable>\n    );\n}\n\nexport { Avatar as AvatarBase };\nexport default injectIntl(Avatar);\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global.Immutable = factory());\n}(this, function () { 'use strict';var SLICE$0 = Array.prototype.slice;\n\n  function createClass(ctor, superClass) {\n    if (superClass) {\n      ctor.prototype = Object.create(superClass.prototype);\n    }\n    ctor.prototype.constructor = ctor;\n  }\n\n  function Iterable(value) {\n      return isIterable(value) ? value : Seq(value);\n    }\n\n\n  createClass(KeyedIterable, Iterable);\n    function KeyedIterable(value) {\n      return isKeyed(value) ? value : KeyedSeq(value);\n    }\n\n\n  createClass(IndexedIterable, Iterable);\n    function IndexedIterable(value) {\n      return isIndexed(value) ? value : IndexedSeq(value);\n    }\n\n\n  createClass(SetIterable, Iterable);\n    function SetIterable(value) {\n      return isIterable(value) && !isAssociative(value) ? value : SetSeq(value);\n    }\n\n\n\n  function isIterable(maybeIterable) {\n    return !!(maybeIterable && maybeIterable[IS_ITERABLE_SENTINEL]);\n  }\n\n  function isKeyed(maybeKeyed) {\n    return !!(maybeKeyed && maybeKeyed[IS_KEYED_SENTINEL]);\n  }\n\n  function isIndexed(maybeIndexed) {\n    return !!(maybeIndexed && maybeIndexed[IS_INDEXED_SENTINEL]);\n  }\n\n  function isAssociative(maybeAssociative) {\n    return isKeyed(maybeAssociative) || isIndexed(maybeAssociative);\n  }\n\n  function isOrdered(maybeOrdered) {\n    return !!(maybeOrdered && maybeOrdered[IS_ORDERED_SENTINEL]);\n  }\n\n  Iterable.isIterable = isIterable;\n  Iterable.isKeyed = isKeyed;\n  Iterable.isIndexed = isIndexed;\n  Iterable.isAssociative = isAssociative;\n  Iterable.isOrdered = isOrdered;\n\n  Iterable.Keyed = KeyedIterable;\n  Iterable.Indexed = IndexedIterable;\n  Iterable.Set = SetIterable;\n\n\n  var IS_ITERABLE_SENTINEL = '@@__IMMUTABLE_ITERABLE__@@';\n  var IS_KEYED_SENTINEL = '@@__IMMUTABLE_KEYED__@@';\n  var IS_INDEXED_SENTINEL = '@@__IMMUTABLE_INDEXED__@@';\n  var IS_ORDERED_SENTINEL = '@@__IMMUTABLE_ORDERED__@@';\n\n  // Used for setting prototype methods that IE8 chokes on.\n  var DELETE = 'delete';\n\n  // Constants describing the size of trie nodes.\n  var SHIFT = 5; // Resulted in best performance after ______?\n  var SIZE = 1 << SHIFT;\n  var MASK = SIZE - 1;\n\n  // A consistent shared value representing \"not set\" which equals nothing other\n  // than itself, and nothing that could be provided externally.\n  var NOT_SET = {};\n\n  // Boolean references, Rough equivalent of `bool &`.\n  var CHANGE_LENGTH = { value: false };\n  var DID_ALTER = { value: false };\n\n  function MakeRef(ref) {\n    ref.value = false;\n    return ref;\n  }\n\n  function SetRef(ref) {\n    ref && (ref.value = true);\n  }\n\n  // A function which returns a value representing an \"owner\" for transient writes\n  // to tries. The return value will only ever equal itself, and will not equal\n  // the return of any subsequent call of this function.\n  function OwnerID() {}\n\n  // http://jsperf.com/copy-array-inline\n  function arrCopy(arr, offset) {\n    offset = offset || 0;\n    var len = Math.max(0, arr.length - offset);\n    var newArr = new Array(len);\n    for (var ii = 0; ii < len; ii++) {\n      newArr[ii] = arr[ii + offset];\n    }\n    return newArr;\n  }\n\n  function ensureSize(iter) {\n    if (iter.size === undefined) {\n      iter.size = iter.__iterate(returnTrue);\n    }\n    return iter.size;\n  }\n\n  function wrapIndex(iter, index) {\n    // This implements \"is array index\" which the ECMAString spec defines as:\n    //\n    //     A String property name P is an array index if and only if\n    //     ToString(ToUint32(P)) is equal to P and ToUint32(P) is not equal\n    //     to 2^32−1.\n    //\n    // http://www.ecma-international.org/ecma-262/6.0/#sec-array-exotic-objects\n    if (typeof index !== 'number') {\n      var uint32Index = index >>> 0; // N >>> 0 is shorthand for ToUint32\n      if ('' + uint32Index !== index || uint32Index === 4294967295) {\n        return NaN;\n      }\n      index = uint32Index;\n    }\n    return index < 0 ? ensureSize(iter) + index : index;\n  }\n\n  function returnTrue() {\n    return true;\n  }\n\n  function wholeSlice(begin, end, size) {\n    return (begin === 0 || (size !== undefined && begin <= -size)) &&\n      (end === undefined || (size !== undefined && end >= size));\n  }\n\n  function resolveBegin(begin, size) {\n    return resolveIndex(begin, size, 0);\n  }\n\n  function resolveEnd(end, size) {\n    return resolveIndex(end, size, size);\n  }\n\n  function resolveIndex(index, size, defaultIndex) {\n    return index === undefined ?\n      defaultIndex :\n      index < 0 ?\n        Math.max(0, size + index) :\n        size === undefined ?\n          index :\n          Math.min(size, index);\n  }\n\n  /* global Symbol */\n\n  var ITERATE_KEYS = 0;\n  var ITERATE_VALUES = 1;\n  var ITERATE_ENTRIES = 2;\n\n  var REAL_ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n  var FAUX_ITERATOR_SYMBOL = '@@iterator';\n\n  var ITERATOR_SYMBOL = REAL_ITERATOR_SYMBOL || FAUX_ITERATOR_SYMBOL;\n\n\n  function Iterator(next) {\n      this.next = next;\n    }\n\n    Iterator.prototype.toString = function() {\n      return '[Iterator]';\n    };\n\n\n  Iterator.KEYS = ITERATE_KEYS;\n  Iterator.VALUES = ITERATE_VALUES;\n  Iterator.ENTRIES = ITERATE_ENTRIES;\n\n  Iterator.prototype.inspect =\n  Iterator.prototype.toSource = function () { return this.toString(); }\n  Iterator.prototype[ITERATOR_SYMBOL] = function () {\n    return this;\n  };\n\n\n  function iteratorValue(type, k, v, iteratorResult) {\n    var value = type === 0 ? k : type === 1 ? v : [k, v];\n    iteratorResult ? (iteratorResult.value = value) : (iteratorResult = {\n      value: value, done: false\n    });\n    return iteratorResult;\n  }\n\n  function iteratorDone() {\n    return { value: undefined, done: true };\n  }\n\n  function hasIterator(maybeIterable) {\n    return !!getIteratorFn(maybeIterable);\n  }\n\n  function isIterator(maybeIterator) {\n    return maybeIterator && typeof maybeIterator.next === 'function';\n  }\n\n  function getIterator(iterable) {\n    var iteratorFn = getIteratorFn(iterable);\n    return iteratorFn && iteratorFn.call(iterable);\n  }\n\n  function getIteratorFn(iterable) {\n    var iteratorFn = iterable && (\n      (REAL_ITERATOR_SYMBOL && iterable[REAL_ITERATOR_SYMBOL]) ||\n      iterable[FAUX_ITERATOR_SYMBOL]\n    );\n    if (typeof iteratorFn === 'function') {\n      return iteratorFn;\n    }\n  }\n\n  function isArrayLike(value) {\n    return value && typeof value.length === 'number';\n  }\n\n  createClass(Seq, Iterable);\n    function Seq(value) {\n      return value === null || value === undefined ? emptySequence() :\n        isIterable(value) ? value.toSeq() : seqFromValue(value);\n    }\n\n    Seq.of = function(/*...values*/) {\n      return Seq(arguments);\n    };\n\n    Seq.prototype.toSeq = function() {\n      return this;\n    };\n\n    Seq.prototype.toString = function() {\n      return this.__toString('Seq {', '}');\n    };\n\n    Seq.prototype.cacheResult = function() {\n      if (!this._cache && this.__iterateUncached) {\n        this._cache = this.entrySeq().toArray();\n        this.size = this._cache.length;\n      }\n      return this;\n    };\n\n    // abstract __iterateUncached(fn, reverse)\n\n    Seq.prototype.__iterate = function(fn, reverse) {\n      return seqIterate(this, fn, reverse, true);\n    };\n\n    // abstract __iteratorUncached(type, reverse)\n\n    Seq.prototype.__iterator = function(type, reverse) {\n      return seqIterator(this, type, reverse, true);\n    };\n\n\n\n  createClass(KeyedSeq, Seq);\n    function KeyedSeq(value) {\n      return value === null || value === undefined ?\n        emptySequence().toKeyedSeq() :\n        isIterable(value) ?\n          (isKeyed(value) ? value.toSeq() : value.fromEntrySeq()) :\n          keyedSeqFromValue(value);\n    }\n\n    KeyedSeq.prototype.toKeyedSeq = function() {\n      return this;\n    };\n\n\n\n  createClass(IndexedSeq, Seq);\n    function IndexedSeq(value) {\n      return value === null || value === undefined ? emptySequence() :\n        !isIterable(value) ? indexedSeqFromValue(value) :\n        isKeyed(value) ? value.entrySeq() : value.toIndexedSeq();\n    }\n\n    IndexedSeq.of = function(/*...values*/) {\n      return IndexedSeq(arguments);\n    };\n\n    IndexedSeq.prototype.toIndexedSeq = function() {\n      return this;\n    };\n\n    IndexedSeq.prototype.toString = function() {\n      return this.__toString('Seq [', ']');\n    };\n\n    IndexedSeq.prototype.__iterate = function(fn, reverse) {\n      return seqIterate(this, fn, reverse, false);\n    };\n\n    IndexedSeq.prototype.__iterator = function(type, reverse) {\n      return seqIterator(this, type, reverse, false);\n    };\n\n\n\n  createClass(SetSeq, Seq);\n    function SetSeq(value) {\n      return (\n        value === null || value === undefined ? emptySequence() :\n        !isIterable(value) ? indexedSeqFromValue(value) :\n        isKeyed(value) ? value.entrySeq() : value\n      ).toSetSeq();\n    }\n\n    SetSeq.of = function(/*...values*/) {\n      return SetSeq(arguments);\n    };\n\n    SetSeq.prototype.toSetSeq = function() {\n      return this;\n    };\n\n\n\n  Seq.isSeq = isSeq;\n  Seq.Keyed = KeyedSeq;\n  Seq.Set = SetSeq;\n  Seq.Indexed = IndexedSeq;\n\n  var IS_SEQ_SENTINEL = '@@__IMMUTABLE_SEQ__@@';\n\n  Seq.prototype[IS_SEQ_SENTINEL] = true;\n\n\n\n  createClass(ArraySeq, IndexedSeq);\n    function ArraySeq(array) {\n      this._array = array;\n      this.size = array.length;\n    }\n\n    ArraySeq.prototype.get = function(index, notSetValue) {\n      return this.has(index) ? this._array[wrapIndex(this, index)] : notSetValue;\n    };\n\n    ArraySeq.prototype.__iterate = function(fn, reverse) {\n      var array = this._array;\n      var maxIndex = array.length - 1;\n      for (var ii = 0; ii <= maxIndex; ii++) {\n        if (fn(array[reverse ? maxIndex - ii : ii], ii, this) === false) {\n          return ii + 1;\n        }\n      }\n      return ii;\n    };\n\n    ArraySeq.prototype.__iterator = function(type, reverse) {\n      var array = this._array;\n      var maxIndex = array.length - 1;\n      var ii = 0;\n      return new Iterator(function() \n        {return ii > maxIndex ?\n          iteratorDone() :\n          iteratorValue(type, ii, array[reverse ? maxIndex - ii++ : ii++])}\n      );\n    };\n\n\n\n  createClass(ObjectSeq, KeyedSeq);\n    function ObjectSeq(object) {\n      var keys = Object.keys(object);\n      this._object = object;\n      this._keys = keys;\n      this.size = keys.length;\n    }\n\n    ObjectSeq.prototype.get = function(key, notSetValue) {\n      if (notSetValue !== undefined && !this.has(key)) {\n        return notSetValue;\n      }\n      return this._object[key];\n    };\n\n    ObjectSeq.prototype.has = function(key) {\n      return this._object.hasOwnProperty(key);\n    };\n\n    ObjectSeq.prototype.__iterate = function(fn, reverse) {\n      var object = this._object;\n      var keys = this._keys;\n      var maxIndex = keys.length - 1;\n      for (var ii = 0; ii <= maxIndex; ii++) {\n        var key = keys[reverse ? maxIndex - ii : ii];\n        if (fn(object[key], key, this) === false) {\n          return ii + 1;\n        }\n      }\n      return ii;\n    };\n\n    ObjectSeq.prototype.__iterator = function(type, reverse) {\n      var object = this._object;\n      var keys = this._keys;\n      var maxIndex = keys.length - 1;\n      var ii = 0;\n      return new Iterator(function()  {\n        var key = keys[reverse ? maxIndex - ii : ii];\n        return ii++ > maxIndex ?\n          iteratorDone() :\n          iteratorValue(type, key, object[key]);\n      });\n    };\n\n  ObjectSeq.prototype[IS_ORDERED_SENTINEL] = true;\n\n\n  createClass(IterableSeq, IndexedSeq);\n    function IterableSeq(iterable) {\n      this._iterable = iterable;\n      this.size = iterable.length || iterable.size;\n    }\n\n    IterableSeq.prototype.__iterateUncached = function(fn, reverse) {\n      if (reverse) {\n        return this.cacheResult().__iterate(fn, reverse);\n      }\n      var iterable = this._iterable;\n      var iterator = getIterator(iterable);\n      var iterations = 0;\n      if (isIterator(iterator)) {\n        var step;\n        while (!(step = iterator.next()).done) {\n          if (fn(step.value, iterations++, this) === false) {\n            break;\n          }\n        }\n      }\n      return iterations;\n    };\n\n    IterableSeq.prototype.__iteratorUncached = function(type, reverse) {\n      if (reverse) {\n        return this.cacheResult().__iterator(type, reverse);\n      }\n      var iterable = this._iterable;\n      var iterator = getIterator(iterable);\n      if (!isIterator(iterator)) {\n        return new Iterator(iteratorDone);\n      }\n      var iterations = 0;\n      return new Iterator(function()  {\n        var step = iterator.next();\n        return step.done ? step : iteratorValue(type, iterations++, step.value);\n      });\n    };\n\n\n\n  createClass(IteratorSeq, IndexedSeq);\n    function IteratorSeq(iterator) {\n      this._iterator = iterator;\n      this._iteratorCache = [];\n    }\n\n    IteratorSeq.prototype.__iterateUncached = function(fn, reverse) {\n      if (reverse) {\n        return this.cacheResult().__iterate(fn, reverse);\n      }\n      var iterator = this._iterator;\n      var cache = this._iteratorCache;\n      var iterations = 0;\n      while (iterations < cache.length) {\n        if (fn(cache[iterations], iterations++, this) === false) {\n          return iterations;\n        }\n      }\n      var step;\n      while (!(step = iterator.next()).done) {\n        var val = step.value;\n        cache[iterations] = val;\n        if (fn(val, iterations++, this) === false) {\n          break;\n        }\n      }\n      return iterations;\n    };\n\n    IteratorSeq.prototype.__iteratorUncached = function(type, reverse) {\n      if (reverse) {\n        return this.cacheResult().__iterator(type, reverse);\n      }\n      var iterator = this._iterator;\n      var cache = this._iteratorCache;\n      var iterations = 0;\n      return new Iterator(function()  {\n        if (iterations >= cache.length) {\n          var step = iterator.next();\n          if (step.done) {\n            return step;\n          }\n          cache[iterations] = step.value;\n        }\n        return iteratorValue(type, iterations, cache[iterations++]);\n      });\n    };\n\n\n\n\n  // # pragma Helper functions\n\n  function isSeq(maybeSeq) {\n    return !!(maybeSeq && maybeSeq[IS_SEQ_SENTINEL]);\n  }\n\n  var EMPTY_SEQ;\n\n  function emptySequence() {\n    return EMPTY_SEQ || (EMPTY_SEQ = new ArraySeq([]));\n  }\n\n  function keyedSeqFromValue(value) {\n    var seq =\n      Array.isArray(value) ? new ArraySeq(value).fromEntrySeq() :\n      isIterator(value) ? new IteratorSeq(value).fromEntrySeq() :\n      hasIterator(value) ? new IterableSeq(value).fromEntrySeq() :\n      typeof value === 'object' ? new ObjectSeq(value) :\n      undefined;\n    if (!seq) {\n      throw new TypeError(\n        'Expected Array or iterable object of [k, v] entries, '+\n        'or keyed object: ' + value\n      );\n    }\n    return seq;\n  }\n\n  function indexedSeqFromValue(value) {\n    var seq = maybeIndexedSeqFromValue(value);\n    if (!seq) {\n      throw new TypeError(\n        'Expected Array or iterable object of values: ' + value\n      );\n    }\n    return seq;\n  }\n\n  function seqFromValue(value) {\n    var seq = maybeIndexedSeqFromValue(value) ||\n      (typeof value === 'object' && new ObjectSeq(value));\n    if (!seq) {\n      throw new TypeError(\n        'Expected Array or iterable object of values, or keyed object: ' + value\n      );\n    }\n    return seq;\n  }\n\n  function maybeIndexedSeqFromValue(value) {\n    return (\n      isArrayLike(value) ? new ArraySeq(value) :\n      isIterator(value) ? new IteratorSeq(value) :\n      hasIterator(value) ? new IterableSeq(value) :\n      undefined\n    );\n  }\n\n  function seqIterate(seq, fn, reverse, useKeys) {\n    var cache = seq._cache;\n    if (cache) {\n      var maxIndex = cache.length - 1;\n      for (var ii = 0; ii <= maxIndex; ii++) {\n        var entry = cache[reverse ? maxIndex - ii : ii];\n        if (fn(entry[1], useKeys ? entry[0] : ii, seq) === false) {\n          return ii + 1;\n        }\n      }\n      return ii;\n    }\n    return seq.__iterateUncached(fn, reverse);\n  }\n\n  function seqIterator(seq, type, reverse, useKeys) {\n    var cache = seq._cache;\n    if (cache) {\n      var maxIndex = cache.length - 1;\n      var ii = 0;\n      return new Iterator(function()  {\n        var entry = cache[reverse ? maxIndex - ii : ii];\n        return ii++ > maxIndex ?\n          iteratorDone() :\n          iteratorValue(type, useKeys ? entry[0] : ii - 1, entry[1]);\n      });\n    }\n    return seq.__iteratorUncached(type, reverse);\n  }\n\n  function fromJS(json, converter) {\n    return converter ?\n      fromJSWith(converter, json, '', {'': json}) :\n      fromJSDefault(json);\n  }\n\n  function fromJSWith(converter, json, key, parentJSON) {\n    if (Array.isArray(json)) {\n      return converter.call(parentJSON, key, IndexedSeq(json).map(function(v, k)  {return fromJSWith(converter, v, k, json)}));\n    }\n    if (isPlainObj(json)) {\n      return converter.call(parentJSON, key, KeyedSeq(json).map(function(v, k)  {return fromJSWith(converter, v, k, json)}));\n    }\n    return json;\n  }\n\n  function fromJSDefault(json) {\n    if (Array.isArray(json)) {\n      return IndexedSeq(json).map(fromJSDefault).toList();\n    }\n    if (isPlainObj(json)) {\n      return KeyedSeq(json).map(fromJSDefault).toMap();\n    }\n    return json;\n  }\n\n  function isPlainObj(value) {\n    return value && (value.constructor === Object || value.constructor === undefined);\n  }\n\n  /**\n   * An extension of the \"same-value\" algorithm as [described for use by ES6 Map\n   * and Set](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map#Key_equality)\n   *\n   * NaN is considered the same as NaN, however -0 and 0 are considered the same\n   * value, which is different from the algorithm described by\n   * [`Object.is`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is).\n   *\n   * This is extended further to allow Objects to describe the values they\n   * represent, by way of `valueOf` or `equals` (and `hashCode`).\n   *\n   * Note: because of this extension, the key equality of Immutable.Map and the\n   * value equality of Immutable.Set will differ from ES6 Map and Set.\n   *\n   * ### Defining custom values\n   *\n   * The easiest way to describe the value an object represents is by implementing\n   * `valueOf`. For example, `Date` represents a value by returning a unix\n   * timestamp for `valueOf`:\n   *\n   *     var date1 = new Date(1234567890000); // Fri Feb 13 2009 ...\n   *     var date2 = new Date(1234567890000);\n   *     date1.valueOf(); // 1234567890000\n   *     assert( date1 !== date2 );\n   *     assert( Immutable.is( date1, date2 ) );\n   *\n   * Note: overriding `valueOf` may have other implications if you use this object\n   * where JavaScript expects a primitive, such as implicit string coercion.\n   *\n   * For more complex types, especially collections, implementing `valueOf` may\n   * not be performant. An alternative is to implement `equals` and `hashCode`.\n   *\n   * `equals` takes another object, presumably of similar type, and returns true\n   * if the it is equal. Equality is symmetrical, so the same result should be\n   * returned if this and the argument are flipped.\n   *\n   *     assert( a.equals(b) === b.equals(a) );\n   *\n   * `hashCode` returns a 32bit integer number representing the object which will\n   * be used to determine how to store the value object in a Map or Set. You must\n   * provide both or neither methods, one must not exist without the other.\n   *\n   * Also, an important relationship between these methods must be upheld: if two\n   * values are equal, they *must* return the same hashCode. If the values are not\n   * equal, they might have the same hashCode; this is called a hash collision,\n   * and while undesirable for performance reasons, it is acceptable.\n   *\n   *     if (a.equals(b)) {\n   *       assert( a.hashCode() === b.hashCode() );\n   *     }\n   *\n   * All Immutable collections implement `equals` and `hashCode`.\n   *\n   */\n  function is(valueA, valueB) {\n    if (valueA === valueB || (valueA !== valueA && valueB !== valueB)) {\n      return true;\n    }\n    if (!valueA || !valueB) {\n      return false;\n    }\n    if (typeof valueA.valueOf === 'function' &&\n        typeof valueB.valueOf === 'function') {\n      valueA = valueA.valueOf();\n      valueB = valueB.valueOf();\n      if (valueA === valueB || (valueA !== valueA && valueB !== valueB)) {\n        return true;\n      }\n      if (!valueA || !valueB) {\n        return false;\n      }\n    }\n    if (typeof valueA.equals === 'function' &&\n        typeof valueB.equals === 'function' &&\n        valueA.equals(valueB)) {\n      return true;\n    }\n    return false;\n  }\n\n  function deepEqual(a, b) {\n    if (a === b) {\n      return true;\n    }\n\n    if (\n      !isIterable(b) ||\n      a.size !== undefined && b.size !== undefined && a.size !== b.size ||\n      a.__hash !== undefined && b.__hash !== undefined && a.__hash !== b.__hash ||\n      isKeyed(a) !== isKeyed(b) ||\n      isIndexed(a) !== isIndexed(b) ||\n      isOrdered(a) !== isOrdered(b)\n    ) {\n      return false;\n    }\n\n    if (a.size === 0 && b.size === 0) {\n      return true;\n    }\n\n    var notAssociative = !isAssociative(a);\n\n    if (isOrdered(a)) {\n      var entries = a.entries();\n      return b.every(function(v, k)  {\n        var entry = entries.next().value;\n        return entry && is(entry[1], v) && (notAssociative || is(entry[0], k));\n      }) && entries.next().done;\n    }\n\n    var flipped = false;\n\n    if (a.size === undefined) {\n      if (b.size === undefined) {\n        if (typeof a.cacheResult === 'function') {\n          a.cacheResult();\n        }\n      } else {\n        flipped = true;\n        var _ = a;\n        a = b;\n        b = _;\n      }\n    }\n\n    var allEqual = true;\n    var bSize = b.__iterate(function(v, k)  {\n      if (notAssociative ? !a.has(v) :\n          flipped ? !is(v, a.get(k, NOT_SET)) : !is(a.get(k, NOT_SET), v)) {\n        allEqual = false;\n        return false;\n      }\n    });\n\n    return allEqual && a.size === bSize;\n  }\n\n  createClass(Repeat, IndexedSeq);\n\n    function Repeat(value, times) {\n      if (!(this instanceof Repeat)) {\n        return new Repeat(value, times);\n      }\n      this._value = value;\n      this.size = times === undefined ? Infinity : Math.max(0, times);\n      if (this.size === 0) {\n        if (EMPTY_REPEAT) {\n          return EMPTY_REPEAT;\n        }\n        EMPTY_REPEAT = this;\n      }\n    }\n\n    Repeat.prototype.toString = function() {\n      if (this.size === 0) {\n        return 'Repeat []';\n      }\n      return 'Repeat [ ' + this._value + ' ' + this.size + ' times ]';\n    };\n\n    Repeat.prototype.get = function(index, notSetValue) {\n      return this.has(index) ? this._value : notSetValue;\n    };\n\n    Repeat.prototype.includes = function(searchValue) {\n      return is(this._value, searchValue);\n    };\n\n    Repeat.prototype.slice = function(begin, end) {\n      var size = this.size;\n      return wholeSlice(begin, end, size) ? this :\n        new Repeat(this._value, resolveEnd(end, size) - resolveBegin(begin, size));\n    };\n\n    Repeat.prototype.reverse = function() {\n      return this;\n    };\n\n    Repeat.prototype.indexOf = function(searchValue) {\n      if (is(this._value, searchValue)) {\n        return 0;\n      }\n      return -1;\n    };\n\n    Repeat.prototype.lastIndexOf = function(searchValue) {\n      if (is(this._value, searchValue)) {\n        return this.size;\n      }\n      return -1;\n    };\n\n    Repeat.prototype.__iterate = function(fn, reverse) {\n      for (var ii = 0; ii < this.size; ii++) {\n        if (fn(this._value, ii, this) === false) {\n          return ii + 1;\n        }\n      }\n      return ii;\n    };\n\n    Repeat.prototype.__iterator = function(type, reverse) {var this$0 = this;\n      var ii = 0;\n      return new Iterator(function() \n        {return ii < this$0.size ? iteratorValue(type, ii++, this$0._value) : iteratorDone()}\n      );\n    };\n\n    Repeat.prototype.equals = function(other) {\n      return other instanceof Repeat ?\n        is(this._value, other._value) :\n        deepEqual(other);\n    };\n\n\n  var EMPTY_REPEAT;\n\n  function invariant(condition, error) {\n    if (!condition) throw new Error(error);\n  }\n\n  createClass(Range, IndexedSeq);\n\n    function Range(start, end, step) {\n      if (!(this instanceof Range)) {\n        return new Range(start, end, step);\n      }\n      invariant(step !== 0, 'Cannot step a Range by 0');\n      start = start || 0;\n      if (end === undefined) {\n        end = Infinity;\n      }\n      step = step === undefined ? 1 : Math.abs(step);\n      if (end < start) {\n        step = -step;\n      }\n      this._start = start;\n      this._end = end;\n      this._step = step;\n      this.size = Math.max(0, Math.ceil((end - start) / step - 1) + 1);\n      if (this.size === 0) {\n        if (EMPTY_RANGE) {\n          return EMPTY_RANGE;\n        }\n        EMPTY_RANGE = this;\n      }\n    }\n\n    Range.prototype.toString = function() {\n      if (this.size === 0) {\n        return 'Range []';\n      }\n      return 'Range [ ' +\n        this._start + '...' + this._end +\n        (this._step !== 1 ? ' by ' + this._step : '') +\n      ' ]';\n    };\n\n    Range.prototype.get = function(index, notSetValue) {\n      return this.has(index) ?\n        this._start + wrapIndex(this, index) * this._step :\n        notSetValue;\n    };\n\n    Range.prototype.includes = function(searchValue) {\n      var possibleIndex = (searchValue - this._start) / this._step;\n      return possibleIndex >= 0 &&\n        possibleIndex < this.size &&\n        possibleIndex === Math.floor(possibleIndex);\n    };\n\n    Range.prototype.slice = function(begin, end) {\n      if (wholeSlice(begin, end, this.size)) {\n        return this;\n      }\n      begin = resolveBegin(begin, this.size);\n      end = resolveEnd(end, this.size);\n      if (end <= begin) {\n        return new Range(0, 0);\n      }\n      return new Range(this.get(begin, this._end), this.get(end, this._end), this._step);\n    };\n\n    Range.prototype.indexOf = function(searchValue) {\n      var offsetValue = searchValue - this._start;\n      if (offsetValue % this._step === 0) {\n        var index = offsetValue / this._step;\n        if (index >= 0 && index < this.size) {\n          return index\n        }\n      }\n      return -1;\n    };\n\n    Range.prototype.lastIndexOf = function(searchValue) {\n      return this.indexOf(searchValue);\n    };\n\n    Range.prototype.__iterate = function(fn, reverse) {\n      var maxIndex = this.size - 1;\n      var step = this._step;\n      var value = reverse ? this._start + maxIndex * step : this._start;\n      for (var ii = 0; ii <= maxIndex; ii++) {\n        if (fn(value, ii, this) === false) {\n          return ii + 1;\n        }\n        value += reverse ? -step : step;\n      }\n      return ii;\n    };\n\n    Range.prototype.__iterator = function(type, reverse) {\n      var maxIndex = this.size - 1;\n      var step = this._step;\n      var value = reverse ? this._start + maxIndex * step : this._start;\n      var ii = 0;\n      return new Iterator(function()  {\n        var v = value;\n        value += reverse ? -step : step;\n        return ii > maxIndex ? iteratorDone() : iteratorValue(type, ii++, v);\n      });\n    };\n\n    Range.prototype.equals = function(other) {\n      return other instanceof Range ?\n        this._start === other._start &&\n        this._end === other._end &&\n        this._step === other._step :\n        deepEqual(this, other);\n    };\n\n\n  var EMPTY_RANGE;\n\n  createClass(Collection, Iterable);\n    function Collection() {\n      throw TypeError('Abstract');\n    }\n\n\n  createClass(KeyedCollection, Collection);function KeyedCollection() {}\n\n  createClass(IndexedCollection, Collection);function IndexedCollection() {}\n\n  createClass(SetCollection, Collection);function SetCollection() {}\n\n\n  Collection.Keyed = KeyedCollection;\n  Collection.Indexed = IndexedCollection;\n  Collection.Set = SetCollection;\n\n  var imul =\n    typeof Math.imul === 'function' && Math.imul(0xffffffff, 2) === -2 ?\n    Math.imul :\n    function imul(a, b) {\n      a = a | 0; // int\n      b = b | 0; // int\n      var c = a & 0xffff;\n      var d = b & 0xffff;\n      // Shift by 0 fixes the sign on the high part.\n      return (c * d) + ((((a >>> 16) * d + c * (b >>> 16)) << 16) >>> 0) | 0; // int\n    };\n\n  // v8 has an optimization for storing 31-bit signed numbers.\n  // Values which have either 00 or 11 as the high order bits qualify.\n  // This function drops the highest order bit in a signed number, maintaining\n  // the sign bit.\n  function smi(i32) {\n    return ((i32 >>> 1) & 0x40000000) | (i32 & 0xBFFFFFFF);\n  }\n\n  function hash(o) {\n    if (o === false || o === null || o === undefined) {\n      return 0;\n    }\n    if (typeof o.valueOf === 'function') {\n      o = o.valueOf();\n      if (o === false || o === null || o === undefined) {\n        return 0;\n      }\n    }\n    if (o === true) {\n      return 1;\n    }\n    var type = typeof o;\n    if (type === 'number') {\n      if (o !== o || o === Infinity) {\n        return 0;\n      }\n      var h = o | 0;\n      if (h !== o) {\n        h ^= o * 0xFFFFFFFF;\n      }\n      while (o > 0xFFFFFFFF) {\n        o /= 0xFFFFFFFF;\n        h ^= o;\n      }\n      return smi(h);\n    }\n    if (type === 'string') {\n      return o.length > STRING_HASH_CACHE_MIN_STRLEN ? cachedHashString(o) : hashString(o);\n    }\n    if (typeof o.hashCode === 'function') {\n      return o.hashCode();\n    }\n    if (type === 'object') {\n      return hashJSObj(o);\n    }\n    if (typeof o.toString === 'function') {\n      return hashString(o.toString());\n    }\n    throw new Error('Value type ' + type + ' cannot be hashed.');\n  }\n\n  function cachedHashString(string) {\n    var hash = stringHashCache[string];\n    if (hash === undefined) {\n      hash = hashString(string);\n      if (STRING_HASH_CACHE_SIZE === STRING_HASH_CACHE_MAX_SIZE) {\n        STRING_HASH_CACHE_SIZE = 0;\n        stringHashCache = {};\n      }\n      STRING_HASH_CACHE_SIZE++;\n      stringHashCache[string] = hash;\n    }\n    return hash;\n  }\n\n  // http://jsperf.com/hashing-strings\n  function hashString(string) {\n    // This is the hash from JVM\n    // The hash code for a string is computed as\n    // s[0] * 31 ^ (n - 1) + s[1] * 31 ^ (n - 2) + ... + s[n - 1],\n    // where s[i] is the ith character of the string and n is the length of\n    // the string. We \"mod\" the result to make it between 0 (inclusive) and 2^31\n    // (exclusive) by dropping high bits.\n    var hash = 0;\n    for (var ii = 0; ii < string.length; ii++) {\n      hash = 31 * hash + string.charCodeAt(ii) | 0;\n    }\n    return smi(hash);\n  }\n\n  function hashJSObj(obj) {\n    var hash;\n    if (usingWeakMap) {\n      hash = weakMap.get(obj);\n      if (hash !== undefined) {\n        return hash;\n      }\n    }\n\n    hash = obj[UID_HASH_KEY];\n    if (hash !== undefined) {\n      return hash;\n    }\n\n    if (!canDefineProperty) {\n      hash = obj.propertyIsEnumerable && obj.propertyIsEnumerable[UID_HASH_KEY];\n      if (hash !== undefined) {\n        return hash;\n      }\n\n      hash = getIENodeHash(obj);\n      if (hash !== undefined) {\n        return hash;\n      }\n    }\n\n    hash = ++objHashUID;\n    if (objHashUID & 0x40000000) {\n      objHashUID = 0;\n    }\n\n    if (usingWeakMap) {\n      weakMap.set(obj, hash);\n    } else if (isExtensible !== undefined && isExtensible(obj) === false) {\n      throw new Error('Non-extensible objects are not allowed as keys.');\n    } else if (canDefineProperty) {\n      Object.defineProperty(obj, UID_HASH_KEY, {\n        'enumerable': false,\n        'configurable': false,\n        'writable': false,\n        'value': hash\n      });\n    } else if (obj.propertyIsEnumerable !== undefined &&\n               obj.propertyIsEnumerable === obj.constructor.prototype.propertyIsEnumerable) {\n      // Since we can't define a non-enumerable property on the object\n      // we'll hijack one of the less-used non-enumerable properties to\n      // save our hash on it. Since this is a function it will not show up in\n      // `JSON.stringify` which is what we want.\n      obj.propertyIsEnumerable = function() {\n        return this.constructor.prototype.propertyIsEnumerable.apply(this, arguments);\n      };\n      obj.propertyIsEnumerable[UID_HASH_KEY] = hash;\n    } else if (obj.nodeType !== undefined) {\n      // At this point we couldn't get the IE `uniqueID` to use as a hash\n      // and we couldn't use a non-enumerable property to exploit the\n      // dontEnum bug so we simply add the `UID_HASH_KEY` on the node\n      // itself.\n      obj[UID_HASH_KEY] = hash;\n    } else {\n      throw new Error('Unable to set a non-enumerable property on object.');\n    }\n\n    return hash;\n  }\n\n  // Get references to ES5 object methods.\n  var isExtensible = Object.isExtensible;\n\n  // True if Object.defineProperty works as expected. IE8 fails this test.\n  var canDefineProperty = (function() {\n    try {\n      Object.defineProperty({}, '@', {});\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }());\n\n  // IE has a `uniqueID` property on DOM nodes. We can construct the hash from it\n  // and avoid memory leaks from the IE cloneNode bug.\n  function getIENodeHash(node) {\n    if (node && node.nodeType > 0) {\n      switch (node.nodeType) {\n        case 1: // Element\n          return node.uniqueID;\n        case 9: // Document\n          return node.documentElement && node.documentElement.uniqueID;\n      }\n    }\n  }\n\n  // If possible, use a WeakMap.\n  var usingWeakMap = typeof WeakMap === 'function';\n  var weakMap;\n  if (usingWeakMap) {\n    weakMap = new WeakMap();\n  }\n\n  var objHashUID = 0;\n\n  var UID_HASH_KEY = '__immutablehash__';\n  if (typeof Symbol === 'function') {\n    UID_HASH_KEY = Symbol(UID_HASH_KEY);\n  }\n\n  var STRING_HASH_CACHE_MIN_STRLEN = 16;\n  var STRING_HASH_CACHE_MAX_SIZE = 255;\n  var STRING_HASH_CACHE_SIZE = 0;\n  var stringHashCache = {};\n\n  function assertNotInfinite(size) {\n    invariant(\n      size !== Infinity,\n      'Cannot perform this action with an infinite size.'\n    );\n  }\n\n  createClass(Map, KeyedCollection);\n\n    // @pragma Construction\n\n    function Map(value) {\n      return value === null || value === undefined ? emptyMap() :\n        isMap(value) && !isOrdered(value) ? value :\n        emptyMap().withMutations(function(map ) {\n          var iter = KeyedIterable(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function(v, k)  {return map.set(k, v)});\n        });\n    }\n\n    Map.of = function() {var keyValues = SLICE$0.call(arguments, 0);\n      return emptyMap().withMutations(function(map ) {\n        for (var i = 0; i < keyValues.length; i += 2) {\n          if (i + 1 >= keyValues.length) {\n            throw new Error('Missing value for key: ' + keyValues[i]);\n          }\n          map.set(keyValues[i], keyValues[i + 1]);\n        }\n      });\n    };\n\n    Map.prototype.toString = function() {\n      return this.__toString('Map {', '}');\n    };\n\n    // @pragma Access\n\n    Map.prototype.get = function(k, notSetValue) {\n      return this._root ?\n        this._root.get(0, undefined, k, notSetValue) :\n        notSetValue;\n    };\n\n    // @pragma Modification\n\n    Map.prototype.set = function(k, v) {\n      return updateMap(this, k, v);\n    };\n\n    Map.prototype.setIn = function(keyPath, v) {\n      return this.updateIn(keyPath, NOT_SET, function()  {return v});\n    };\n\n    Map.prototype.remove = function(k) {\n      return updateMap(this, k, NOT_SET);\n    };\n\n    Map.prototype.deleteIn = function(keyPath) {\n      return this.updateIn(keyPath, function()  {return NOT_SET});\n    };\n\n    Map.prototype.update = function(k, notSetValue, updater) {\n      return arguments.length === 1 ?\n        k(this) :\n        this.updateIn([k], notSetValue, updater);\n    };\n\n    Map.prototype.updateIn = function(keyPath, notSetValue, updater) {\n      if (!updater) {\n        updater = notSetValue;\n        notSetValue = undefined;\n      }\n      var updatedValue = updateInDeepMap(\n        this,\n        forceIterator(keyPath),\n        notSetValue,\n        updater\n      );\n      return updatedValue === NOT_SET ? undefined : updatedValue;\n    };\n\n    Map.prototype.clear = function() {\n      if (this.size === 0) {\n        return this;\n      }\n      if (this.__ownerID) {\n        this.size = 0;\n        this._root = null;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return emptyMap();\n    };\n\n    // @pragma Composition\n\n    Map.prototype.merge = function(/*...iters*/) {\n      return mergeIntoMapWith(this, undefined, arguments);\n    };\n\n    Map.prototype.mergeWith = function(merger) {var iters = SLICE$0.call(arguments, 1);\n      return mergeIntoMapWith(this, merger, iters);\n    };\n\n    Map.prototype.mergeIn = function(keyPath) {var iters = SLICE$0.call(arguments, 1);\n      return this.updateIn(\n        keyPath,\n        emptyMap(),\n        function(m ) {return typeof m.merge === 'function' ?\n          m.merge.apply(m, iters) :\n          iters[iters.length - 1]}\n      );\n    };\n\n    Map.prototype.mergeDeep = function(/*...iters*/) {\n      return mergeIntoMapWith(this, deepMerger, arguments);\n    };\n\n    Map.prototype.mergeDeepWith = function(merger) {var iters = SLICE$0.call(arguments, 1);\n      return mergeIntoMapWith(this, deepMergerWith(merger), iters);\n    };\n\n    Map.prototype.mergeDeepIn = function(keyPath) {var iters = SLICE$0.call(arguments, 1);\n      return this.updateIn(\n        keyPath,\n        emptyMap(),\n        function(m ) {return typeof m.mergeDeep === 'function' ?\n          m.mergeDeep.apply(m, iters) :\n          iters[iters.length - 1]}\n      );\n    };\n\n    Map.prototype.sort = function(comparator) {\n      // Late binding\n      return OrderedMap(sortFactory(this, comparator));\n    };\n\n    Map.prototype.sortBy = function(mapper, comparator) {\n      // Late binding\n      return OrderedMap(sortFactory(this, comparator, mapper));\n    };\n\n    // @pragma Mutability\n\n    Map.prototype.withMutations = function(fn) {\n      var mutable = this.asMutable();\n      fn(mutable);\n      return mutable.wasAltered() ? mutable.__ensureOwner(this.__ownerID) : this;\n    };\n\n    Map.prototype.asMutable = function() {\n      return this.__ownerID ? this : this.__ensureOwner(new OwnerID());\n    };\n\n    Map.prototype.asImmutable = function() {\n      return this.__ensureOwner();\n    };\n\n    Map.prototype.wasAltered = function() {\n      return this.__altered;\n    };\n\n    Map.prototype.__iterator = function(type, reverse) {\n      return new MapIterator(this, type, reverse);\n    };\n\n    Map.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      var iterations = 0;\n      this._root && this._root.iterate(function(entry ) {\n        iterations++;\n        return fn(entry[1], entry[0], this$0);\n      }, reverse);\n      return iterations;\n    };\n\n    Map.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        this.__altered = false;\n        return this;\n      }\n      return makeMap(this.size, this._root, ownerID, this.__hash);\n    };\n\n\n  function isMap(maybeMap) {\n    return !!(maybeMap && maybeMap[IS_MAP_SENTINEL]);\n  }\n\n  Map.isMap = isMap;\n\n  var IS_MAP_SENTINEL = '@@__IMMUTABLE_MAP__@@';\n\n  var MapPrototype = Map.prototype;\n  MapPrototype[IS_MAP_SENTINEL] = true;\n  MapPrototype[DELETE] = MapPrototype.remove;\n  MapPrototype.removeIn = MapPrototype.deleteIn;\n\n\n  // #pragma Trie Nodes\n\n\n\n    function ArrayMapNode(ownerID, entries) {\n      this.ownerID = ownerID;\n      this.entries = entries;\n    }\n\n    ArrayMapNode.prototype.get = function(shift, keyHash, key, notSetValue) {\n      var entries = this.entries;\n      for (var ii = 0, len = entries.length; ii < len; ii++) {\n        if (is(key, entries[ii][0])) {\n          return entries[ii][1];\n        }\n      }\n      return notSetValue;\n    };\n\n    ArrayMapNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n      var removed = value === NOT_SET;\n\n      var entries = this.entries;\n      var idx = 0;\n      for (var len = entries.length; idx < len; idx++) {\n        if (is(key, entries[idx][0])) {\n          break;\n        }\n      }\n      var exists = idx < len;\n\n      if (exists ? entries[idx][1] === value : removed) {\n        return this;\n      }\n\n      SetRef(didAlter);\n      (removed || !exists) && SetRef(didChangeSize);\n\n      if (removed && entries.length === 1) {\n        return; // undefined\n      }\n\n      if (!exists && !removed && entries.length >= MAX_ARRAY_MAP_SIZE) {\n        return createNodes(ownerID, entries, key, value);\n      }\n\n      var isEditable = ownerID && ownerID === this.ownerID;\n      var newEntries = isEditable ? entries : arrCopy(entries);\n\n      if (exists) {\n        if (removed) {\n          idx === len - 1 ? newEntries.pop() : (newEntries[idx] = newEntries.pop());\n        } else {\n          newEntries[idx] = [key, value];\n        }\n      } else {\n        newEntries.push([key, value]);\n      }\n\n      if (isEditable) {\n        this.entries = newEntries;\n        return this;\n      }\n\n      return new ArrayMapNode(ownerID, newEntries);\n    };\n\n\n\n\n    function BitmapIndexedNode(ownerID, bitmap, nodes) {\n      this.ownerID = ownerID;\n      this.bitmap = bitmap;\n      this.nodes = nodes;\n    }\n\n    BitmapIndexedNode.prototype.get = function(shift, keyHash, key, notSetValue) {\n      if (keyHash === undefined) {\n        keyHash = hash(key);\n      }\n      var bit = (1 << ((shift === 0 ? keyHash : keyHash >>> shift) & MASK));\n      var bitmap = this.bitmap;\n      return (bitmap & bit) === 0 ? notSetValue :\n        this.nodes[popCount(bitmap & (bit - 1))].get(shift + SHIFT, keyHash, key, notSetValue);\n    };\n\n    BitmapIndexedNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n      if (keyHash === undefined) {\n        keyHash = hash(key);\n      }\n      var keyHashFrag = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n      var bit = 1 << keyHashFrag;\n      var bitmap = this.bitmap;\n      var exists = (bitmap & bit) !== 0;\n\n      if (!exists && value === NOT_SET) {\n        return this;\n      }\n\n      var idx = popCount(bitmap & (bit - 1));\n      var nodes = this.nodes;\n      var node = exists ? nodes[idx] : undefined;\n      var newNode = updateNode(node, ownerID, shift + SHIFT, keyHash, key, value, didChangeSize, didAlter);\n\n      if (newNode === node) {\n        return this;\n      }\n\n      if (!exists && newNode && nodes.length >= MAX_BITMAP_INDEXED_SIZE) {\n        return expandNodes(ownerID, nodes, bitmap, keyHashFrag, newNode);\n      }\n\n      if (exists && !newNode && nodes.length === 2 && isLeafNode(nodes[idx ^ 1])) {\n        return nodes[idx ^ 1];\n      }\n\n      if (exists && newNode && nodes.length === 1 && isLeafNode(newNode)) {\n        return newNode;\n      }\n\n      var isEditable = ownerID && ownerID === this.ownerID;\n      var newBitmap = exists ? newNode ? bitmap : bitmap ^ bit : bitmap | bit;\n      var newNodes = exists ? newNode ?\n        setIn(nodes, idx, newNode, isEditable) :\n        spliceOut(nodes, idx, isEditable) :\n        spliceIn(nodes, idx, newNode, isEditable);\n\n      if (isEditable) {\n        this.bitmap = newBitmap;\n        this.nodes = newNodes;\n        return this;\n      }\n\n      return new BitmapIndexedNode(ownerID, newBitmap, newNodes);\n    };\n\n\n\n\n    function HashArrayMapNode(ownerID, count, nodes) {\n      this.ownerID = ownerID;\n      this.count = count;\n      this.nodes = nodes;\n    }\n\n    HashArrayMapNode.prototype.get = function(shift, keyHash, key, notSetValue) {\n      if (keyHash === undefined) {\n        keyHash = hash(key);\n      }\n      var idx = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n      var node = this.nodes[idx];\n      return node ? node.get(shift + SHIFT, keyHash, key, notSetValue) : notSetValue;\n    };\n\n    HashArrayMapNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n      if (keyHash === undefined) {\n        keyHash = hash(key);\n      }\n      var idx = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n      var removed = value === NOT_SET;\n      var nodes = this.nodes;\n      var node = nodes[idx];\n\n      if (removed && !node) {\n        return this;\n      }\n\n      var newNode = updateNode(node, ownerID, shift + SHIFT, keyHash, key, value, didChangeSize, didAlter);\n      if (newNode === node) {\n        return this;\n      }\n\n      var newCount = this.count;\n      if (!node) {\n        newCount++;\n      } else if (!newNode) {\n        newCount--;\n        if (newCount < MIN_HASH_ARRAY_MAP_SIZE) {\n          return packNodes(ownerID, nodes, newCount, idx);\n        }\n      }\n\n      var isEditable = ownerID && ownerID === this.ownerID;\n      var newNodes = setIn(nodes, idx, newNode, isEditable);\n\n      if (isEditable) {\n        this.count = newCount;\n        this.nodes = newNodes;\n        return this;\n      }\n\n      return new HashArrayMapNode(ownerID, newCount, newNodes);\n    };\n\n\n\n\n    function HashCollisionNode(ownerID, keyHash, entries) {\n      this.ownerID = ownerID;\n      this.keyHash = keyHash;\n      this.entries = entries;\n    }\n\n    HashCollisionNode.prototype.get = function(shift, keyHash, key, notSetValue) {\n      var entries = this.entries;\n      for (var ii = 0, len = entries.length; ii < len; ii++) {\n        if (is(key, entries[ii][0])) {\n          return entries[ii][1];\n        }\n      }\n      return notSetValue;\n    };\n\n    HashCollisionNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n      if (keyHash === undefined) {\n        keyHash = hash(key);\n      }\n\n      var removed = value === NOT_SET;\n\n      if (keyHash !== this.keyHash) {\n        if (removed) {\n          return this;\n        }\n        SetRef(didAlter);\n        SetRef(didChangeSize);\n        return mergeIntoNode(this, ownerID, shift, keyHash, [key, value]);\n      }\n\n      var entries = this.entries;\n      var idx = 0;\n      for (var len = entries.length; idx < len; idx++) {\n        if (is(key, entries[idx][0])) {\n          break;\n        }\n      }\n      var exists = idx < len;\n\n      if (exists ? entries[idx][1] === value : removed) {\n        return this;\n      }\n\n      SetRef(didAlter);\n      (removed || !exists) && SetRef(didChangeSize);\n\n      if (removed && len === 2) {\n        return new ValueNode(ownerID, this.keyHash, entries[idx ^ 1]);\n      }\n\n      var isEditable = ownerID && ownerID === this.ownerID;\n      var newEntries = isEditable ? entries : arrCopy(entries);\n\n      if (exists) {\n        if (removed) {\n          idx === len - 1 ? newEntries.pop() : (newEntries[idx] = newEntries.pop());\n        } else {\n          newEntries[idx] = [key, value];\n        }\n      } else {\n        newEntries.push([key, value]);\n      }\n\n      if (isEditable) {\n        this.entries = newEntries;\n        return this;\n      }\n\n      return new HashCollisionNode(ownerID, this.keyHash, newEntries);\n    };\n\n\n\n\n    function ValueNode(ownerID, keyHash, entry) {\n      this.ownerID = ownerID;\n      this.keyHash = keyHash;\n      this.entry = entry;\n    }\n\n    ValueNode.prototype.get = function(shift, keyHash, key, notSetValue) {\n      return is(key, this.entry[0]) ? this.entry[1] : notSetValue;\n    };\n\n    ValueNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n      var removed = value === NOT_SET;\n      var keyMatch = is(key, this.entry[0]);\n      if (keyMatch ? value === this.entry[1] : removed) {\n        return this;\n      }\n\n      SetRef(didAlter);\n\n      if (removed) {\n        SetRef(didChangeSize);\n        return; // undefined\n      }\n\n      if (keyMatch) {\n        if (ownerID && ownerID === this.ownerID) {\n          this.entry[1] = value;\n          return this;\n        }\n        return new ValueNode(ownerID, this.keyHash, [key, value]);\n      }\n\n      SetRef(didChangeSize);\n      return mergeIntoNode(this, ownerID, shift, hash(key), [key, value]);\n    };\n\n\n\n  // #pragma Iterators\n\n  ArrayMapNode.prototype.iterate =\n  HashCollisionNode.prototype.iterate = function (fn, reverse) {\n    var entries = this.entries;\n    for (var ii = 0, maxIndex = entries.length - 1; ii <= maxIndex; ii++) {\n      if (fn(entries[reverse ? maxIndex - ii : ii]) === false) {\n        return false;\n      }\n    }\n  }\n\n  BitmapIndexedNode.prototype.iterate =\n  HashArrayMapNode.prototype.iterate = function (fn, reverse) {\n    var nodes = this.nodes;\n    for (var ii = 0, maxIndex = nodes.length - 1; ii <= maxIndex; ii++) {\n      var node = nodes[reverse ? maxIndex - ii : ii];\n      if (node && node.iterate(fn, reverse) === false) {\n        return false;\n      }\n    }\n  }\n\n  ValueNode.prototype.iterate = function (fn, reverse) {\n    return fn(this.entry);\n  }\n\n  createClass(MapIterator, Iterator);\n\n    function MapIterator(map, type, reverse) {\n      this._type = type;\n      this._reverse = reverse;\n      this._stack = map._root && mapIteratorFrame(map._root);\n    }\n\n    MapIterator.prototype.next = function() {\n      var type = this._type;\n      var stack = this._stack;\n      while (stack) {\n        var node = stack.node;\n        var index = stack.index++;\n        var maxIndex;\n        if (node.entry) {\n          if (index === 0) {\n            return mapIteratorValue(type, node.entry);\n          }\n        } else if (node.entries) {\n          maxIndex = node.entries.length - 1;\n          if (index <= maxIndex) {\n            return mapIteratorValue(type, node.entries[this._reverse ? maxIndex - index : index]);\n          }\n        } else {\n          maxIndex = node.nodes.length - 1;\n          if (index <= maxIndex) {\n            var subNode = node.nodes[this._reverse ? maxIndex - index : index];\n            if (subNode) {\n              if (subNode.entry) {\n                return mapIteratorValue(type, subNode.entry);\n              }\n              stack = this._stack = mapIteratorFrame(subNode, stack);\n            }\n            continue;\n          }\n        }\n        stack = this._stack = this._stack.__prev;\n      }\n      return iteratorDone();\n    };\n\n\n  function mapIteratorValue(type, entry) {\n    return iteratorValue(type, entry[0], entry[1]);\n  }\n\n  function mapIteratorFrame(node, prev) {\n    return {\n      node: node,\n      index: 0,\n      __prev: prev\n    };\n  }\n\n  function makeMap(size, root, ownerID, hash) {\n    var map = Object.create(MapPrototype);\n    map.size = size;\n    map._root = root;\n    map.__ownerID = ownerID;\n    map.__hash = hash;\n    map.__altered = false;\n    return map;\n  }\n\n  var EMPTY_MAP;\n  function emptyMap() {\n    return EMPTY_MAP || (EMPTY_MAP = makeMap(0));\n  }\n\n  function updateMap(map, k, v) {\n    var newRoot;\n    var newSize;\n    if (!map._root) {\n      if (v === NOT_SET) {\n        return map;\n      }\n      newSize = 1;\n      newRoot = new ArrayMapNode(map.__ownerID, [[k, v]]);\n    } else {\n      var didChangeSize = MakeRef(CHANGE_LENGTH);\n      var didAlter = MakeRef(DID_ALTER);\n      newRoot = updateNode(map._root, map.__ownerID, 0, undefined, k, v, didChangeSize, didAlter);\n      if (!didAlter.value) {\n        return map;\n      }\n      newSize = map.size + (didChangeSize.value ? v === NOT_SET ? -1 : 1 : 0);\n    }\n    if (map.__ownerID) {\n      map.size = newSize;\n      map._root = newRoot;\n      map.__hash = undefined;\n      map.__altered = true;\n      return map;\n    }\n    return newRoot ? makeMap(newSize, newRoot) : emptyMap();\n  }\n\n  function updateNode(node, ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n    if (!node) {\n      if (value === NOT_SET) {\n        return node;\n      }\n      SetRef(didAlter);\n      SetRef(didChangeSize);\n      return new ValueNode(ownerID, keyHash, [key, value]);\n    }\n    return node.update(ownerID, shift, keyHash, key, value, didChangeSize, didAlter);\n  }\n\n  function isLeafNode(node) {\n    return node.constructor === ValueNode || node.constructor === HashCollisionNode;\n  }\n\n  function mergeIntoNode(node, ownerID, shift, keyHash, entry) {\n    if (node.keyHash === keyHash) {\n      return new HashCollisionNode(ownerID, keyHash, [node.entry, entry]);\n    }\n\n    var idx1 = (shift === 0 ? node.keyHash : node.keyHash >>> shift) & MASK;\n    var idx2 = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n\n    var newNode;\n    var nodes = idx1 === idx2 ?\n      [mergeIntoNode(node, ownerID, shift + SHIFT, keyHash, entry)] :\n      ((newNode = new ValueNode(ownerID, keyHash, entry)), idx1 < idx2 ? [node, newNode] : [newNode, node]);\n\n    return new BitmapIndexedNode(ownerID, (1 << idx1) | (1 << idx2), nodes);\n  }\n\n  function createNodes(ownerID, entries, key, value) {\n    if (!ownerID) {\n      ownerID = new OwnerID();\n    }\n    var node = new ValueNode(ownerID, hash(key), [key, value]);\n    for (var ii = 0; ii < entries.length; ii++) {\n      var entry = entries[ii];\n      node = node.update(ownerID, 0, undefined, entry[0], entry[1]);\n    }\n    return node;\n  }\n\n  function packNodes(ownerID, nodes, count, excluding) {\n    var bitmap = 0;\n    var packedII = 0;\n    var packedNodes = new Array(count);\n    for (var ii = 0, bit = 1, len = nodes.length; ii < len; ii++, bit <<= 1) {\n      var node = nodes[ii];\n      if (node !== undefined && ii !== excluding) {\n        bitmap |= bit;\n        packedNodes[packedII++] = node;\n      }\n    }\n    return new BitmapIndexedNode(ownerID, bitmap, packedNodes);\n  }\n\n  function expandNodes(ownerID, nodes, bitmap, including, node) {\n    var count = 0;\n    var expandedNodes = new Array(SIZE);\n    for (var ii = 0; bitmap !== 0; ii++, bitmap >>>= 1) {\n      expandedNodes[ii] = bitmap & 1 ? nodes[count++] : undefined;\n    }\n    expandedNodes[including] = node;\n    return new HashArrayMapNode(ownerID, count + 1, expandedNodes);\n  }\n\n  function mergeIntoMapWith(map, merger, iterables) {\n    var iters = [];\n    for (var ii = 0; ii < iterables.length; ii++) {\n      var value = iterables[ii];\n      var iter = KeyedIterable(value);\n      if (!isIterable(value)) {\n        iter = iter.map(function(v ) {return fromJS(v)});\n      }\n      iters.push(iter);\n    }\n    return mergeIntoCollectionWith(map, merger, iters);\n  }\n\n  function deepMerger(existing, value, key) {\n    return existing && existing.mergeDeep && isIterable(value) ?\n      existing.mergeDeep(value) :\n      is(existing, value) ? existing : value;\n  }\n\n  function deepMergerWith(merger) {\n    return function(existing, value, key)  {\n      if (existing && existing.mergeDeepWith && isIterable(value)) {\n        return existing.mergeDeepWith(merger, value);\n      }\n      var nextValue = merger(existing, value, key);\n      return is(existing, nextValue) ? existing : nextValue;\n    };\n  }\n\n  function mergeIntoCollectionWith(collection, merger, iters) {\n    iters = iters.filter(function(x ) {return x.size !== 0});\n    if (iters.length === 0) {\n      return collection;\n    }\n    if (collection.size === 0 && !collection.__ownerID && iters.length === 1) {\n      return collection.constructor(iters[0]);\n    }\n    return collection.withMutations(function(collection ) {\n      var mergeIntoMap = merger ?\n        function(value, key)  {\n          collection.update(key, NOT_SET, function(existing )\n            {return existing === NOT_SET ? value : merger(existing, value, key)}\n          );\n        } :\n        function(value, key)  {\n          collection.set(key, value);\n        }\n      for (var ii = 0; ii < iters.length; ii++) {\n        iters[ii].forEach(mergeIntoMap);\n      }\n    });\n  }\n\n  function updateInDeepMap(existing, keyPathIter, notSetValue, updater) {\n    var isNotSet = existing === NOT_SET;\n    var step = keyPathIter.next();\n    if (step.done) {\n      var existingValue = isNotSet ? notSetValue : existing;\n      var newValue = updater(existingValue);\n      return newValue === existingValue ? existing : newValue;\n    }\n    invariant(\n      isNotSet || (existing && existing.set),\n      'invalid keyPath'\n    );\n    var key = step.value;\n    var nextExisting = isNotSet ? NOT_SET : existing.get(key, NOT_SET);\n    var nextUpdated = updateInDeepMap(\n      nextExisting,\n      keyPathIter,\n      notSetValue,\n      updater\n    );\n    return nextUpdated === nextExisting ? existing :\n      nextUpdated === NOT_SET ? existing.remove(key) :\n      (isNotSet ? emptyMap() : existing).set(key, nextUpdated);\n  }\n\n  function popCount(x) {\n    x = x - ((x >> 1) & 0x55555555);\n    x = (x & 0x33333333) + ((x >> 2) & 0x33333333);\n    x = (x + (x >> 4)) & 0x0f0f0f0f;\n    x = x + (x >> 8);\n    x = x + (x >> 16);\n    return x & 0x7f;\n  }\n\n  function setIn(array, idx, val, canEdit) {\n    var newArray = canEdit ? array : arrCopy(array);\n    newArray[idx] = val;\n    return newArray;\n  }\n\n  function spliceIn(array, idx, val, canEdit) {\n    var newLen = array.length + 1;\n    if (canEdit && idx + 1 === newLen) {\n      array[idx] = val;\n      return array;\n    }\n    var newArray = new Array(newLen);\n    var after = 0;\n    for (var ii = 0; ii < newLen; ii++) {\n      if (ii === idx) {\n        newArray[ii] = val;\n        after = -1;\n      } else {\n        newArray[ii] = array[ii + after];\n      }\n    }\n    return newArray;\n  }\n\n  function spliceOut(array, idx, canEdit) {\n    var newLen = array.length - 1;\n    if (canEdit && idx === newLen) {\n      array.pop();\n      return array;\n    }\n    var newArray = new Array(newLen);\n    var after = 0;\n    for (var ii = 0; ii < newLen; ii++) {\n      if (ii === idx) {\n        after = 1;\n      }\n      newArray[ii] = array[ii + after];\n    }\n    return newArray;\n  }\n\n  var MAX_ARRAY_MAP_SIZE = SIZE / 4;\n  var MAX_BITMAP_INDEXED_SIZE = SIZE / 2;\n  var MIN_HASH_ARRAY_MAP_SIZE = SIZE / 4;\n\n  createClass(List, IndexedCollection);\n\n    // @pragma Construction\n\n    function List(value) {\n      var empty = emptyList();\n      if (value === null || value === undefined) {\n        return empty;\n      }\n      if (isList(value)) {\n        return value;\n      }\n      var iter = IndexedIterable(value);\n      var size = iter.size;\n      if (size === 0) {\n        return empty;\n      }\n      assertNotInfinite(size);\n      if (size > 0 && size < SIZE) {\n        return makeList(0, size, SHIFT, null, new VNode(iter.toArray()));\n      }\n      return empty.withMutations(function(list ) {\n        list.setSize(size);\n        iter.forEach(function(v, i)  {return list.set(i, v)});\n      });\n    }\n\n    List.of = function(/*...values*/) {\n      return this(arguments);\n    };\n\n    List.prototype.toString = function() {\n      return this.__toString('List [', ']');\n    };\n\n    // @pragma Access\n\n    List.prototype.get = function(index, notSetValue) {\n      index = wrapIndex(this, index);\n      if (index >= 0 && index < this.size) {\n        index += this._origin;\n        var node = listNodeFor(this, index);\n        return node && node.array[index & MASK];\n      }\n      return notSetValue;\n    };\n\n    // @pragma Modification\n\n    List.prototype.set = function(index, value) {\n      return updateList(this, index, value);\n    };\n\n    List.prototype.remove = function(index) {\n      return !this.has(index) ? this :\n        index === 0 ? this.shift() :\n        index === this.size - 1 ? this.pop() :\n        this.splice(index, 1);\n    };\n\n    List.prototype.insert = function(index, value) {\n      return this.splice(index, 0, value);\n    };\n\n    List.prototype.clear = function() {\n      if (this.size === 0) {\n        return this;\n      }\n      if (this.__ownerID) {\n        this.size = this._origin = this._capacity = 0;\n        this._level = SHIFT;\n        this._root = this._tail = null;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return emptyList();\n    };\n\n    List.prototype.push = function(/*...values*/) {\n      var values = arguments;\n      var oldSize = this.size;\n      return this.withMutations(function(list ) {\n        setListBounds(list, 0, oldSize + values.length);\n        for (var ii = 0; ii < values.length; ii++) {\n          list.set(oldSize + ii, values[ii]);\n        }\n      });\n    };\n\n    List.prototype.pop = function() {\n      return setListBounds(this, 0, -1);\n    };\n\n    List.prototype.unshift = function(/*...values*/) {\n      var values = arguments;\n      return this.withMutations(function(list ) {\n        setListBounds(list, -values.length);\n        for (var ii = 0; ii < values.length; ii++) {\n          list.set(ii, values[ii]);\n        }\n      });\n    };\n\n    List.prototype.shift = function() {\n      return setListBounds(this, 1);\n    };\n\n    // @pragma Composition\n\n    List.prototype.merge = function(/*...iters*/) {\n      return mergeIntoListWith(this, undefined, arguments);\n    };\n\n    List.prototype.mergeWith = function(merger) {var iters = SLICE$0.call(arguments, 1);\n      return mergeIntoListWith(this, merger, iters);\n    };\n\n    List.prototype.mergeDeep = function(/*...iters*/) {\n      return mergeIntoListWith(this, deepMerger, arguments);\n    };\n\n    List.prototype.mergeDeepWith = function(merger) {var iters = SLICE$0.call(arguments, 1);\n      return mergeIntoListWith(this, deepMergerWith(merger), iters);\n    };\n\n    List.prototype.setSize = function(size) {\n      return setListBounds(this, 0, size);\n    };\n\n    // @pragma Iteration\n\n    List.prototype.slice = function(begin, end) {\n      var size = this.size;\n      if (wholeSlice(begin, end, size)) {\n        return this;\n      }\n      return setListBounds(\n        this,\n        resolveBegin(begin, size),\n        resolveEnd(end, size)\n      );\n    };\n\n    List.prototype.__iterator = function(type, reverse) {\n      var index = 0;\n      var values = iterateList(this, reverse);\n      return new Iterator(function()  {\n        var value = values();\n        return value === DONE ?\n          iteratorDone() :\n          iteratorValue(type, index++, value);\n      });\n    };\n\n    List.prototype.__iterate = function(fn, reverse) {\n      var index = 0;\n      var values = iterateList(this, reverse);\n      var value;\n      while ((value = values()) !== DONE) {\n        if (fn(value, index++, this) === false) {\n          break;\n        }\n      }\n      return index;\n    };\n\n    List.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        return this;\n      }\n      return makeList(this._origin, this._capacity, this._level, this._root, this._tail, ownerID, this.__hash);\n    };\n\n\n  function isList(maybeList) {\n    return !!(maybeList && maybeList[IS_LIST_SENTINEL]);\n  }\n\n  List.isList = isList;\n\n  var IS_LIST_SENTINEL = '@@__IMMUTABLE_LIST__@@';\n\n  var ListPrototype = List.prototype;\n  ListPrototype[IS_LIST_SENTINEL] = true;\n  ListPrototype[DELETE] = ListPrototype.remove;\n  ListPrototype.setIn = MapPrototype.setIn;\n  ListPrototype.deleteIn =\n  ListPrototype.removeIn = MapPrototype.removeIn;\n  ListPrototype.update = MapPrototype.update;\n  ListPrototype.updateIn = MapPrototype.updateIn;\n  ListPrototype.mergeIn = MapPrototype.mergeIn;\n  ListPrototype.mergeDeepIn = MapPrototype.mergeDeepIn;\n  ListPrototype.withMutations = MapPrototype.withMutations;\n  ListPrototype.asMutable = MapPrototype.asMutable;\n  ListPrototype.asImmutable = MapPrototype.asImmutable;\n  ListPrototype.wasAltered = MapPrototype.wasAltered;\n\n\n\n    function VNode(array, ownerID) {\n      this.array = array;\n      this.ownerID = ownerID;\n    }\n\n    // TODO: seems like these methods are very similar\n\n    VNode.prototype.removeBefore = function(ownerID, level, index) {\n      if (index === level ? 1 << level : 0 || this.array.length === 0) {\n        return this;\n      }\n      var originIndex = (index >>> level) & MASK;\n      if (originIndex >= this.array.length) {\n        return new VNode([], ownerID);\n      }\n      var removingFirst = originIndex === 0;\n      var newChild;\n      if (level > 0) {\n        var oldChild = this.array[originIndex];\n        newChild = oldChild && oldChild.removeBefore(ownerID, level - SHIFT, index);\n        if (newChild === oldChild && removingFirst) {\n          return this;\n        }\n      }\n      if (removingFirst && !newChild) {\n        return this;\n      }\n      var editable = editableVNode(this, ownerID);\n      if (!removingFirst) {\n        for (var ii = 0; ii < originIndex; ii++) {\n          editable.array[ii] = undefined;\n        }\n      }\n      if (newChild) {\n        editable.array[originIndex] = newChild;\n      }\n      return editable;\n    };\n\n    VNode.prototype.removeAfter = function(ownerID, level, index) {\n      if (index === (level ? 1 << level : 0) || this.array.length === 0) {\n        return this;\n      }\n      var sizeIndex = ((index - 1) >>> level) & MASK;\n      if (sizeIndex >= this.array.length) {\n        return this;\n      }\n\n      var newChild;\n      if (level > 0) {\n        var oldChild = this.array[sizeIndex];\n        newChild = oldChild && oldChild.removeAfter(ownerID, level - SHIFT, index);\n        if (newChild === oldChild && sizeIndex === this.array.length - 1) {\n          return this;\n        }\n      }\n\n      var editable = editableVNode(this, ownerID);\n      editable.array.splice(sizeIndex + 1);\n      if (newChild) {\n        editable.array[sizeIndex] = newChild;\n      }\n      return editable;\n    };\n\n\n\n  var DONE = {};\n\n  function iterateList(list, reverse) {\n    var left = list._origin;\n    var right = list._capacity;\n    var tailPos = getTailOffset(right);\n    var tail = list._tail;\n\n    return iterateNodeOrLeaf(list._root, list._level, 0);\n\n    function iterateNodeOrLeaf(node, level, offset) {\n      return level === 0 ?\n        iterateLeaf(node, offset) :\n        iterateNode(node, level, offset);\n    }\n\n    function iterateLeaf(node, offset) {\n      var array = offset === tailPos ? tail && tail.array : node && node.array;\n      var from = offset > left ? 0 : left - offset;\n      var to = right - offset;\n      if (to > SIZE) {\n        to = SIZE;\n      }\n      return function()  {\n        if (from === to) {\n          return DONE;\n        }\n        var idx = reverse ? --to : from++;\n        return array && array[idx];\n      };\n    }\n\n    function iterateNode(node, level, offset) {\n      var values;\n      var array = node && node.array;\n      var from = offset > left ? 0 : (left - offset) >> level;\n      var to = ((right - offset) >> level) + 1;\n      if (to > SIZE) {\n        to = SIZE;\n      }\n      return function()  {\n        do {\n          if (values) {\n            var value = values();\n            if (value !== DONE) {\n              return value;\n            }\n            values = null;\n          }\n          if (from === to) {\n            return DONE;\n          }\n          var idx = reverse ? --to : from++;\n          values = iterateNodeOrLeaf(\n            array && array[idx], level - SHIFT, offset + (idx << level)\n          );\n        } while (true);\n      };\n    }\n  }\n\n  function makeList(origin, capacity, level, root, tail, ownerID, hash) {\n    var list = Object.create(ListPrototype);\n    list.size = capacity - origin;\n    list._origin = origin;\n    list._capacity = capacity;\n    list._level = level;\n    list._root = root;\n    list._tail = tail;\n    list.__ownerID = ownerID;\n    list.__hash = hash;\n    list.__altered = false;\n    return list;\n  }\n\n  var EMPTY_LIST;\n  function emptyList() {\n    return EMPTY_LIST || (EMPTY_LIST = makeList(0, 0, SHIFT));\n  }\n\n  function updateList(list, index, value) {\n    index = wrapIndex(list, index);\n\n    if (index !== index) {\n      return list;\n    }\n\n    if (index >= list.size || index < 0) {\n      return list.withMutations(function(list ) {\n        index < 0 ?\n          setListBounds(list, index).set(0, value) :\n          setListBounds(list, 0, index + 1).set(index, value)\n      });\n    }\n\n    index += list._origin;\n\n    var newTail = list._tail;\n    var newRoot = list._root;\n    var didAlter = MakeRef(DID_ALTER);\n    if (index >= getTailOffset(list._capacity)) {\n      newTail = updateVNode(newTail, list.__ownerID, 0, index, value, didAlter);\n    } else {\n      newRoot = updateVNode(newRoot, list.__ownerID, list._level, index, value, didAlter);\n    }\n\n    if (!didAlter.value) {\n      return list;\n    }\n\n    if (list.__ownerID) {\n      list._root = newRoot;\n      list._tail = newTail;\n      list.__hash = undefined;\n      list.__altered = true;\n      return list;\n    }\n    return makeList(list._origin, list._capacity, list._level, newRoot, newTail);\n  }\n\n  function updateVNode(node, ownerID, level, index, value, didAlter) {\n    var idx = (index >>> level) & MASK;\n    var nodeHas = node && idx < node.array.length;\n    if (!nodeHas && value === undefined) {\n      return node;\n    }\n\n    var newNode;\n\n    if (level > 0) {\n      var lowerNode = node && node.array[idx];\n      var newLowerNode = updateVNode(lowerNode, ownerID, level - SHIFT, index, value, didAlter);\n      if (newLowerNode === lowerNode) {\n        return node;\n      }\n      newNode = editableVNode(node, ownerID);\n      newNode.array[idx] = newLowerNode;\n      return newNode;\n    }\n\n    if (nodeHas && node.array[idx] === value) {\n      return node;\n    }\n\n    SetRef(didAlter);\n\n    newNode = editableVNode(node, ownerID);\n    if (value === undefined && idx === newNode.array.length - 1) {\n      newNode.array.pop();\n    } else {\n      newNode.array[idx] = value;\n    }\n    return newNode;\n  }\n\n  function editableVNode(node, ownerID) {\n    if (ownerID && node && ownerID === node.ownerID) {\n      return node;\n    }\n    return new VNode(node ? node.array.slice() : [], ownerID);\n  }\n\n  function listNodeFor(list, rawIndex) {\n    if (rawIndex >= getTailOffset(list._capacity)) {\n      return list._tail;\n    }\n    if (rawIndex < 1 << (list._level + SHIFT)) {\n      var node = list._root;\n      var level = list._level;\n      while (node && level > 0) {\n        node = node.array[(rawIndex >>> level) & MASK];\n        level -= SHIFT;\n      }\n      return node;\n    }\n  }\n\n  function setListBounds(list, begin, end) {\n    // Sanitize begin & end using this shorthand for ToInt32(argument)\n    // http://www.ecma-international.org/ecma-262/6.0/#sec-toint32\n    if (begin !== undefined) {\n      begin = begin | 0;\n    }\n    if (end !== undefined) {\n      end = end | 0;\n    }\n    var owner = list.__ownerID || new OwnerID();\n    var oldOrigin = list._origin;\n    var oldCapacity = list._capacity;\n    var newOrigin = oldOrigin + begin;\n    var newCapacity = end === undefined ? oldCapacity : end < 0 ? oldCapacity + end : oldOrigin + end;\n    if (newOrigin === oldOrigin && newCapacity === oldCapacity) {\n      return list;\n    }\n\n    // If it's going to end after it starts, it's empty.\n    if (newOrigin >= newCapacity) {\n      return list.clear();\n    }\n\n    var newLevel = list._level;\n    var newRoot = list._root;\n\n    // New origin might need creating a higher root.\n    var offsetShift = 0;\n    while (newOrigin + offsetShift < 0) {\n      newRoot = new VNode(newRoot && newRoot.array.length ? [undefined, newRoot] : [], owner);\n      newLevel += SHIFT;\n      offsetShift += 1 << newLevel;\n    }\n    if (offsetShift) {\n      newOrigin += offsetShift;\n      oldOrigin += offsetShift;\n      newCapacity += offsetShift;\n      oldCapacity += offsetShift;\n    }\n\n    var oldTailOffset = getTailOffset(oldCapacity);\n    var newTailOffset = getTailOffset(newCapacity);\n\n    // New size might need creating a higher root.\n    while (newTailOffset >= 1 << (newLevel + SHIFT)) {\n      newRoot = new VNode(newRoot && newRoot.array.length ? [newRoot] : [], owner);\n      newLevel += SHIFT;\n    }\n\n    // Locate or create the new tail.\n    var oldTail = list._tail;\n    var newTail = newTailOffset < oldTailOffset ?\n      listNodeFor(list, newCapacity - 1) :\n      newTailOffset > oldTailOffset ? new VNode([], owner) : oldTail;\n\n    // Merge Tail into tree.\n    if (oldTail && newTailOffset > oldTailOffset && newOrigin < oldCapacity && oldTail.array.length) {\n      newRoot = editableVNode(newRoot, owner);\n      var node = newRoot;\n      for (var level = newLevel; level > SHIFT; level -= SHIFT) {\n        var idx = (oldTailOffset >>> level) & MASK;\n        node = node.array[idx] = editableVNode(node.array[idx], owner);\n      }\n      node.array[(oldTailOffset >>> SHIFT) & MASK] = oldTail;\n    }\n\n    // If the size has been reduced, there's a chance the tail needs to be trimmed.\n    if (newCapacity < oldCapacity) {\n      newTail = newTail && newTail.removeAfter(owner, 0, newCapacity);\n    }\n\n    // If the new origin is within the tail, then we do not need a root.\n    if (newOrigin >= newTailOffset) {\n      newOrigin -= newTailOffset;\n      newCapacity -= newTailOffset;\n      newLevel = SHIFT;\n      newRoot = null;\n      newTail = newTail && newTail.removeBefore(owner, 0, newOrigin);\n\n    // Otherwise, if the root has been trimmed, garbage collect.\n    } else if (newOrigin > oldOrigin || newTailOffset < oldTailOffset) {\n      offsetShift = 0;\n\n      // Identify the new top root node of the subtree of the old root.\n      while (newRoot) {\n        var beginIndex = (newOrigin >>> newLevel) & MASK;\n        if (beginIndex !== (newTailOffset >>> newLevel) & MASK) {\n          break;\n        }\n        if (beginIndex) {\n          offsetShift += (1 << newLevel) * beginIndex;\n        }\n        newLevel -= SHIFT;\n        newRoot = newRoot.array[beginIndex];\n      }\n\n      // Trim the new sides of the new root.\n      if (newRoot && newOrigin > oldOrigin) {\n        newRoot = newRoot.removeBefore(owner, newLevel, newOrigin - offsetShift);\n      }\n      if (newRoot && newTailOffset < oldTailOffset) {\n        newRoot = newRoot.removeAfter(owner, newLevel, newTailOffset - offsetShift);\n      }\n      if (offsetShift) {\n        newOrigin -= offsetShift;\n        newCapacity -= offsetShift;\n      }\n    }\n\n    if (list.__ownerID) {\n      list.size = newCapacity - newOrigin;\n      list._origin = newOrigin;\n      list._capacity = newCapacity;\n      list._level = newLevel;\n      list._root = newRoot;\n      list._tail = newTail;\n      list.__hash = undefined;\n      list.__altered = true;\n      return list;\n    }\n    return makeList(newOrigin, newCapacity, newLevel, newRoot, newTail);\n  }\n\n  function mergeIntoListWith(list, merger, iterables) {\n    var iters = [];\n    var maxSize = 0;\n    for (var ii = 0; ii < iterables.length; ii++) {\n      var value = iterables[ii];\n      var iter = IndexedIterable(value);\n      if (iter.size > maxSize) {\n        maxSize = iter.size;\n      }\n      if (!isIterable(value)) {\n        iter = iter.map(function(v ) {return fromJS(v)});\n      }\n      iters.push(iter);\n    }\n    if (maxSize > list.size) {\n      list = list.setSize(maxSize);\n    }\n    return mergeIntoCollectionWith(list, merger, iters);\n  }\n\n  function getTailOffset(size) {\n    return size < SIZE ? 0 : (((size - 1) >>> SHIFT) << SHIFT);\n  }\n\n  createClass(OrderedMap, Map);\n\n    // @pragma Construction\n\n    function OrderedMap(value) {\n      return value === null || value === undefined ? emptyOrderedMap() :\n        isOrderedMap(value) ? value :\n        emptyOrderedMap().withMutations(function(map ) {\n          var iter = KeyedIterable(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function(v, k)  {return map.set(k, v)});\n        });\n    }\n\n    OrderedMap.of = function(/*...values*/) {\n      return this(arguments);\n    };\n\n    OrderedMap.prototype.toString = function() {\n      return this.__toString('OrderedMap {', '}');\n    };\n\n    // @pragma Access\n\n    OrderedMap.prototype.get = function(k, notSetValue) {\n      var index = this._map.get(k);\n      return index !== undefined ? this._list.get(index)[1] : notSetValue;\n    };\n\n    // @pragma Modification\n\n    OrderedMap.prototype.clear = function() {\n      if (this.size === 0) {\n        return this;\n      }\n      if (this.__ownerID) {\n        this.size = 0;\n        this._map.clear();\n        this._list.clear();\n        return this;\n      }\n      return emptyOrderedMap();\n    };\n\n    OrderedMap.prototype.set = function(k, v) {\n      return updateOrderedMap(this, k, v);\n    };\n\n    OrderedMap.prototype.remove = function(k) {\n      return updateOrderedMap(this, k, NOT_SET);\n    };\n\n    OrderedMap.prototype.wasAltered = function() {\n      return this._map.wasAltered() || this._list.wasAltered();\n    };\n\n    OrderedMap.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      return this._list.__iterate(\n        function(entry ) {return entry && fn(entry[1], entry[0], this$0)},\n        reverse\n      );\n    };\n\n    OrderedMap.prototype.__iterator = function(type, reverse) {\n      return this._list.fromEntrySeq().__iterator(type, reverse);\n    };\n\n    OrderedMap.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      var newMap = this._map.__ensureOwner(ownerID);\n      var newList = this._list.__ensureOwner(ownerID);\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        this._map = newMap;\n        this._list = newList;\n        return this;\n      }\n      return makeOrderedMap(newMap, newList, ownerID, this.__hash);\n    };\n\n\n  function isOrderedMap(maybeOrderedMap) {\n    return isMap(maybeOrderedMap) && isOrdered(maybeOrderedMap);\n  }\n\n  OrderedMap.isOrderedMap = isOrderedMap;\n\n  OrderedMap.prototype[IS_ORDERED_SENTINEL] = true;\n  OrderedMap.prototype[DELETE] = OrderedMap.prototype.remove;\n\n\n\n  function makeOrderedMap(map, list, ownerID, hash) {\n    var omap = Object.create(OrderedMap.prototype);\n    omap.size = map ? map.size : 0;\n    omap._map = map;\n    omap._list = list;\n    omap.__ownerID = ownerID;\n    omap.__hash = hash;\n    return omap;\n  }\n\n  var EMPTY_ORDERED_MAP;\n  function emptyOrderedMap() {\n    return EMPTY_ORDERED_MAP || (EMPTY_ORDERED_MAP = makeOrderedMap(emptyMap(), emptyList()));\n  }\n\n  function updateOrderedMap(omap, k, v) {\n    var map = omap._map;\n    var list = omap._list;\n    var i = map.get(k);\n    var has = i !== undefined;\n    var newMap;\n    var newList;\n    if (v === NOT_SET) { // removed\n      if (!has) {\n        return omap;\n      }\n      if (list.size >= SIZE && list.size >= map.size * 2) {\n        newList = list.filter(function(entry, idx)  {return entry !== undefined && i !== idx});\n        newMap = newList.toKeyedSeq().map(function(entry ) {return entry[0]}).flip().toMap();\n        if (omap.__ownerID) {\n          newMap.__ownerID = newList.__ownerID = omap.__ownerID;\n        }\n      } else {\n        newMap = map.remove(k);\n        newList = i === list.size - 1 ? list.pop() : list.set(i, undefined);\n      }\n    } else {\n      if (has) {\n        if (v === list.get(i)[1]) {\n          return omap;\n        }\n        newMap = map;\n        newList = list.set(i, [k, v]);\n      } else {\n        newMap = map.set(k, list.size);\n        newList = list.set(list.size, [k, v]);\n      }\n    }\n    if (omap.__ownerID) {\n      omap.size = newMap.size;\n      omap._map = newMap;\n      omap._list = newList;\n      omap.__hash = undefined;\n      return omap;\n    }\n    return makeOrderedMap(newMap, newList);\n  }\n\n  createClass(ToKeyedSequence, KeyedSeq);\n    function ToKeyedSequence(indexed, useKeys) {\n      this._iter = indexed;\n      this._useKeys = useKeys;\n      this.size = indexed.size;\n    }\n\n    ToKeyedSequence.prototype.get = function(key, notSetValue) {\n      return this._iter.get(key, notSetValue);\n    };\n\n    ToKeyedSequence.prototype.has = function(key) {\n      return this._iter.has(key);\n    };\n\n    ToKeyedSequence.prototype.valueSeq = function() {\n      return this._iter.valueSeq();\n    };\n\n    ToKeyedSequence.prototype.reverse = function() {var this$0 = this;\n      var reversedSequence = reverseFactory(this, true);\n      if (!this._useKeys) {\n        reversedSequence.valueSeq = function()  {return this$0._iter.toSeq().reverse()};\n      }\n      return reversedSequence;\n    };\n\n    ToKeyedSequence.prototype.map = function(mapper, context) {var this$0 = this;\n      var mappedSequence = mapFactory(this, mapper, context);\n      if (!this._useKeys) {\n        mappedSequence.valueSeq = function()  {return this$0._iter.toSeq().map(mapper, context)};\n      }\n      return mappedSequence;\n    };\n\n    ToKeyedSequence.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      var ii;\n      return this._iter.__iterate(\n        this._useKeys ?\n          function(v, k)  {return fn(v, k, this$0)} :\n          ((ii = reverse ? resolveSize(this) : 0),\n            function(v ) {return fn(v, reverse ? --ii : ii++, this$0)}),\n        reverse\n      );\n    };\n\n    ToKeyedSequence.prototype.__iterator = function(type, reverse) {\n      if (this._useKeys) {\n        return this._iter.__iterator(type, reverse);\n      }\n      var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n      var ii = reverse ? resolveSize(this) : 0;\n      return new Iterator(function()  {\n        var step = iterator.next();\n        return step.done ? step :\n          iteratorValue(type, reverse ? --ii : ii++, step.value, step);\n      });\n    };\n\n  ToKeyedSequence.prototype[IS_ORDERED_SENTINEL] = true;\n\n\n  createClass(ToIndexedSequence, IndexedSeq);\n    function ToIndexedSequence(iter) {\n      this._iter = iter;\n      this.size = iter.size;\n    }\n\n    ToIndexedSequence.prototype.includes = function(value) {\n      return this._iter.includes(value);\n    };\n\n    ToIndexedSequence.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      var iterations = 0;\n      return this._iter.__iterate(function(v ) {return fn(v, iterations++, this$0)}, reverse);\n    };\n\n    ToIndexedSequence.prototype.__iterator = function(type, reverse) {\n      var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n      var iterations = 0;\n      return new Iterator(function()  {\n        var step = iterator.next();\n        return step.done ? step :\n          iteratorValue(type, iterations++, step.value, step)\n      });\n    };\n\n\n\n  createClass(ToSetSequence, SetSeq);\n    function ToSetSequence(iter) {\n      this._iter = iter;\n      this.size = iter.size;\n    }\n\n    ToSetSequence.prototype.has = function(key) {\n      return this._iter.includes(key);\n    };\n\n    ToSetSequence.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      return this._iter.__iterate(function(v ) {return fn(v, v, this$0)}, reverse);\n    };\n\n    ToSetSequence.prototype.__iterator = function(type, reverse) {\n      var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n      return new Iterator(function()  {\n        var step = iterator.next();\n        return step.done ? step :\n          iteratorValue(type, step.value, step.value, step);\n      });\n    };\n\n\n\n  createClass(FromEntriesSequence, KeyedSeq);\n    function FromEntriesSequence(entries) {\n      this._iter = entries;\n      this.size = entries.size;\n    }\n\n    FromEntriesSequence.prototype.entrySeq = function() {\n      return this._iter.toSeq();\n    };\n\n    FromEntriesSequence.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      return this._iter.__iterate(function(entry ) {\n        // Check if entry exists first so array access doesn't throw for holes\n        // in the parent iteration.\n        if (entry) {\n          validateEntry(entry);\n          var indexedIterable = isIterable(entry);\n          return fn(\n            indexedIterable ? entry.get(1) : entry[1],\n            indexedIterable ? entry.get(0) : entry[0],\n            this$0\n          );\n        }\n      }, reverse);\n    };\n\n    FromEntriesSequence.prototype.__iterator = function(type, reverse) {\n      var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n      return new Iterator(function()  {\n        while (true) {\n          var step = iterator.next();\n          if (step.done) {\n            return step;\n          }\n          var entry = step.value;\n          // Check if entry exists first so array access doesn't throw for holes\n          // in the parent iteration.\n          if (entry) {\n            validateEntry(entry);\n            var indexedIterable = isIterable(entry);\n            return iteratorValue(\n              type,\n              indexedIterable ? entry.get(0) : entry[0],\n              indexedIterable ? entry.get(1) : entry[1],\n              step\n            );\n          }\n        }\n      });\n    };\n\n\n  ToIndexedSequence.prototype.cacheResult =\n  ToKeyedSequence.prototype.cacheResult =\n  ToSetSequence.prototype.cacheResult =\n  FromEntriesSequence.prototype.cacheResult =\n    cacheResultThrough;\n\n\n  function flipFactory(iterable) {\n    var flipSequence = makeSequence(iterable);\n    flipSequence._iter = iterable;\n    flipSequence.size = iterable.size;\n    flipSequence.flip = function()  {return iterable};\n    flipSequence.reverse = function () {\n      var reversedSequence = iterable.reverse.apply(this); // super.reverse()\n      reversedSequence.flip = function()  {return iterable.reverse()};\n      return reversedSequence;\n    };\n    flipSequence.has = function(key ) {return iterable.includes(key)};\n    flipSequence.includes = function(key ) {return iterable.has(key)};\n    flipSequence.cacheResult = cacheResultThrough;\n    flipSequence.__iterateUncached = function (fn, reverse) {var this$0 = this;\n      return iterable.__iterate(function(v, k)  {return fn(k, v, this$0) !== false}, reverse);\n    }\n    flipSequence.__iteratorUncached = function(type, reverse) {\n      if (type === ITERATE_ENTRIES) {\n        var iterator = iterable.__iterator(type, reverse);\n        return new Iterator(function()  {\n          var step = iterator.next();\n          if (!step.done) {\n            var k = step.value[0];\n            step.value[0] = step.value[1];\n            step.value[1] = k;\n          }\n          return step;\n        });\n      }\n      return iterable.__iterator(\n        type === ITERATE_VALUES ? ITERATE_KEYS : ITERATE_VALUES,\n        reverse\n      );\n    }\n    return flipSequence;\n  }\n\n\n  function mapFactory(iterable, mapper, context) {\n    var mappedSequence = makeSequence(iterable);\n    mappedSequence.size = iterable.size;\n    mappedSequence.has = function(key ) {return iterable.has(key)};\n    mappedSequence.get = function(key, notSetValue)  {\n      var v = iterable.get(key, NOT_SET);\n      return v === NOT_SET ?\n        notSetValue :\n        mapper.call(context, v, key, iterable);\n    };\n    mappedSequence.__iterateUncached = function (fn, reverse) {var this$0 = this;\n      return iterable.__iterate(\n        function(v, k, c)  {return fn(mapper.call(context, v, k, c), k, this$0) !== false},\n        reverse\n      );\n    }\n    mappedSequence.__iteratorUncached = function (type, reverse) {\n      var iterator = iterable.__iterator(ITERATE_ENTRIES, reverse);\n      return new Iterator(function()  {\n        var step = iterator.next();\n        if (step.done) {\n          return step;\n        }\n        var entry = step.value;\n        var key = entry[0];\n        return iteratorValue(\n          type,\n          key,\n          mapper.call(context, entry[1], key, iterable),\n          step\n        );\n      });\n    }\n    return mappedSequence;\n  }\n\n\n  function reverseFactory(iterable, useKeys) {\n    var reversedSequence = makeSequence(iterable);\n    reversedSequence._iter = iterable;\n    reversedSequence.size = iterable.size;\n    reversedSequence.reverse = function()  {return iterable};\n    if (iterable.flip) {\n      reversedSequence.flip = function () {\n        var flipSequence = flipFactory(iterable);\n        flipSequence.reverse = function()  {return iterable.flip()};\n        return flipSequence;\n      };\n    }\n    reversedSequence.get = function(key, notSetValue) \n      {return iterable.get(useKeys ? key : -1 - key, notSetValue)};\n    reversedSequence.has = function(key )\n      {return iterable.has(useKeys ? key : -1 - key)};\n    reversedSequence.includes = function(value ) {return iterable.includes(value)};\n    reversedSequence.cacheResult = cacheResultThrough;\n    reversedSequence.__iterate = function (fn, reverse) {var this$0 = this;\n      return iterable.__iterate(function(v, k)  {return fn(v, k, this$0)}, !reverse);\n    };\n    reversedSequence.__iterator =\n      function(type, reverse)  {return iterable.__iterator(type, !reverse)};\n    return reversedSequence;\n  }\n\n\n  function filterFactory(iterable, predicate, context, useKeys) {\n    var filterSequence = makeSequence(iterable);\n    if (useKeys) {\n      filterSequence.has = function(key ) {\n        var v = iterable.get(key, NOT_SET);\n        return v !== NOT_SET && !!predicate.call(context, v, key, iterable);\n      };\n      filterSequence.get = function(key, notSetValue)  {\n        var v = iterable.get(key, NOT_SET);\n        return v !== NOT_SET && predicate.call(context, v, key, iterable) ?\n          v : notSetValue;\n      };\n    }\n    filterSequence.__iterateUncached = function (fn, reverse) {var this$0 = this;\n      var iterations = 0;\n      iterable.__iterate(function(v, k, c)  {\n        if (predicate.call(context, v, k, c)) {\n          iterations++;\n          return fn(v, useKeys ? k : iterations - 1, this$0);\n        }\n      }, reverse);\n      return iterations;\n    };\n    filterSequence.__iteratorUncached = function (type, reverse) {\n      var iterator = iterable.__iterator(ITERATE_ENTRIES, reverse);\n      var iterations = 0;\n      return new Iterator(function()  {\n        while (true) {\n          var step = iterator.next();\n          if (step.done) {\n            return step;\n          }\n          var entry = step.value;\n          var key = entry[0];\n          var value = entry[1];\n          if (predicate.call(context, value, key, iterable)) {\n            return iteratorValue(type, useKeys ? key : iterations++, value, step);\n          }\n        }\n      });\n    }\n    return filterSequence;\n  }\n\n\n  function countByFactory(iterable, grouper, context) {\n    var groups = Map().asMutable();\n    iterable.__iterate(function(v, k)  {\n      groups.update(\n        grouper.call(context, v, k, iterable),\n        0,\n        function(a ) {return a + 1}\n      );\n    });\n    return groups.asImmutable();\n  }\n\n\n  function groupByFactory(iterable, grouper, context) {\n    var isKeyedIter = isKeyed(iterable);\n    var groups = (isOrdered(iterable) ? OrderedMap() : Map()).asMutable();\n    iterable.__iterate(function(v, k)  {\n      groups.update(\n        grouper.call(context, v, k, iterable),\n        function(a ) {return (a = a || [], a.push(isKeyedIter ? [k, v] : v), a)}\n      );\n    });\n    var coerce = iterableClass(iterable);\n    return groups.map(function(arr ) {return reify(iterable, coerce(arr))});\n  }\n\n\n  function sliceFactory(iterable, begin, end, useKeys) {\n    var originalSize = iterable.size;\n\n    // Sanitize begin & end using this shorthand for ToInt32(argument)\n    // http://www.ecma-international.org/ecma-262/6.0/#sec-toint32\n    if (begin !== undefined) {\n      begin = begin | 0;\n    }\n    if (end !== undefined) {\n      if (end === Infinity) {\n        end = originalSize;\n      } else {\n        end = end | 0;\n      }\n    }\n\n    if (wholeSlice(begin, end, originalSize)) {\n      return iterable;\n    }\n\n    var resolvedBegin = resolveBegin(begin, originalSize);\n    var resolvedEnd = resolveEnd(end, originalSize);\n\n    // begin or end will be NaN if they were provided as negative numbers and\n    // this iterable's size is unknown. In that case, cache first so there is\n    // a known size and these do not resolve to NaN.\n    if (resolvedBegin !== resolvedBegin || resolvedEnd !== resolvedEnd) {\n      return sliceFactory(iterable.toSeq().cacheResult(), begin, end, useKeys);\n    }\n\n    // Note: resolvedEnd is undefined when the original sequence's length is\n    // unknown and this slice did not supply an end and should contain all\n    // elements after resolvedBegin.\n    // In that case, resolvedSize will be NaN and sliceSize will remain undefined.\n    var resolvedSize = resolvedEnd - resolvedBegin;\n    var sliceSize;\n    if (resolvedSize === resolvedSize) {\n      sliceSize = resolvedSize < 0 ? 0 : resolvedSize;\n    }\n\n    var sliceSeq = makeSequence(iterable);\n\n    // If iterable.size is undefined, the size of the realized sliceSeq is\n    // unknown at this point unless the number of items to slice is 0\n    sliceSeq.size = sliceSize === 0 ? sliceSize : iterable.size && sliceSize || undefined;\n\n    if (!useKeys && isSeq(iterable) && sliceSize >= 0) {\n      sliceSeq.get = function (index, notSetValue) {\n        index = wrapIndex(this, index);\n        return index >= 0 && index < sliceSize ?\n          iterable.get(index + resolvedBegin, notSetValue) :\n          notSetValue;\n      }\n    }\n\n    sliceSeq.__iterateUncached = function(fn, reverse) {var this$0 = this;\n      if (sliceSize === 0) {\n        return 0;\n      }\n      if (reverse) {\n        return this.cacheResult().__iterate(fn, reverse);\n      }\n      var skipped = 0;\n      var isSkipping = true;\n      var iterations = 0;\n      iterable.__iterate(function(v, k)  {\n        if (!(isSkipping && (isSkipping = skipped++ < resolvedBegin))) {\n          iterations++;\n          return fn(v, useKeys ? k : iterations - 1, this$0) !== false &&\n                 iterations !== sliceSize;\n        }\n      });\n      return iterations;\n    };\n\n    sliceSeq.__iteratorUncached = function(type, reverse) {\n      if (sliceSize !== 0 && reverse) {\n        return this.cacheResult().__iterator(type, reverse);\n      }\n      // Don't bother instantiating parent iterator if taking 0.\n      var iterator = sliceSize !== 0 && iterable.__iterator(type, reverse);\n      var skipped = 0;\n      var iterations = 0;\n      return new Iterator(function()  {\n        while (skipped++ < resolvedBegin) {\n          iterator.next();\n        }\n        if (++iterations > sliceSize) {\n          return iteratorDone();\n        }\n        var step = iterator.next();\n        if (useKeys || type === ITERATE_VALUES) {\n          return step;\n        } else if (type === ITERATE_KEYS) {\n          return iteratorValue(type, iterations - 1, undefined, step);\n        } else {\n          return iteratorValue(type, iterations - 1, step.value[1], step);\n        }\n      });\n    }\n\n    return sliceSeq;\n  }\n\n\n  function takeWhileFactory(iterable, predicate, context) {\n    var takeSequence = makeSequence(iterable);\n    takeSequence.__iterateUncached = function(fn, reverse) {var this$0 = this;\n      if (reverse) {\n        return this.cacheResult().__iterate(fn, reverse);\n      }\n      var iterations = 0;\n      iterable.__iterate(function(v, k, c) \n        {return predicate.call(context, v, k, c) && ++iterations && fn(v, k, this$0)}\n      );\n      return iterations;\n    };\n    takeSequence.__iteratorUncached = function(type, reverse) {var this$0 = this;\n      if (reverse) {\n        return this.cacheResult().__iterator(type, reverse);\n      }\n      var iterator = iterable.__iterator(ITERATE_ENTRIES, reverse);\n      var iterating = true;\n      return new Iterator(function()  {\n        if (!iterating) {\n          return iteratorDone();\n        }\n        var step = iterator.next();\n        if (step.done) {\n          return step;\n        }\n        var entry = step.value;\n        var k = entry[0];\n        var v = entry[1];\n        if (!predicate.call(context, v, k, this$0)) {\n          iterating = false;\n          return iteratorDone();\n        }\n        return type === ITERATE_ENTRIES ? step :\n          iteratorValue(type, k, v, step);\n      });\n    };\n    return takeSequence;\n  }\n\n\n  function skipWhileFactory(iterable, predicate, context, useKeys) {\n    var skipSequence = makeSequence(iterable);\n    skipSequence.__iterateUncached = function (fn, reverse) {var this$0 = this;\n      if (reverse) {\n        return this.cacheResult().__iterate(fn, reverse);\n      }\n      var isSkipping = true;\n      var iterations = 0;\n      iterable.__iterate(function(v, k, c)  {\n        if (!(isSkipping && (isSkipping = predicate.call(context, v, k, c)))) {\n          iterations++;\n          return fn(v, useKeys ? k : iterations - 1, this$0);\n        }\n      });\n      return iterations;\n    };\n    skipSequence.__iteratorUncached = function(type, reverse) {var this$0 = this;\n      if (reverse) {\n        return this.cacheResult().__iterator(type, reverse);\n      }\n      var iterator = iterable.__iterator(ITERATE_ENTRIES, reverse);\n      var skipping = true;\n      var iterations = 0;\n      return new Iterator(function()  {\n        var step, k, v;\n        do {\n          step = iterator.next();\n          if (step.done) {\n            if (useKeys || type === ITERATE_VALUES) {\n              return step;\n            } else if (type === ITERATE_KEYS) {\n              return iteratorValue(type, iterations++, undefined, step);\n            } else {\n              return iteratorValue(type, iterations++, step.value[1], step);\n            }\n          }\n          var entry = step.value;\n          k = entry[0];\n          v = entry[1];\n          skipping && (skipping = predicate.call(context, v, k, this$0));\n        } while (skipping);\n        return type === ITERATE_ENTRIES ? step :\n          iteratorValue(type, k, v, step);\n      });\n    };\n    return skipSequence;\n  }\n\n\n  function concatFactory(iterable, values) {\n    var isKeyedIterable = isKeyed(iterable);\n    var iters = [iterable].concat(values).map(function(v ) {\n      if (!isIterable(v)) {\n        v = isKeyedIterable ?\n          keyedSeqFromValue(v) :\n          indexedSeqFromValue(Array.isArray(v) ? v : [v]);\n      } else if (isKeyedIterable) {\n        v = KeyedIterable(v);\n      }\n      return v;\n    }).filter(function(v ) {return v.size !== 0});\n\n    if (iters.length === 0) {\n      return iterable;\n    }\n\n    if (iters.length === 1) {\n      var singleton = iters[0];\n      if (singleton === iterable ||\n          isKeyedIterable && isKeyed(singleton) ||\n          isIndexed(iterable) && isIndexed(singleton)) {\n        return singleton;\n      }\n    }\n\n    var concatSeq = new ArraySeq(iters);\n    if (isKeyedIterable) {\n      concatSeq = concatSeq.toKeyedSeq();\n    } else if (!isIndexed(iterable)) {\n      concatSeq = concatSeq.toSetSeq();\n    }\n    concatSeq = concatSeq.flatten(true);\n    concatSeq.size = iters.reduce(\n      function(sum, seq)  {\n        if (sum !== undefined) {\n          var size = seq.size;\n          if (size !== undefined) {\n            return sum + size;\n          }\n        }\n      },\n      0\n    );\n    return concatSeq;\n  }\n\n\n  function flattenFactory(iterable, depth, useKeys) {\n    var flatSequence = makeSequence(iterable);\n    flatSequence.__iterateUncached = function(fn, reverse) {\n      var iterations = 0;\n      var stopped = false;\n      function flatDeep(iter, currentDepth) {var this$0 = this;\n        iter.__iterate(function(v, k)  {\n          if ((!depth || currentDepth < depth) && isIterable(v)) {\n            flatDeep(v, currentDepth + 1);\n          } else if (fn(v, useKeys ? k : iterations++, this$0) === false) {\n            stopped = true;\n          }\n          return !stopped;\n        }, reverse);\n      }\n      flatDeep(iterable, 0);\n      return iterations;\n    }\n    flatSequence.__iteratorUncached = function(type, reverse) {\n      var iterator = iterable.__iterator(type, reverse);\n      var stack = [];\n      var iterations = 0;\n      return new Iterator(function()  {\n        while (iterator) {\n          var step = iterator.next();\n          if (step.done !== false) {\n            iterator = stack.pop();\n            continue;\n          }\n          var v = step.value;\n          if (type === ITERATE_ENTRIES) {\n            v = v[1];\n          }\n          if ((!depth || stack.length < depth) && isIterable(v)) {\n            stack.push(iterator);\n            iterator = v.__iterator(type, reverse);\n          } else {\n            return useKeys ? step : iteratorValue(type, iterations++, v, step);\n          }\n        }\n        return iteratorDone();\n      });\n    }\n    return flatSequence;\n  }\n\n\n  function flatMapFactory(iterable, mapper, context) {\n    var coerce = iterableClass(iterable);\n    return iterable.toSeq().map(\n      function(v, k)  {return coerce(mapper.call(context, v, k, iterable))}\n    ).flatten(true);\n  }\n\n\n  function interposeFactory(iterable, separator) {\n    var interposedSequence = makeSequence(iterable);\n    interposedSequence.size = iterable.size && iterable.size * 2 -1;\n    interposedSequence.__iterateUncached = function(fn, reverse) {var this$0 = this;\n      var iterations = 0;\n      iterable.__iterate(function(v, k) \n        {return (!iterations || fn(separator, iterations++, this$0) !== false) &&\n        fn(v, iterations++, this$0) !== false},\n        reverse\n      );\n      return iterations;\n    };\n    interposedSequence.__iteratorUncached = function(type, reverse) {\n      var iterator = iterable.__iterator(ITERATE_VALUES, reverse);\n      var iterations = 0;\n      var step;\n      return new Iterator(function()  {\n        if (!step || iterations % 2) {\n          step = iterator.next();\n          if (step.done) {\n            return step;\n          }\n        }\n        return iterations % 2 ?\n          iteratorValue(type, iterations++, separator) :\n          iteratorValue(type, iterations++, step.value, step);\n      });\n    };\n    return interposedSequence;\n  }\n\n\n  function sortFactory(iterable, comparator, mapper) {\n    if (!comparator) {\n      comparator = defaultComparator;\n    }\n    var isKeyedIterable = isKeyed(iterable);\n    var index = 0;\n    var entries = iterable.toSeq().map(\n      function(v, k)  {return [k, v, index++, mapper ? mapper(v, k, iterable) : v]}\n    ).toArray();\n    entries.sort(function(a, b)  {return comparator(a[3], b[3]) || a[2] - b[2]}).forEach(\n      isKeyedIterable ?\n      function(v, i)  { entries[i].length = 2; } :\n      function(v, i)  { entries[i] = v[1]; }\n    );\n    return isKeyedIterable ? KeyedSeq(entries) :\n      isIndexed(iterable) ? IndexedSeq(entries) :\n      SetSeq(entries);\n  }\n\n\n  function maxFactory(iterable, comparator, mapper) {\n    if (!comparator) {\n      comparator = defaultComparator;\n    }\n    if (mapper) {\n      var entry = iterable.toSeq()\n        .map(function(v, k)  {return [v, mapper(v, k, iterable)]})\n        .reduce(function(a, b)  {return maxCompare(comparator, a[1], b[1]) ? b : a});\n      return entry && entry[0];\n    } else {\n      return iterable.reduce(function(a, b)  {return maxCompare(comparator, a, b) ? b : a});\n    }\n  }\n\n  function maxCompare(comparator, a, b) {\n    var comp = comparator(b, a);\n    // b is considered the new max if the comparator declares them equal, but\n    // they are not equal and b is in fact a nullish value.\n    return (comp === 0 && b !== a && (b === undefined || b === null || b !== b)) || comp > 0;\n  }\n\n\n  function zipWithFactory(keyIter, zipper, iters) {\n    var zipSequence = makeSequence(keyIter);\n    zipSequence.size = new ArraySeq(iters).map(function(i ) {return i.size}).min();\n    // Note: this a generic base implementation of __iterate in terms of\n    // __iterator which may be more generically useful in the future.\n    zipSequence.__iterate = function(fn, reverse) {\n      /* generic:\n      var iterator = this.__iterator(ITERATE_ENTRIES, reverse);\n      var step;\n      var iterations = 0;\n      while (!(step = iterator.next()).done) {\n        iterations++;\n        if (fn(step.value[1], step.value[0], this) === false) {\n          break;\n        }\n      }\n      return iterations;\n      */\n      // indexed:\n      var iterator = this.__iterator(ITERATE_VALUES, reverse);\n      var step;\n      var iterations = 0;\n      while (!(step = iterator.next()).done) {\n        if (fn(step.value, iterations++, this) === false) {\n          break;\n        }\n      }\n      return iterations;\n    };\n    zipSequence.__iteratorUncached = function(type, reverse) {\n      var iterators = iters.map(function(i )\n        {return (i = Iterable(i), getIterator(reverse ? i.reverse() : i))}\n      );\n      var iterations = 0;\n      var isDone = false;\n      return new Iterator(function()  {\n        var steps;\n        if (!isDone) {\n          steps = iterators.map(function(i ) {return i.next()});\n          isDone = steps.some(function(s ) {return s.done});\n        }\n        if (isDone) {\n          return iteratorDone();\n        }\n        return iteratorValue(\n          type,\n          iterations++,\n          zipper.apply(null, steps.map(function(s ) {return s.value}))\n        );\n      });\n    };\n    return zipSequence\n  }\n\n\n  // #pragma Helper Functions\n\n  function reify(iter, seq) {\n    return isSeq(iter) ? seq : iter.constructor(seq);\n  }\n\n  function validateEntry(entry) {\n    if (entry !== Object(entry)) {\n      throw new TypeError('Expected [K, V] tuple: ' + entry);\n    }\n  }\n\n  function resolveSize(iter) {\n    assertNotInfinite(iter.size);\n    return ensureSize(iter);\n  }\n\n  function iterableClass(iterable) {\n    return isKeyed(iterable) ? KeyedIterable :\n      isIndexed(iterable) ? IndexedIterable :\n      SetIterable;\n  }\n\n  function makeSequence(iterable) {\n    return Object.create(\n      (\n        isKeyed(iterable) ? KeyedSeq :\n        isIndexed(iterable) ? IndexedSeq :\n        SetSeq\n      ).prototype\n    );\n  }\n\n  function cacheResultThrough() {\n    if (this._iter.cacheResult) {\n      this._iter.cacheResult();\n      this.size = this._iter.size;\n      return this;\n    } else {\n      return Seq.prototype.cacheResult.call(this);\n    }\n  }\n\n  function defaultComparator(a, b) {\n    return a > b ? 1 : a < b ? -1 : 0;\n  }\n\n  function forceIterator(keyPath) {\n    var iter = getIterator(keyPath);\n    if (!iter) {\n      // Array might not be iterable in this environment, so we need a fallback\n      // to our wrapped type.\n      if (!isArrayLike(keyPath)) {\n        throw new TypeError('Expected iterable or array-like: ' + keyPath);\n      }\n      iter = getIterator(Iterable(keyPath));\n    }\n    return iter;\n  }\n\n  createClass(Record, KeyedCollection);\n\n    function Record(defaultValues, name) {\n      var hasInitialized;\n\n      var RecordType = function Record(values) {\n        if (values instanceof RecordType) {\n          return values;\n        }\n        if (!(this instanceof RecordType)) {\n          return new RecordType(values);\n        }\n        if (!hasInitialized) {\n          hasInitialized = true;\n          var keys = Object.keys(defaultValues);\n          setProps(RecordTypePrototype, keys);\n          RecordTypePrototype.size = keys.length;\n          RecordTypePrototype._name = name;\n          RecordTypePrototype._keys = keys;\n          RecordTypePrototype._defaultValues = defaultValues;\n        }\n        this._map = Map(values);\n      };\n\n      var RecordTypePrototype = RecordType.prototype = Object.create(RecordPrototype);\n      RecordTypePrototype.constructor = RecordType;\n\n      return RecordType;\n    }\n\n    Record.prototype.toString = function() {\n      return this.__toString(recordName(this) + ' {', '}');\n    };\n\n    // @pragma Access\n\n    Record.prototype.has = function(k) {\n      return this._defaultValues.hasOwnProperty(k);\n    };\n\n    Record.prototype.get = function(k, notSetValue) {\n      if (!this.has(k)) {\n        return notSetValue;\n      }\n      var defaultVal = this._defaultValues[k];\n      return this._map ? this._map.get(k, defaultVal) : defaultVal;\n    };\n\n    // @pragma Modification\n\n    Record.prototype.clear = function() {\n      if (this.__ownerID) {\n        this._map && this._map.clear();\n        return this;\n      }\n      var RecordType = this.constructor;\n      return RecordType._empty || (RecordType._empty = makeRecord(this, emptyMap()));\n    };\n\n    Record.prototype.set = function(k, v) {\n      if (!this.has(k)) {\n        throw new Error('Cannot set unknown key \"' + k + '\" on ' + recordName(this));\n      }\n      if (this._map && !this._map.has(k)) {\n        var defaultVal = this._defaultValues[k];\n        if (v === defaultVal) {\n          return this;\n        }\n      }\n      var newMap = this._map && this._map.set(k, v);\n      if (this.__ownerID || newMap === this._map) {\n        return this;\n      }\n      return makeRecord(this, newMap);\n    };\n\n    Record.prototype.remove = function(k) {\n      if (!this.has(k)) {\n        return this;\n      }\n      var newMap = this._map && this._map.remove(k);\n      if (this.__ownerID || newMap === this._map) {\n        return this;\n      }\n      return makeRecord(this, newMap);\n    };\n\n    Record.prototype.wasAltered = function() {\n      return this._map.wasAltered();\n    };\n\n    Record.prototype.__iterator = function(type, reverse) {var this$0 = this;\n      return KeyedIterable(this._defaultValues).map(function(_, k)  {return this$0.get(k)}).__iterator(type, reverse);\n    };\n\n    Record.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      return KeyedIterable(this._defaultValues).map(function(_, k)  {return this$0.get(k)}).__iterate(fn, reverse);\n    };\n\n    Record.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      var newMap = this._map && this._map.__ensureOwner(ownerID);\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        this._map = newMap;\n        return this;\n      }\n      return makeRecord(this, newMap, ownerID);\n    };\n\n\n  var RecordPrototype = Record.prototype;\n  RecordPrototype[DELETE] = RecordPrototype.remove;\n  RecordPrototype.deleteIn =\n  RecordPrototype.removeIn = MapPrototype.removeIn;\n  RecordPrototype.merge = MapPrototype.merge;\n  RecordPrototype.mergeWith = MapPrototype.mergeWith;\n  RecordPrototype.mergeIn = MapPrototype.mergeIn;\n  RecordPrototype.mergeDeep = MapPrototype.mergeDeep;\n  RecordPrototype.mergeDeepWith = MapPrototype.mergeDeepWith;\n  RecordPrototype.mergeDeepIn = MapPrototype.mergeDeepIn;\n  RecordPrototype.setIn = MapPrototype.setIn;\n  RecordPrototype.update = MapPrototype.update;\n  RecordPrototype.updateIn = MapPrototype.updateIn;\n  RecordPrototype.withMutations = MapPrototype.withMutations;\n  RecordPrototype.asMutable = MapPrototype.asMutable;\n  RecordPrototype.asImmutable = MapPrototype.asImmutable;\n\n\n  function makeRecord(likeRecord, map, ownerID) {\n    var record = Object.create(Object.getPrototypeOf(likeRecord));\n    record._map = map;\n    record.__ownerID = ownerID;\n    return record;\n  }\n\n  function recordName(record) {\n    return record._name || record.constructor.name || 'Record';\n  }\n\n  function setProps(prototype, names) {\n    try {\n      names.forEach(setProp.bind(undefined, prototype));\n    } catch (error) {\n      // Object.defineProperty failed. Probably IE8.\n    }\n  }\n\n  function setProp(prototype, name) {\n    Object.defineProperty(prototype, name, {\n      get: function() {\n        return this.get(name);\n      },\n      set: function(value) {\n        invariant(this.__ownerID, 'Cannot set on an immutable record.');\n        this.set(name, value);\n      }\n    });\n  }\n\n  createClass(Set, SetCollection);\n\n    // @pragma Construction\n\n    function Set(value) {\n      return value === null || value === undefined ? emptySet() :\n        isSet(value) && !isOrdered(value) ? value :\n        emptySet().withMutations(function(set ) {\n          var iter = SetIterable(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function(v ) {return set.add(v)});\n        });\n    }\n\n    Set.of = function(/*...values*/) {\n      return this(arguments);\n    };\n\n    Set.fromKeys = function(value) {\n      return this(KeyedIterable(value).keySeq());\n    };\n\n    Set.prototype.toString = function() {\n      return this.__toString('Set {', '}');\n    };\n\n    // @pragma Access\n\n    Set.prototype.has = function(value) {\n      return this._map.has(value);\n    };\n\n    // @pragma Modification\n\n    Set.prototype.add = function(value) {\n      return updateSet(this, this._map.set(value, true));\n    };\n\n    Set.prototype.remove = function(value) {\n      return updateSet(this, this._map.remove(value));\n    };\n\n    Set.prototype.clear = function() {\n      return updateSet(this, this._map.clear());\n    };\n\n    // @pragma Composition\n\n    Set.prototype.union = function() {var iters = SLICE$0.call(arguments, 0);\n      iters = iters.filter(function(x ) {return x.size !== 0});\n      if (iters.length === 0) {\n        return this;\n      }\n      if (this.size === 0 && !this.__ownerID && iters.length === 1) {\n        return this.constructor(iters[0]);\n      }\n      return this.withMutations(function(set ) {\n        for (var ii = 0; ii < iters.length; ii++) {\n          SetIterable(iters[ii]).forEach(function(value ) {return set.add(value)});\n        }\n      });\n    };\n\n    Set.prototype.intersect = function() {var iters = SLICE$0.call(arguments, 0);\n      if (iters.length === 0) {\n        return this;\n      }\n      iters = iters.map(function(iter ) {return SetIterable(iter)});\n      var originalSet = this;\n      return this.withMutations(function(set ) {\n        originalSet.forEach(function(value ) {\n          if (!iters.every(function(iter ) {return iter.includes(value)})) {\n            set.remove(value);\n          }\n        });\n      });\n    };\n\n    Set.prototype.subtract = function() {var iters = SLICE$0.call(arguments, 0);\n      if (iters.length === 0) {\n        return this;\n      }\n      iters = iters.map(function(iter ) {return SetIterable(iter)});\n      var originalSet = this;\n      return this.withMutations(function(set ) {\n        originalSet.forEach(function(value ) {\n          if (iters.some(function(iter ) {return iter.includes(value)})) {\n            set.remove(value);\n          }\n        });\n      });\n    };\n\n    Set.prototype.merge = function() {\n      return this.union.apply(this, arguments);\n    };\n\n    Set.prototype.mergeWith = function(merger) {var iters = SLICE$0.call(arguments, 1);\n      return this.union.apply(this, iters);\n    };\n\n    Set.prototype.sort = function(comparator) {\n      // Late binding\n      return OrderedSet(sortFactory(this, comparator));\n    };\n\n    Set.prototype.sortBy = function(mapper, comparator) {\n      // Late binding\n      return OrderedSet(sortFactory(this, comparator, mapper));\n    };\n\n    Set.prototype.wasAltered = function() {\n      return this._map.wasAltered();\n    };\n\n    Set.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      return this._map.__iterate(function(_, k)  {return fn(k, k, this$0)}, reverse);\n    };\n\n    Set.prototype.__iterator = function(type, reverse) {\n      return this._map.map(function(_, k)  {return k}).__iterator(type, reverse);\n    };\n\n    Set.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      var newMap = this._map.__ensureOwner(ownerID);\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        this._map = newMap;\n        return this;\n      }\n      return this.__make(newMap, ownerID);\n    };\n\n\n  function isSet(maybeSet) {\n    return !!(maybeSet && maybeSet[IS_SET_SENTINEL]);\n  }\n\n  Set.isSet = isSet;\n\n  var IS_SET_SENTINEL = '@@__IMMUTABLE_SET__@@';\n\n  var SetPrototype = Set.prototype;\n  SetPrototype[IS_SET_SENTINEL] = true;\n  SetPrototype[DELETE] = SetPrototype.remove;\n  SetPrototype.mergeDeep = SetPrototype.merge;\n  SetPrototype.mergeDeepWith = SetPrototype.mergeWith;\n  SetPrototype.withMutations = MapPrototype.withMutations;\n  SetPrototype.asMutable = MapPrototype.asMutable;\n  SetPrototype.asImmutable = MapPrototype.asImmutable;\n\n  SetPrototype.__empty = emptySet;\n  SetPrototype.__make = makeSet;\n\n  function updateSet(set, newMap) {\n    if (set.__ownerID) {\n      set.size = newMap.size;\n      set._map = newMap;\n      return set;\n    }\n    return newMap === set._map ? set :\n      newMap.size === 0 ? set.__empty() :\n      set.__make(newMap);\n  }\n\n  function makeSet(map, ownerID) {\n    var set = Object.create(SetPrototype);\n    set.size = map ? map.size : 0;\n    set._map = map;\n    set.__ownerID = ownerID;\n    return set;\n  }\n\n  var EMPTY_SET;\n  function emptySet() {\n    return EMPTY_SET || (EMPTY_SET = makeSet(emptyMap()));\n  }\n\n  createClass(OrderedSet, Set);\n\n    // @pragma Construction\n\n    function OrderedSet(value) {\n      return value === null || value === undefined ? emptyOrderedSet() :\n        isOrderedSet(value) ? value :\n        emptyOrderedSet().withMutations(function(set ) {\n          var iter = SetIterable(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function(v ) {return set.add(v)});\n        });\n    }\n\n    OrderedSet.of = function(/*...values*/) {\n      return this(arguments);\n    };\n\n    OrderedSet.fromKeys = function(value) {\n      return this(KeyedIterable(value).keySeq());\n    };\n\n    OrderedSet.prototype.toString = function() {\n      return this.__toString('OrderedSet {', '}');\n    };\n\n\n  function isOrderedSet(maybeOrderedSet) {\n    return isSet(maybeOrderedSet) && isOrdered(maybeOrderedSet);\n  }\n\n  OrderedSet.isOrderedSet = isOrderedSet;\n\n  var OrderedSetPrototype = OrderedSet.prototype;\n  OrderedSetPrototype[IS_ORDERED_SENTINEL] = true;\n\n  OrderedSetPrototype.__empty = emptyOrderedSet;\n  OrderedSetPrototype.__make = makeOrderedSet;\n\n  function makeOrderedSet(map, ownerID) {\n    var set = Object.create(OrderedSetPrototype);\n    set.size = map ? map.size : 0;\n    set._map = map;\n    set.__ownerID = ownerID;\n    return set;\n  }\n\n  var EMPTY_ORDERED_SET;\n  function emptyOrderedSet() {\n    return EMPTY_ORDERED_SET || (EMPTY_ORDERED_SET = makeOrderedSet(emptyOrderedMap()));\n  }\n\n  createClass(Stack, IndexedCollection);\n\n    // @pragma Construction\n\n    function Stack(value) {\n      return value === null || value === undefined ? emptyStack() :\n        isStack(value) ? value :\n        emptyStack().unshiftAll(value);\n    }\n\n    Stack.of = function(/*...values*/) {\n      return this(arguments);\n    };\n\n    Stack.prototype.toString = function() {\n      return this.__toString('Stack [', ']');\n    };\n\n    // @pragma Access\n\n    Stack.prototype.get = function(index, notSetValue) {\n      var head = this._head;\n      index = wrapIndex(this, index);\n      while (head && index--) {\n        head = head.next;\n      }\n      return head ? head.value : notSetValue;\n    };\n\n    Stack.prototype.peek = function() {\n      return this._head && this._head.value;\n    };\n\n    // @pragma Modification\n\n    Stack.prototype.push = function(/*...values*/) {\n      if (arguments.length === 0) {\n        return this;\n      }\n      var newSize = this.size + arguments.length;\n      var head = this._head;\n      for (var ii = arguments.length - 1; ii >= 0; ii--) {\n        head = {\n          value: arguments[ii],\n          next: head\n        };\n      }\n      if (this.__ownerID) {\n        this.size = newSize;\n        this._head = head;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return makeStack(newSize, head);\n    };\n\n    Stack.prototype.pushAll = function(iter) {\n      iter = IndexedIterable(iter);\n      if (iter.size === 0) {\n        return this;\n      }\n      assertNotInfinite(iter.size);\n      var newSize = this.size;\n      var head = this._head;\n      iter.reverse().forEach(function(value ) {\n        newSize++;\n        head = {\n          value: value,\n          next: head\n        };\n      });\n      if (this.__ownerID) {\n        this.size = newSize;\n        this._head = head;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return makeStack(newSize, head);\n    };\n\n    Stack.prototype.pop = function() {\n      return this.slice(1);\n    };\n\n    Stack.prototype.unshift = function(/*...values*/) {\n      return this.push.apply(this, arguments);\n    };\n\n    Stack.prototype.unshiftAll = function(iter) {\n      return this.pushAll(iter);\n    };\n\n    Stack.prototype.shift = function() {\n      return this.pop.apply(this, arguments);\n    };\n\n    Stack.prototype.clear = function() {\n      if (this.size === 0) {\n        return this;\n      }\n      if (this.__ownerID) {\n        this.size = 0;\n        this._head = undefined;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return emptyStack();\n    };\n\n    Stack.prototype.slice = function(begin, end) {\n      if (wholeSlice(begin, end, this.size)) {\n        return this;\n      }\n      var resolvedBegin = resolveBegin(begin, this.size);\n      var resolvedEnd = resolveEnd(end, this.size);\n      if (resolvedEnd !== this.size) {\n        // super.slice(begin, end);\n        return IndexedCollection.prototype.slice.call(this, begin, end);\n      }\n      var newSize = this.size - resolvedBegin;\n      var head = this._head;\n      while (resolvedBegin--) {\n        head = head.next;\n      }\n      if (this.__ownerID) {\n        this.size = newSize;\n        this._head = head;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return makeStack(newSize, head);\n    };\n\n    // @pragma Mutability\n\n    Stack.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        this.__altered = false;\n        return this;\n      }\n      return makeStack(this.size, this._head, ownerID, this.__hash);\n    };\n\n    // @pragma Iteration\n\n    Stack.prototype.__iterate = function(fn, reverse) {\n      if (reverse) {\n        return this.reverse().__iterate(fn);\n      }\n      var iterations = 0;\n      var node = this._head;\n      while (node) {\n        if (fn(node.value, iterations++, this) === false) {\n          break;\n        }\n        node = node.next;\n      }\n      return iterations;\n    };\n\n    Stack.prototype.__iterator = function(type, reverse) {\n      if (reverse) {\n        return this.reverse().__iterator(type);\n      }\n      var iterations = 0;\n      var node = this._head;\n      return new Iterator(function()  {\n        if (node) {\n          var value = node.value;\n          node = node.next;\n          return iteratorValue(type, iterations++, value);\n        }\n        return iteratorDone();\n      });\n    };\n\n\n  function isStack(maybeStack) {\n    return !!(maybeStack && maybeStack[IS_STACK_SENTINEL]);\n  }\n\n  Stack.isStack = isStack;\n\n  var IS_STACK_SENTINEL = '@@__IMMUTABLE_STACK__@@';\n\n  var StackPrototype = Stack.prototype;\n  StackPrototype[IS_STACK_SENTINEL] = true;\n  StackPrototype.withMutations = MapPrototype.withMutations;\n  StackPrototype.asMutable = MapPrototype.asMutable;\n  StackPrototype.asImmutable = MapPrototype.asImmutable;\n  StackPrototype.wasAltered = MapPrototype.wasAltered;\n\n\n  function makeStack(size, head, ownerID, hash) {\n    var map = Object.create(StackPrototype);\n    map.size = size;\n    map._head = head;\n    map.__ownerID = ownerID;\n    map.__hash = hash;\n    map.__altered = false;\n    return map;\n  }\n\n  var EMPTY_STACK;\n  function emptyStack() {\n    return EMPTY_STACK || (EMPTY_STACK = makeStack(0));\n  }\n\n  /**\n   * Contributes additional methods to a constructor\n   */\n  function mixin(ctor, methods) {\n    var keyCopier = function(key ) { ctor.prototype[key] = methods[key]; };\n    Object.keys(methods).forEach(keyCopier);\n    Object.getOwnPropertySymbols &&\n      Object.getOwnPropertySymbols(methods).forEach(keyCopier);\n    return ctor;\n  }\n\n  Iterable.Iterator = Iterator;\n\n  mixin(Iterable, {\n\n    // ### Conversion to other types\n\n    toArray: function() {\n      assertNotInfinite(this.size);\n      var array = new Array(this.size || 0);\n      this.valueSeq().__iterate(function(v, i)  { array[i] = v; });\n      return array;\n    },\n\n    toIndexedSeq: function() {\n      return new ToIndexedSequence(this);\n    },\n\n    toJS: function() {\n      return this.toSeq().map(\n        function(value ) {return value && typeof value.toJS === 'function' ? value.toJS() : value}\n      ).__toJS();\n    },\n\n    toJSON: function() {\n      return this.toSeq().map(\n        function(value ) {return value && typeof value.toJSON === 'function' ? value.toJSON() : value}\n      ).__toJS();\n    },\n\n    toKeyedSeq: function() {\n      return new ToKeyedSequence(this, true);\n    },\n\n    toMap: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return Map(this.toKeyedSeq());\n    },\n\n    toObject: function() {\n      assertNotInfinite(this.size);\n      var object = {};\n      this.__iterate(function(v, k)  { object[k] = v; });\n      return object;\n    },\n\n    toOrderedMap: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return OrderedMap(this.toKeyedSeq());\n    },\n\n    toOrderedSet: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return OrderedSet(isKeyed(this) ? this.valueSeq() : this);\n    },\n\n    toSet: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return Set(isKeyed(this) ? this.valueSeq() : this);\n    },\n\n    toSetSeq: function() {\n      return new ToSetSequence(this);\n    },\n\n    toSeq: function() {\n      return isIndexed(this) ? this.toIndexedSeq() :\n        isKeyed(this) ? this.toKeyedSeq() :\n        this.toSetSeq();\n    },\n\n    toStack: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return Stack(isKeyed(this) ? this.valueSeq() : this);\n    },\n\n    toList: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return List(isKeyed(this) ? this.valueSeq() : this);\n    },\n\n\n    // ### Common JavaScript methods and properties\n\n    toString: function() {\n      return '[Iterable]';\n    },\n\n    __toString: function(head, tail) {\n      if (this.size === 0) {\n        return head + tail;\n      }\n      return head + ' ' + this.toSeq().map(this.__toStringMapper).join(', ') + ' ' + tail;\n    },\n\n\n    // ### ES6 Collection methods (ES6 Array and Map)\n\n    concat: function() {var values = SLICE$0.call(arguments, 0);\n      return reify(this, concatFactory(this, values));\n    },\n\n    includes: function(searchValue) {\n      return this.some(function(value ) {return is(value, searchValue)});\n    },\n\n    entries: function() {\n      return this.__iterator(ITERATE_ENTRIES);\n    },\n\n    every: function(predicate, context) {\n      assertNotInfinite(this.size);\n      var returnValue = true;\n      this.__iterate(function(v, k, c)  {\n        if (!predicate.call(context, v, k, c)) {\n          returnValue = false;\n          return false;\n        }\n      });\n      return returnValue;\n    },\n\n    filter: function(predicate, context) {\n      return reify(this, filterFactory(this, predicate, context, true));\n    },\n\n    find: function(predicate, context, notSetValue) {\n      var entry = this.findEntry(predicate, context);\n      return entry ? entry[1] : notSetValue;\n    },\n\n    forEach: function(sideEffect, context) {\n      assertNotInfinite(this.size);\n      return this.__iterate(context ? sideEffect.bind(context) : sideEffect);\n    },\n\n    join: function(separator) {\n      assertNotInfinite(this.size);\n      separator = separator !== undefined ? '' + separator : ',';\n      var joined = '';\n      var isFirst = true;\n      this.__iterate(function(v ) {\n        isFirst ? (isFirst = false) : (joined += separator);\n        joined += v !== null && v !== undefined ? v.toString() : '';\n      });\n      return joined;\n    },\n\n    keys: function() {\n      return this.__iterator(ITERATE_KEYS);\n    },\n\n    map: function(mapper, context) {\n      return reify(this, mapFactory(this, mapper, context));\n    },\n\n    reduce: function(reducer, initialReduction, context) {\n      assertNotInfinite(this.size);\n      var reduction;\n      var useFirst;\n      if (arguments.length < 2) {\n        useFirst = true;\n      } else {\n        reduction = initialReduction;\n      }\n      this.__iterate(function(v, k, c)  {\n        if (useFirst) {\n          useFirst = false;\n          reduction = v;\n        } else {\n          reduction = reducer.call(context, reduction, v, k, c);\n        }\n      });\n      return reduction;\n    },\n\n    reduceRight: function(reducer, initialReduction, context) {\n      var reversed = this.toKeyedSeq().reverse();\n      return reversed.reduce.apply(reversed, arguments);\n    },\n\n    reverse: function() {\n      return reify(this, reverseFactory(this, true));\n    },\n\n    slice: function(begin, end) {\n      return reify(this, sliceFactory(this, begin, end, true));\n    },\n\n    some: function(predicate, context) {\n      return !this.every(not(predicate), context);\n    },\n\n    sort: function(comparator) {\n      return reify(this, sortFactory(this, comparator));\n    },\n\n    values: function() {\n      return this.__iterator(ITERATE_VALUES);\n    },\n\n\n    // ### More sequential methods\n\n    butLast: function() {\n      return this.slice(0, -1);\n    },\n\n    isEmpty: function() {\n      return this.size !== undefined ? this.size === 0 : !this.some(function()  {return true});\n    },\n\n    count: function(predicate, context) {\n      return ensureSize(\n        predicate ? this.toSeq().filter(predicate, context) : this\n      );\n    },\n\n    countBy: function(grouper, context) {\n      return countByFactory(this, grouper, context);\n    },\n\n    equals: function(other) {\n      return deepEqual(this, other);\n    },\n\n    entrySeq: function() {\n      var iterable = this;\n      if (iterable._cache) {\n        // We cache as an entries array, so we can just return the cache!\n        return new ArraySeq(iterable._cache);\n      }\n      var entriesSequence = iterable.toSeq().map(entryMapper).toIndexedSeq();\n      entriesSequence.fromEntrySeq = function()  {return iterable.toSeq()};\n      return entriesSequence;\n    },\n\n    filterNot: function(predicate, context) {\n      return this.filter(not(predicate), context);\n    },\n\n    findEntry: function(predicate, context, notSetValue) {\n      var found = notSetValue;\n      this.__iterate(function(v, k, c)  {\n        if (predicate.call(context, v, k, c)) {\n          found = [k, v];\n          return false;\n        }\n      });\n      return found;\n    },\n\n    findKey: function(predicate, context) {\n      var entry = this.findEntry(predicate, context);\n      return entry && entry[0];\n    },\n\n    findLast: function(predicate, context, notSetValue) {\n      return this.toKeyedSeq().reverse().find(predicate, context, notSetValue);\n    },\n\n    findLastEntry: function(predicate, context, notSetValue) {\n      return this.toKeyedSeq().reverse().findEntry(predicate, context, notSetValue);\n    },\n\n    findLastKey: function(predicate, context) {\n      return this.toKeyedSeq().reverse().findKey(predicate, context);\n    },\n\n    first: function() {\n      return this.find(returnTrue);\n    },\n\n    flatMap: function(mapper, context) {\n      return reify(this, flatMapFactory(this, mapper, context));\n    },\n\n    flatten: function(depth) {\n      return reify(this, flattenFactory(this, depth, true));\n    },\n\n    fromEntrySeq: function() {\n      return new FromEntriesSequence(this);\n    },\n\n    get: function(searchKey, notSetValue) {\n      return this.find(function(_, key)  {return is(key, searchKey)}, undefined, notSetValue);\n    },\n\n    getIn: function(searchKeyPath, notSetValue) {\n      var nested = this;\n      // Note: in an ES6 environment, we would prefer:\n      // for (var key of searchKeyPath) {\n      var iter = forceIterator(searchKeyPath);\n      var step;\n      while (!(step = iter.next()).done) {\n        var key = step.value;\n        nested = nested && nested.get ? nested.get(key, NOT_SET) : NOT_SET;\n        if (nested === NOT_SET) {\n          return notSetValue;\n        }\n      }\n      return nested;\n    },\n\n    groupBy: function(grouper, context) {\n      return groupByFactory(this, grouper, context);\n    },\n\n    has: function(searchKey) {\n      return this.get(searchKey, NOT_SET) !== NOT_SET;\n    },\n\n    hasIn: function(searchKeyPath) {\n      return this.getIn(searchKeyPath, NOT_SET) !== NOT_SET;\n    },\n\n    isSubset: function(iter) {\n      iter = typeof iter.includes === 'function' ? iter : Iterable(iter);\n      return this.every(function(value ) {return iter.includes(value)});\n    },\n\n    isSuperset: function(iter) {\n      iter = typeof iter.isSubset === 'function' ? iter : Iterable(iter);\n      return iter.isSubset(this);\n    },\n\n    keyOf: function(searchValue) {\n      return this.findKey(function(value ) {return is(value, searchValue)});\n    },\n\n    keySeq: function() {\n      return this.toSeq().map(keyMapper).toIndexedSeq();\n    },\n\n    last: function() {\n      return this.toSeq().reverse().first();\n    },\n\n    lastKeyOf: function(searchValue) {\n      return this.toKeyedSeq().reverse().keyOf(searchValue);\n    },\n\n    max: function(comparator) {\n      return maxFactory(this, comparator);\n    },\n\n    maxBy: function(mapper, comparator) {\n      return maxFactory(this, comparator, mapper);\n    },\n\n    min: function(comparator) {\n      return maxFactory(this, comparator ? neg(comparator) : defaultNegComparator);\n    },\n\n    minBy: function(mapper, comparator) {\n      return maxFactory(this, comparator ? neg(comparator) : defaultNegComparator, mapper);\n    },\n\n    rest: function() {\n      return this.slice(1);\n    },\n\n    skip: function(amount) {\n      return this.slice(Math.max(0, amount));\n    },\n\n    skipLast: function(amount) {\n      return reify(this, this.toSeq().reverse().skip(amount).reverse());\n    },\n\n    skipWhile: function(predicate, context) {\n      return reify(this, skipWhileFactory(this, predicate, context, true));\n    },\n\n    skipUntil: function(predicate, context) {\n      return this.skipWhile(not(predicate), context);\n    },\n\n    sortBy: function(mapper, comparator) {\n      return reify(this, sortFactory(this, comparator, mapper));\n    },\n\n    take: function(amount) {\n      return this.slice(0, Math.max(0, amount));\n    },\n\n    takeLast: function(amount) {\n      return reify(this, this.toSeq().reverse().take(amount).reverse());\n    },\n\n    takeWhile: function(predicate, context) {\n      return reify(this, takeWhileFactory(this, predicate, context));\n    },\n\n    takeUntil: function(predicate, context) {\n      return this.takeWhile(not(predicate), context);\n    },\n\n    valueSeq: function() {\n      return this.toIndexedSeq();\n    },\n\n\n    // ### Hashable Object\n\n    hashCode: function() {\n      return this.__hash || (this.__hash = hashIterable(this));\n    }\n\n\n    // ### Internal\n\n    // abstract __iterate(fn, reverse)\n\n    // abstract __iterator(type, reverse)\n  });\n\n  // var IS_ITERABLE_SENTINEL = '@@__IMMUTABLE_ITERABLE__@@';\n  // var IS_KEYED_SENTINEL = '@@__IMMUTABLE_KEYED__@@';\n  // var IS_INDEXED_SENTINEL = '@@__IMMUTABLE_INDEXED__@@';\n  // var IS_ORDERED_SENTINEL = '@@__IMMUTABLE_ORDERED__@@';\n\n  var IterablePrototype = Iterable.prototype;\n  IterablePrototype[IS_ITERABLE_SENTINEL] = true;\n  IterablePrototype[ITERATOR_SYMBOL] = IterablePrototype.values;\n  IterablePrototype.__toJS = IterablePrototype.toArray;\n  IterablePrototype.__toStringMapper = quoteString;\n  IterablePrototype.inspect =\n  IterablePrototype.toSource = function() { return this.toString(); };\n  IterablePrototype.chain = IterablePrototype.flatMap;\n  IterablePrototype.contains = IterablePrototype.includes;\n\n  mixin(KeyedIterable, {\n\n    // ### More sequential methods\n\n    flip: function() {\n      return reify(this, flipFactory(this));\n    },\n\n    mapEntries: function(mapper, context) {var this$0 = this;\n      var iterations = 0;\n      return reify(this,\n        this.toSeq().map(\n          function(v, k)  {return mapper.call(context, [k, v], iterations++, this$0)}\n        ).fromEntrySeq()\n      );\n    },\n\n    mapKeys: function(mapper, context) {var this$0 = this;\n      return reify(this,\n        this.toSeq().flip().map(\n          function(k, v)  {return mapper.call(context, k, v, this$0)}\n        ).flip()\n      );\n    }\n\n  });\n\n  var KeyedIterablePrototype = KeyedIterable.prototype;\n  KeyedIterablePrototype[IS_KEYED_SENTINEL] = true;\n  KeyedIterablePrototype[ITERATOR_SYMBOL] = IterablePrototype.entries;\n  KeyedIterablePrototype.__toJS = IterablePrototype.toObject;\n  KeyedIterablePrototype.__toStringMapper = function(v, k)  {return JSON.stringify(k) + ': ' + quoteString(v)};\n\n\n\n  mixin(IndexedIterable, {\n\n    // ### Conversion to other types\n\n    toKeyedSeq: function() {\n      return new ToKeyedSequence(this, false);\n    },\n\n\n    // ### ES6 Collection methods (ES6 Array and Map)\n\n    filter: function(predicate, context) {\n      return reify(this, filterFactory(this, predicate, context, false));\n    },\n\n    findIndex: function(predicate, context) {\n      var entry = this.findEntry(predicate, context);\n      return entry ? entry[0] : -1;\n    },\n\n    indexOf: function(searchValue) {\n      var key = this.keyOf(searchValue);\n      return key === undefined ? -1 : key;\n    },\n\n    lastIndexOf: function(searchValue) {\n      var key = this.lastKeyOf(searchValue);\n      return key === undefined ? -1 : key;\n    },\n\n    reverse: function() {\n      return reify(this, reverseFactory(this, false));\n    },\n\n    slice: function(begin, end) {\n      return reify(this, sliceFactory(this, begin, end, false));\n    },\n\n    splice: function(index, removeNum /*, ...values*/) {\n      var numArgs = arguments.length;\n      removeNum = Math.max(removeNum | 0, 0);\n      if (numArgs === 0 || (numArgs === 2 && !removeNum)) {\n        return this;\n      }\n      // If index is negative, it should resolve relative to the size of the\n      // collection. However size may be expensive to compute if not cached, so\n      // only call count() if the number is in fact negative.\n      index = resolveBegin(index, index < 0 ? this.count() : this.size);\n      var spliced = this.slice(0, index);\n      return reify(\n        this,\n        numArgs === 1 ?\n          spliced :\n          spliced.concat(arrCopy(arguments, 2), this.slice(index + removeNum))\n      );\n    },\n\n\n    // ### More collection methods\n\n    findLastIndex: function(predicate, context) {\n      var entry = this.findLastEntry(predicate, context);\n      return entry ? entry[0] : -1;\n    },\n\n    first: function() {\n      return this.get(0);\n    },\n\n    flatten: function(depth) {\n      return reify(this, flattenFactory(this, depth, false));\n    },\n\n    get: function(index, notSetValue) {\n      index = wrapIndex(this, index);\n      return (index < 0 || (this.size === Infinity ||\n          (this.size !== undefined && index > this.size))) ?\n        notSetValue :\n        this.find(function(_, key)  {return key === index}, undefined, notSetValue);\n    },\n\n    has: function(index) {\n      index = wrapIndex(this, index);\n      return index >= 0 && (this.size !== undefined ?\n        this.size === Infinity || index < this.size :\n        this.indexOf(index) !== -1\n      );\n    },\n\n    interpose: function(separator) {\n      return reify(this, interposeFactory(this, separator));\n    },\n\n    interleave: function(/*...iterables*/) {\n      var iterables = [this].concat(arrCopy(arguments));\n      var zipped = zipWithFactory(this.toSeq(), IndexedSeq.of, iterables);\n      var interleaved = zipped.flatten(true);\n      if (zipped.size) {\n        interleaved.size = zipped.size * iterables.length;\n      }\n      return reify(this, interleaved);\n    },\n\n    keySeq: function() {\n      return Range(0, this.size);\n    },\n\n    last: function() {\n      return this.get(-1);\n    },\n\n    skipWhile: function(predicate, context) {\n      return reify(this, skipWhileFactory(this, predicate, context, false));\n    },\n\n    zip: function(/*, ...iterables */) {\n      var iterables = [this].concat(arrCopy(arguments));\n      return reify(this, zipWithFactory(this, defaultZipper, iterables));\n    },\n\n    zipWith: function(zipper/*, ...iterables */) {\n      var iterables = arrCopy(arguments);\n      iterables[0] = this;\n      return reify(this, zipWithFactory(this, zipper, iterables));\n    }\n\n  });\n\n  IndexedIterable.prototype[IS_INDEXED_SENTINEL] = true;\n  IndexedIterable.prototype[IS_ORDERED_SENTINEL] = true;\n\n\n\n  mixin(SetIterable, {\n\n    // ### ES6 Collection methods (ES6 Array and Map)\n\n    get: function(value, notSetValue) {\n      return this.has(value) ? value : notSetValue;\n    },\n\n    includes: function(value) {\n      return this.has(value);\n    },\n\n\n    // ### More sequential methods\n\n    keySeq: function() {\n      return this.valueSeq();\n    }\n\n  });\n\n  SetIterable.prototype.has = IterablePrototype.includes;\n  SetIterable.prototype.contains = SetIterable.prototype.includes;\n\n\n  // Mixin subclasses\n\n  mixin(KeyedSeq, KeyedIterable.prototype);\n  mixin(IndexedSeq, IndexedIterable.prototype);\n  mixin(SetSeq, SetIterable.prototype);\n\n  mixin(KeyedCollection, KeyedIterable.prototype);\n  mixin(IndexedCollection, IndexedIterable.prototype);\n  mixin(SetCollection, SetIterable.prototype);\n\n\n  // #pragma Helper functions\n\n  function keyMapper(v, k) {\n    return k;\n  }\n\n  function entryMapper(v, k) {\n    return [k, v];\n  }\n\n  function not(predicate) {\n    return function() {\n      return !predicate.apply(this, arguments);\n    }\n  }\n\n  function neg(predicate) {\n    return function() {\n      return -predicate.apply(this, arguments);\n    }\n  }\n\n  function quoteString(value) {\n    return typeof value === 'string' ? JSON.stringify(value) : String(value);\n  }\n\n  function defaultZipper() {\n    return arrCopy(arguments);\n  }\n\n  function defaultNegComparator(a, b) {\n    return a < b ? 1 : a > b ? -1 : 0;\n  }\n\n  function hashIterable(iterable) {\n    if (iterable.size === Infinity) {\n      return 0;\n    }\n    var ordered = isOrdered(iterable);\n    var keyed = isKeyed(iterable);\n    var h = ordered ? 1 : 0;\n    var size = iterable.__iterate(\n      keyed ?\n        ordered ?\n          function(v, k)  { h = 31 * h + hashMerge(hash(v), hash(k)) | 0; } :\n          function(v, k)  { h = h + hashMerge(hash(v), hash(k)) | 0; } :\n        ordered ?\n          function(v ) { h = 31 * h + hash(v) | 0; } :\n          function(v ) { h = h + hash(v) | 0; }\n    );\n    return murmurHashOfSize(size, h);\n  }\n\n  function murmurHashOfSize(size, h) {\n    h = imul(h, 0xCC9E2D51);\n    h = imul(h << 15 | h >>> -15, 0x1B873593);\n    h = imul(h << 13 | h >>> -13, 5);\n    h = (h + 0xE6546B64 | 0) ^ size;\n    h = imul(h ^ h >>> 16, 0x85EBCA6B);\n    h = imul(h ^ h >>> 13, 0xC2B2AE35);\n    h = smi(h ^ h >>> 16);\n    return h;\n  }\n\n  function hashMerge(a, b) {\n    return a ^ b + 0x9E3779B9 + (a << 6) + (a >> 2) | 0; // int\n  }\n\n  var Immutable = {\n\n    Iterable: Iterable,\n\n    Seq: Seq,\n    Collection: Collection,\n    Map: Map,\n    OrderedMap: OrderedMap,\n    List: List,\n    Stack: Stack,\n    Set: Set,\n    OrderedSet: OrderedSet,\n\n    Record: Record,\n    Range: Range,\n    Repeat: Repeat,\n\n    is: is,\n    fromJS: fromJS\n\n  };\n\n  return Immutable;\n\n}));","// @flow\nimport React from 'react';\nimport noop from 'lodash/noop';\nimport classNames from 'classnames';\nimport X from '../../icon/fill/X16';\n// $FlowFixMe this imports from a typescript file\nimport LabelPill from '../label-pill';\nimport Avatar from '../avatar';\n\nimport './RoundPill.scss';\n\ntype Props = {\n    className?: string,\n    /** Function to retrieve the image URL associated with a pill */\n    getPillImageUrl?: (data: { id: string | number, [key: string]: any }) => string | Promise<?string>,\n    hasWarning?: boolean,\n    id?: string | number,\n    isDisabled?: boolean,\n    isExternal?: boolean,\n    isSelected?: boolean,\n    isValid?: boolean,\n    onRemove: () => any,\n    showAvatar?: boolean,\n    text: string,\n};\n\ntype State = {\n    avatarUrl: ?string,\n};\n\nconst RemoveButton = ({ onClick, ...rest }: { onClick: () => any }) => (\n    <X {...rest} aria-hidden=\"true\" onClick={onClick} />\n);\n\nclass RoundPill extends React.PureComponent<Props, State> {\n    static defaultProps = {\n        isDisabled: false,\n        isSelected: false,\n        isValid: true,\n        hasWarning: false,\n        showAvatar: false,\n    };\n\n    state = {\n        avatarUrl: undefined,\n    };\n\n    isMounted: boolean = false;\n\n    getStyles = (): string => {\n        const { className, isSelected, isDisabled, hasWarning, isValid } = this.props;\n\n        return classNames('bdl-RoundPill', className, {\n            'bdl-RoundPill--selected': isSelected && !isDisabled,\n            'bdl-RoundPill--disabled': isDisabled,\n            'bdl-RoundPill--warning': hasWarning,\n            'bdl-RoundPill--error': !isValid,\n        });\n    };\n\n    handleClickRemove = () => {\n        const { isDisabled, onRemove } = this.props;\n        return isDisabled ? noop : onRemove();\n    };\n\n    /**\n     * Success handler for getting avatar url\n     *\n     * @param {string} [avatarUrl] the user avatar url\n     */\n    getAvatarUrlHandler = (avatarUrl: ?string) => {\n        if (this.isMounted) {\n            this.setState({\n                avatarUrl,\n            });\n        }\n    };\n\n    /**\n     * Gets the avatar URL for the user from the getPillImageUrl prop\n     *\n     * @return {void}\n     */\n    getAvatarUrl() {\n        const { getPillImageUrl, id } = this.props;\n        Promise.resolve(getPillImageUrl && id ? getPillImageUrl({ id }) : undefined)\n            .then(this.getAvatarUrlHandler)\n            .catch(() => {\n                // noop\n            });\n    }\n\n    componentDidMount() {\n        this.isMounted = true;\n        this.getAvatarUrl();\n    }\n\n    componentWillUnmount() {\n        this.isMounted = false;\n    }\n\n    render() {\n        const { id, isExternal, showAvatar, text } = this.props;\n        const { avatarUrl } = this.state;\n\n        return (\n            <LabelPill.Pill size=\"large\" className={this.getStyles()}>\n                {showAvatar ? (\n                    <LabelPill.Icon\n                        Component={Avatar}\n                        className=\"bdl-RoundPill-avatar\"\n                        avatarUrl={avatarUrl}\n                        id={id}\n                        isExternal={isExternal}\n                        name={text}\n                        size=\"small\"\n                        shouldShowExternal\n                    />\n                ) : null}\n                <LabelPill.Text className=\"bdl-RoundPill-text\">{text}</LabelPill.Text>\n                <LabelPill.Icon\n                    className=\"bdl-RoundPill-closeBtn\"\n                    Component={RemoveButton}\n                    onClick={this.handleClickRemove}\n                />\n            </LabelPill.Pill>\n        );\n    }\n}\n\nexport default RoundPill;\n","// @flow\nimport React from 'react';\nimport noop from 'lodash/noop';\nimport classNames from 'classnames';\n\ntype Props = {\n    isDisabled?: boolean,\n    isSelected?: boolean,\n    isValid?: boolean,\n    onRemove: Function,\n    text: string,\n};\n\nconst Pill = ({ isDisabled = false, isSelected = false, isValid = true, onRemove, text }: Props) => {\n    const styles = classNames('bdl-Pill', 'pill', {\n        'is-selected': isSelected && !isDisabled,\n        'is-invalid': !isValid,\n        'is-disabled': isDisabled,\n        'bdl-is-disabled': isDisabled,\n    });\n    const onClick = isDisabled ? noop : onRemove;\n\n    return (\n        <span className={styles}>\n            <span className=\"bdl-Pill-text pill-text\">{text}</span>\n            <span aria-hidden=\"true\" className=\"close-btn\" onClick={onClick}>\n                ✕\n            </span>\n        </span>\n    );\n};\n\nexport default Pill;\n","// @flow\nimport React from 'react';\n\nimport PlainButton from '../plain-button';\nimport Tooltip from '../tooltip';\nimport { KEYS } from '../../constants';\n\nimport { type SuggestedPill as SuggestedPillType } from './flowTypes';\n\nimport './SuggestedPillsRow.scss';\n\ntype Props = {\n    email: string,\n    id: number,\n    name: string,\n    onAdd: SuggestedPillType => void,\n};\n\nconst SuggestedPill = ({ email, id, name, onAdd }: Props) => {\n    const addSuggestedPill = (event: SyntheticEvent<HTMLButtonElement>) => {\n        event.preventDefault();\n\n        // TODO: refactor this so inline conversions aren't required at every usage\n        onAdd({\n            email,\n            id,\n            name,\n            text: name,\n            type: 'user',\n            value: email,\n        });\n    };\n\n    const handleKeyPress = (event: SyntheticKeyboardEvent<HTMLButtonElement>) => {\n        if (event.key === KEYS.enter) {\n            addSuggestedPill(event);\n        }\n    };\n\n    return (\n        <Tooltip position=\"bottom-center\" text={email}>\n            <PlainButton\n                className=\"suggested-pill-invisible-button\"\n                onClick={addSuggestedPill}\n                onKeyDown={handleKeyPress}\n                type=\"button\"\n            >\n                <span className=\"bdl-Pill-text pill-text suggested-pill\">{name}</span>\n            </PlainButton>\n        </Tooltip>\n    );\n};\n\nexport default SuggestedPill;\n","// @flow\nimport React from 'react';\nimport noop from 'lodash/noop';\n\nimport SuggestedPill from './SuggestedPill';\nimport type { SuggestedPill as SuggestedPillType, SuggestedPills, SuggestedPillsFilter } from './flowTypes';\n\nimport './SuggestedPillsRow.scss';\n\ntype Props = {\n    onSuggestedPillAdd?: SuggestedPillType => void,\n    selectedPillsValues?: Array<number>,\n    suggestedPillsData?: SuggestedPills,\n    suggestedPillsFilter?: SuggestedPillsFilter,\n    title?: string,\n};\n\nconst SuggestedPillsRow = ({\n    onSuggestedPillAdd = noop,\n    selectedPillsValues = [],\n    suggestedPillsData = [],\n    suggestedPillsFilter = 'id',\n    title,\n}: Props) => {\n    // Prevents pills from being rendered that are in the form by checking for value (id or custom value)\n    const filteredSuggestedPillData = suggestedPillsData.filter(\n        item => !selectedPillsValues.includes(item[suggestedPillsFilter]),\n    );\n\n    if (filteredSuggestedPillData.length === 0) {\n        return null;\n    }\n\n    return (\n        <div className=\"pill-selector-suggested\">\n            <span>{title}</span>\n            {filteredSuggestedPillData.map(item => (\n                <SuggestedPill\n                    key={item.id}\n                    email={item.email}\n                    id={item.id}\n                    name={item.name}\n                    onAdd={onSuggestedPillAdd}\n                />\n            ))}\n        </div>\n    );\n};\n\nexport default SuggestedPillsRow;\n","// @flow\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport uniqueId from 'lodash/uniqueId';\nimport { List } from 'immutable';\n\nimport Tooltip from '../tooltip';\nimport { KEYS } from '../../constants';\n\nimport RoundPill from './RoundPill';\nimport Pill from './Pill';\nimport SuggestedPillsRow from './SuggestedPillsRow';\nimport type { RoundOption, Option, OptionValue, SuggestedPillsFilter } from './flowTypes';\nimport type { Position } from '../tooltip';\n\nfunction stopDefaultEvent(event) {\n    event.preventDefault();\n    event.stopPropagation();\n}\n\ntype Props = {\n    allowInvalidPills: boolean,\n    className?: string,\n    disabled?: boolean,\n    error?: React.Node,\n    /** Position of error message tooltip */\n    errorTooltipPosition?: Position,\n    /** Called on pill render to get a specific class name to use for a particular option. Note: Only has effect when showRoundedPills is true. */\n    getPillClassName?: (option: Option) => string,\n    /** Function to retrieve the image URL associated with a pill */\n    getPillImageUrl?: (data: { id: string | number, [key: string]: any }) => string,\n    innerRef?: React.Ref<any>,\n    inputProps: Object,\n    onInput: Function,\n    onRemove: Function,\n    onSuggestedPillAdd?: Function,\n    placeholder: string,\n    selectedOptions: List<Object>,\n    /** Whether to show avatars in pills (if rounded style is enabled) */\n    showAvatars?: boolean,\n    /** Whether to use rounded style for pills */\n    showRoundedPills?: boolean,\n    suggestedPillsData?: Array<Object>,\n    suggestedPillsFilter?: SuggestedPillsFilter,\n    suggestedPillsTitle?: string,\n    validator: (option: Option | OptionValue) => boolean,\n};\n\ntype State = {\n    isFocused: boolean,\n    selectedIndex: number,\n};\n\ntype DefaultProps = {\n    allowInvalidPills: boolean,\n    disabled: boolean,\n    error: string,\n    errorTooltipPosition: Position,\n    inputProps: Object,\n    placeholder: string,\n    selectedOptions: List<Object>,\n    validator: () => boolean,\n};\n\ntype Config = React.Config<Props, DefaultProps>;\n\nclass PillSelectorBase extends React.Component<Props, State> {\n    static defaultProps: DefaultProps = {\n        allowInvalidPills: false,\n        disabled: false,\n        error: '',\n        errorTooltipPosition: 'bottom-left',\n        inputProps: {},\n        placeholder: '',\n        selectedOptions: [],\n        validator: () => true,\n    };\n\n    state = {\n        isFocused: false,\n        selectedIndex: -1,\n    };\n\n    getNumSelected = (): number => {\n        const { selectedOptions } = this.props;\n\n        return typeof selectedOptions.size === 'number' ? selectedOptions.size : selectedOptions.length;\n    };\n\n    getPillsByKey = (key: string): Array<any> => {\n        const { selectedOptions } = this.props;\n\n        return selectedOptions.map(option => option[key]);\n    };\n\n    inputEl: HTMLInputElement;\n\n    handleClick = () => {\n        this.inputEl.focus();\n    };\n\n    handleFocus = () => {\n        this.setState({ isFocused: true });\n    };\n\n    handleBlur = () => {\n        this.setState({ isFocused: false });\n    };\n\n    hiddenEl: HTMLSpanElement;\n\n    handleKeyDown = (event: SyntheticKeyboardEvent<>) => {\n        const inputValue = this.inputEl.value;\n        const numPills = this.getNumSelected();\n        const { selectedIndex } = this.state;\n\n        switch (event.key) {\n            case KEYS.backspace: {\n                let index = -1;\n                if (selectedIndex >= 0) {\n                    // remove selected pill\n                    index = selectedIndex;\n                    this.resetSelectedIndex();\n                    this.inputEl.focus();\n                } else if (inputValue === '') {\n                    // remove last pill\n                    index = numPills - 1;\n                }\n                if (index >= 0) {\n                    const { onRemove, selectedOptions } = this.props;\n                    const selectedOption =\n                        // $FlowFixMe\n                        typeof selectedOptions.get === 'function' ? selectedOptions.get(index) : selectedOptions[index];\n                    onRemove(selectedOption, index);\n                    stopDefaultEvent(event);\n                }\n                break;\n            }\n            case KEYS.arrowLeft:\n                if (selectedIndex >= 0) {\n                    // select previous pill\n                    this.setState({\n                        selectedIndex: Math.max(selectedIndex - 1, 0),\n                    });\n                    stopDefaultEvent(event);\n                } else if (inputValue === '' && numPills > 0) {\n                    // select last pill\n                    this.hiddenEl.focus();\n                    this.setState({ selectedIndex: numPills - 1 });\n                    stopDefaultEvent(event);\n                }\n                break;\n            case KEYS.arrowRight: {\n                if (selectedIndex >= 0) {\n                    const index = selectedIndex + 1;\n                    if (index >= numPills) {\n                        // deselect last pill\n                        this.resetSelectedIndex();\n                        this.inputEl.focus();\n                    } else {\n                        // select next pill\n                        this.setState({ selectedIndex: index });\n                    }\n                    stopDefaultEvent(event);\n                }\n                break;\n            }\n            // no default\n        }\n    };\n\n    errorMessageID = uniqueId('errorMessage');\n\n    hiddenRef = (hiddenEl: ?HTMLSpanElement) => {\n        if (hiddenEl) {\n            this.hiddenEl = hiddenEl;\n        }\n    };\n\n    resetSelectedIndex = () => {\n        if (this.state.selectedIndex !== -1) {\n            this.setState({ selectedIndex: -1 });\n        }\n    };\n\n    render() {\n        const { isFocused, selectedIndex } = this.state;\n        const {\n            allowInvalidPills,\n            className,\n            disabled,\n            error,\n            errorTooltipPosition,\n            getPillClassName,\n            getPillImageUrl,\n            inputProps,\n            onInput,\n            onRemove,\n            onSuggestedPillAdd,\n            placeholder,\n            innerRef,\n            selectedOptions,\n            showAvatars,\n            showRoundedPills,\n            suggestedPillsData,\n            suggestedPillsFilter,\n            suggestedPillsTitle,\n            validator,\n            ...rest\n        } = this.props;\n        const suggestedPillsEnabled = suggestedPillsData && suggestedPillsData.length > 0;\n        const hasError = !!error;\n        const classes = classNames('bdl-PillSelector', 'pill-selector-input-wrapper', {\n            'is-disabled': disabled,\n            'bdl-is-disabled': disabled,\n            'is-focused': isFocused,\n            'show-error': hasError,\n            'pill-selector-suggestions-enabled': suggestedPillsEnabled,\n            'bdl-PillSelector--suggestionsEnabled': suggestedPillsEnabled,\n        });\n        const ariaAttrs = {\n            'aria-invalid': hasError,\n            'aria-errormessage': this.errorMessageID,\n            'aria-describedby': this.errorMessageID,\n        };\n\n        return (\n            <Tooltip isShown={hasError} text={error || ''} position={errorTooltipPosition} theme=\"error\">\n                {/* eslint-disable-next-line jsx-a11y/no-static-element-interactions */}\n                <span\n                    className={classes}\n                    onBlur={this.handleBlur}\n                    onClick={this.handleClick}\n                    onFocus={this.handleFocus}\n                    onKeyDown={this.handleKeyDown}\n                    ref={innerRef}\n                >\n                    {showRoundedPills\n                        ? selectedOptions.map((option: RoundOption, index: number) => {\n                              return (\n                                  <RoundPill\n                                      className={getPillClassName ? getPillClassName(option) : undefined}\n                                      getPillImageUrl={getPillImageUrl}\n                                      isValid={allowInvalidPills ? validator(option) : true}\n                                      isDisabled={disabled}\n                                      isSelected={index === selectedIndex}\n                                      key={option.value}\n                                      onRemove={onRemove.bind(this, option, index)}\n                                      // $FlowFixMe option.text is for backwards compatibility\n                                      text={option.displayText || option.text}\n                                      showAvatar={showAvatars}\n                                      id={option.id}\n                                      hasWarning={option.hasWarning}\n                                      isExternal={option.isExternalUser}\n                                  />\n                              );\n                          })\n                        : selectedOptions.map((option: Option, index: number) => {\n                              // TODO: This and associated types will be removed once all views are updates with round pills.\n                              return (\n                                  <Pill\n                                      isValid={allowInvalidPills ? validator(option) : true}\n                                      isDisabled={disabled}\n                                      isSelected={index === selectedIndex}\n                                      key={option.value}\n                                      onRemove={onRemove.bind(this, option, index)}\n                                      // $FlowFixMe option.text is for backwards compatibility\n                                      text={option.displayText || option.text}\n                                  />\n                              );\n                          })}\n\n                    {/* hidden element for focus/key events during pill selection */}\n                    <span\n                        aria-hidden=\"true\"\n                        className=\"accessibility-hidden\"\n                        onBlur={this.resetSelectedIndex}\n                        ref={this.hiddenRef}\n                        tabIndex={-1}\n                        data-testid=\"pill-selection-helper\"\n                    />\n                    <textarea\n                        {...ariaAttrs}\n                        {...rest}\n                        {...inputProps}\n                        autoComplete=\"off\"\n                        className={classNames('bdl-PillSelector-input', 'pill-selector-input', className)}\n                        disabled={disabled}\n                        onInput={onInput}\n                        placeholder={this.getNumSelected() === 0 ? placeholder : ''}\n                        ref={input => {\n                            this.inputEl = input;\n                        }}\n                    />\n                    <SuggestedPillsRow\n                        onSuggestedPillAdd={onSuggestedPillAdd}\n                        selectedPillsValues={this.getPillsByKey('value')}\n                        suggestedPillsFilter={suggestedPillsFilter}\n                        suggestedPillsData={suggestedPillsData}\n                        title={suggestedPillsTitle}\n                    />\n                    <span id={this.errorMessageID} className=\"accessibility-hidden\" role=\"alert\">\n                        {error}\n                    </span>\n                </span>\n            </Tooltip>\n        );\n    }\n}\n\nexport { PillSelectorBase };\n\nconst PillSelector = React.forwardRef<Config, HTMLSpanElement>((props: Config, ref: React.Ref<any>) => (\n    <PillSelectorBase {...props} innerRef={ref} />\n));\nPillSelector.displayName = 'PillSelector';\n\nexport default PillSelector;\n"],"sourceRoot":""}