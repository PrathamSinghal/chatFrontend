(this.webpackJsonpweb_scrap=this.webpackJsonpweb_scrap||[]).push([[12],{547:function(e,t,n){"use strict";n.d(t,"d",(function(){return h})),n.d(t,"b",(function(){return S})),n.d(t,"c",(function(){return C})),n.d(t,"h",(function(){return b})),n.d(t,"i",(function(){return O})),n.d(t,"j",(function(){return y})),n.d(t,"f",(function(){return v})),n.d(t,"g",(function(){return g})),n.d(t,"e",(function(){return E})),n.d(t,"a",(function(){return w}));var r=n(212),a=n.n(r),o=864e5,i=6e4,c=/^(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{1,3})?)?((Z$)|(?:[+-](?:([0-2]\d$)|([0-2]\d(?:00|30)$)|([0-2]\d:(?:00|30)$))))$/,l=1,s=2,u=3,f=4,p=5,d=6,m=7;function h(e){return e instanceof Date?e:new Date(e)}function b(e){return(new Date).toDateString()===h(e).toDateString()}function y(e){return b(h(e).getTime()+o)}function v(e){return(new Date).getMonth()===h(e).getMonth()}function g(e){return(new Date).getFullYear()===h(e).getFullYear()}function E(e){var t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.floor(e%3600%60),a=t>0?"".concat(t.toString(),":"):"",o=r<10?"0".concat(r.toString()):r.toString(),i=n.toString();return t>0&&n<10&&(i="0".concat(i)),"".concat(a).concat(i,":").concat(o)}function w(e,t){return e instanceof Date?new Date(e.getTime()+t):e+t}function S(e){return e.getTime()-e.getTimezoneOffset()*i}function O(e){return!a()(e.getTime())}function C(e){var t=new Date(function(e){if(c.test(e)){var t=e.split(c),n=t[l],r=t[s],a=t[u];if(r||(n+=".000"),t[f])return e;if(t[p])return"".concat(n+a,":00");if(t[d])return"".concat(n+a.substr(0,3),":").concat(a.substr(3));if(t[m])return e}return e}(e)),n=t.getTime(),r=t.getTimezoneOffset();return new Date(n+r*i)}},548:function(e,t,n){"use strict";var r=n(1),a=n(560);function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}t.a=function(e){return r.createElement(a.a,o({},e,{type:"error"}))}},550:function(e,t,n){"use strict";var r=n(1),a=n(99);function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}t.a=function(e){var t=e.children,n=e.className,c=void 0===n?"":n,l=i(e,["children","className"]);return r.createElement(a.b,o({className:"btn-primary ".concat(c)},l),t)}},552:function(e,t,n){"use strict";var r=n(1),a=n(40),o=n.n(a);function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}t.a=function(e){var t=e.children,n=e.className,a=void 0===n?"":n,l=e.title,s=e.type,u=void 0===s?"warning":s,f=c(e,["children","className","title","type"]);return r.createElement("div",i({className:o()(a,"inline-alert","inline-alert-visible","inline-alert-".concat(u))},f),l?r.createElement("strong",null,l):null,r.createElement("div",null,t))}},560:function(e,t,n){"use strict";var r=n(552);n.d(t,"a",(function(){return r.a}))},577:function(e,t,n){"use strict";var r=n(1),a=n(34),o=n(7);t.a=function(e){var t=e.className,n=void 0===t?"":t,i=e.color,c=void 0===i?o.l:i,l=e.height,s=void 0===l?14:l,u=e.title,f=e.width,p=void 0===f?14:f;return r.createElement(a.a,{className:"icon-edit ".concat(n),height:s,title:u,viewBox:"0 0 14 14",width:p},r.createElement("path",{className:"fill-color",d:"M3.21 7.89l6.47-6.48a2 2 0 0 1 2.88 2.78h-.05L6 10.72 3.21 7.89zM2.24 9l2.83 2.83L1.67 13c-.52.18-.79-.1-.62-.61z",fill:c}))}},611:function(e,t,n){"use strict";var r=n(4),a=n(26),o=n(44),i=n(32),c=n(1),l=!!document.documentElement.currentStyle,s={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},u=["letter-spacing","line-height","font-family","font-weight","font-size","font-style","tab-size","text-rendering","text-transform","width","text-indent","padding-top","padding-right","padding-bottom","padding-left","border-top-width","border-right-width","border-bottom-width","border-left-width","box-sizing"],f={},p=document.createElement("textarea"),d=function(e){Object.keys(s).forEach((function(t){e.style.setProperty(t,s[t],"important")}))};function m(e,t,n,r,a){void 0===n&&(n=!1),void 0===r&&(r=null),void 0===a&&(a=null),null===p.parentNode&&document.body.appendChild(p);var o=function(e,t,n){void 0===n&&(n=!1);if(n&&f[t])return f[t];var r=window.getComputedStyle(e);if(null===r)return null;var a=u.reduce((function(e,t){return e[t]=r.getPropertyValue(t),e}),{}),o=a["box-sizing"];if(""===o)return null;l&&"border-box"===o&&(a.width=parseFloat(a.width)+parseFloat(r["border-right-width"])+parseFloat(r["border-left-width"])+parseFloat(r["padding-right"])+parseFloat(r["padding-left"])+"px");var i=parseFloat(a["padding-bottom"])+parseFloat(a["padding-top"]),c=parseFloat(a["border-bottom-width"])+parseFloat(a["border-top-width"]),s={sizingStyle:a,paddingSize:i,borderSize:c,boxSizing:o};n&&(f[t]=s);return s}(e,t,n);if(null===o)return null;var i=o.paddingSize,c=o.borderSize,s=o.boxSizing,m=o.sizingStyle;Object.keys(m).forEach((function(e){p.style[e]=m[e]})),d(p),p.value=e.value||e.placeholder||"x";var h=-1/0,b=1/0,y=p.scrollHeight;"border-box"===s?y+=c:"content-box"===s&&(y-=i),p.value="x";var v=p.scrollHeight-i,g=Math.floor(y/v);return null!==r&&(h=v*r,"border-box"===s&&(h=h+i+c),y=Math.max(h,y)),null!==a&&(b=v*a,"border-box"===s&&(b=b+i+c),y=Math.min(b,y)),{height:y,minHeight:h,maxHeight:b,rowCount:Math.floor(y/v),valueRowCount:g}}p.setAttribute("tab-index","-1"),p.setAttribute("aria-hidden","true"),d(p);var h=function(){},b=0,y=function(e){function t(t){var n;return(n=e.call(this,t)||this)._onRef=function(e){n._ref=e;var t=n.props.inputRef;"function"!==typeof t?t.current=e:t(e)},n._onChange=function(e){n._controlled||n._resizeComponent(),n.props.onChange(e,Object(o.a)(n))},n._resizeComponent=function(e){void 0===e&&(e=h);var t=m(n._ref,n._uid,n.props.useCacheForDOMMeasurements,n.props.minRows,n.props.maxRows);if(null!==t){var r=t.height,a=t.minHeight,o=t.maxHeight,i=t.rowCount,c=t.valueRowCount;n.rowCount=i,n.valueRowCount=c,n.state.height===r&&n.state.minHeight===a&&n.state.maxHeight===o?e():n.setState({height:r,minHeight:a,maxHeight:o},e)}else e()},n.state={height:t.style&&t.style.height||0,minHeight:-1/0,maxHeight:1/0},n._uid=b++,n._controlled=void 0!==t.value,n._resizeLock=!1,n}Object(i.a)(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=(e.inputRef,e.maxRows,e.minRows,e.onHeightChange,e.useCacheForDOMMeasurements,Object(a.a)(e,["inputRef","maxRows","minRows","onHeightChange","useCacheForDOMMeasurements"]));return t.style=Object(r.a)({},t.style,{height:this.state.height}),Math.max(t.style.maxHeight||1/0,this.state.maxHeight)<this.state.height&&(t.style.overflow="hidden"),Object(c.createElement)("textarea",Object(r.a)({},t,{onChange:this._onChange,ref:this._onRef}))},n.componentDidMount=function(){var e=this;this._resizeComponent(),this._resizeListener=function(){e._resizeLock||(e._resizeLock=!0,e._resizeComponent((function(){e._resizeLock=!1})))},window.addEventListener("resize",this._resizeListener)},n.componentDidUpdate=function(e,t){e!==this.props&&this._resizeComponent(),this.state.height!==t.height&&this.props.onHeightChange(this.state.height,this)},n.componentWillUnmount=function(){window.removeEventListener("resize",this._resizeListener),function(e){delete f[e]}(this._uid)},t}(c.Component);y.defaultProps={inputRef:h,onChange:h,onHeightChange:h,useCacheForDOMMeasurements:!1},t.a=y},730:function(e,t,n){},731:function(e,t,n){},732:function(e,t,n){},736:function(e,t,n){},737:function(e,t,n){},738:function(e,t,n){},739:function(e,t,n){},740:function(e,t,n){},741:function(e,t,n){},742:function(e,t,n){},743:function(e,t,n){},986:function(e,t,n){"use strict";n.r(t),n.d(t,"SkillsSidebarComponent",(function(){return ot}));var r=n(1),a=n.n(r),o=n(205),i=n.n(o),c=n(13),l=n.n(c),s=n(12),u=n.n(s),f=n(138),p=(n(207),n(77)),d=n(27),m=n(570),h=n(35),b=n.n(h),y=n(544),v=n(565),g=n(650),E=n(2),w=function(e){var t=e.card.status,n=void 0===t?{}:t,a=n.code,o=n.message,i=d.a.skillUnknownError;switch(a){case E.Ee:i=d.a.skillInvalidFileSizeError;break;case E.De:i=d.a.skillInvalidFileExtensionError;break;case E.Be:case E.Ae:case E.Fe:case E.Ge:i=d.a.skillUnknownError;break;case E.Ce:i=d.a.skillFileProcessingError;break;case E.Le:i=d.a.skillPendingStatus;break;case E.Ke:i=d.a.skillInvokedStatus;break;default:if(o)return o}return r.createElement(f.a,i)},S=n(40),O=n.n(S),C=n(7),k=n(72),x=n(577),j=n(34),_=function(e){var t=e.className,n=void 0===t?"":t,a=e.color,o=void 0===a?"#999":a,i=e.height,c=void 0===i?14:i,l=e.title,s=e.width,u=void 0===s?14:s;return r.createElement(j.a,{className:"icon-copy ".concat(n),height:c,title:l,viewBox:"0 0 14 14",width:u},r.createElement("path",{className:"fill-color",d:"M1 11a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h9a1 1 0 0 1 0 2H2v8a1 1 0 0 1-1 1z",fill:o}),r.createElement("path",{className:"fill-color",d:"M13 3H3v10a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1zm-3 8H7a1 1 0 0 1 0-2h3a1 1 0 0 1 0 2zm0-3H7a1 1 0 0 1 0-2h3a1 1 0 0 1 0 2z",fill:o}))},P=function(e){var t=e.className,n=void 0===t?"":t,a=e.color,o=void 0===a?"#979797":a,i=e.height,c=void 0===i?13:i,l=e.title,s=e.width,u=void 0===s?13:s;return r.createElement(j.a,{className:"icon-expand ".concat(n),height:c,title:l,viewBox:"0 0 13 13",width:u},r.createElement("path",{className:"fill-color",d:"M12 0H6a1 1 0 0 0 0 2h5v5a1 1 0 0 0 2 0V1a1 1 0 0 0-1-1zM7 11H2V6a1 1 0 0 0-2 0v6a1 1 0 0 0 1 1h6a1 1 0 0 0 0-2z",fill:o}))},T=function(e){var t=e.className,n=void 0===t?"":t,a=e.color,o=void 0===a?"#979797":a,i=e.height,c=void 0===i?13:i,l=e.title,s=e.width,u=void 0===s?13:s;return r.createElement(j.a,{className:"icon-collapse ".concat(n),height:c,title:l,viewBox:"0 0 13 13",width:u},r.createElement("path",{className:"fill-color",d:"M8 6h4a1 1 0 0 0 0-2H9V1a1 1 0 0 0-2 0v4a1 1 0 0 0 1 1zM1 9h3v3a1 1 0 0 0 2 0V8a1 1 0 0 0-1-1H1a1 1 0 0 0 0 2z",fill:o}))},N=n(547),I=n(169),A=n(556);var D=function(e){return!!e&&"number"===typeof e.start},R=function(e){return Array.isArray(e)&&D(e[0])},M=function(e){var t=e.time,n=e.text,a=void 0===n?"":n,o=e.onClick,i=e.interactionTarget;return r.createElement(k.a,{className:"be-transcript-row","data-resin-target":i,onClick:o,type:"button"},t&&r.createElement("div",{className:"be-transcript-time"},t),r.createElement("div",{className:"be-transcript-text"},a))},z=n(611),L=n(550),H=n(99),V=(n(730),function(e){var t=e.time,n=e.text,a=void 0===n?"":n,o=e.onSave,i=e.onCancel,c=e.onChange;return r.createElement("div",{className:"be-transcript-row be-transcript-editing-row"},t&&r.createElement("div",{className:"be-transcript-time"},t),r.createElement("div",{className:"be-transcript-text"},r.createElement(z.a,{maxRows:10,onChange:c,value:a}),r.createElement("div",{className:"be-transcript-buttons"},r.createElement(H.b,{"data-resin-target":y.f.TRANSCRIPTS.EDIT_CANCEL,onClick:i,type:"button"},r.createElement(f.a,d.a.cancel)),r.createElement(L.a,{"data-resin-target":y.f.TRANSCRIPTS.EDIT_SAVE,onClick:o,type:"button"},r.createElement(f.a,d.a.save)))))}),F=(n(731),function(e){var t=e.appears,n=e.text,r=e.isEditing,o=e.onClick,i=e.onSave,c=e.onCancel,l=e.onChange,s=e.interactionTarget,u=t,f=R(t)&&Array.isArray(t)&&1===t.length?Object(N.e)(u[0].start):void 0;return r?a.a.createElement(V,{onCancel:c,onChange:l,onSave:i,text:n,time:f}):a.a.createElement(M,{interactionTarget:s,onClick:o,text:n,time:f})});n(732);function B(e){return B="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){J(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e){return G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},G(e)}function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e,t){return $=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$(e,t)}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var X=function(e){function t(){var e,n,a,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return a=this,o=(e=G(t)).call.apply(e,[this].concat(c)),n=!o||"object"!==B(o)&&"function"!==typeof o?W(a):o,J(W(n),"state",{isEditingIndex:void 0,newTranscriptText:"",isCollapsed:!0,isLoading:!1}),J(W(n),"transcriptReducer",(function(e,t){var n=t.appears,r=t.text,a=R(n)&&Array.isArray(n)?"".concat(Object(N.e)(n[0].start),":"):"";return"".concat(e).concat(a," ").concat(r||"","\r\n")})),J(W(n),"transcriptMapper",(function(e,t){var a=e.appears,o=e.text,i=n.state,c=i.isEditingIndex,l=i.newTranscriptText,s=c===t,u=s?l:o,f=s?y.f.TRANSCRIPTS.EDIT_TEXT:y.f.TRANSCRIPTS.TRANSCRIPT;return r.createElement(F,{key:t,appears:a,interactionTarget:f,isEditing:s,onCancel:n.onCancel,onChange:n.onChange,onClick:function(){return n.onClick(t)},onSave:n.onSave,text:u})})),J(W(n),"toggleIsEditing",(function(){n.setState((function(e){return{isEditingIndex:"number"===typeof e.isEditingIndex?void 0:-1}}))})),J(W(n),"onSave",(function(){var e=n.props,t=e.card.entries,r=e.onSkillChange,a=n.state,o=a.isEditingIndex,i=a.newTranscriptText;if("number"===typeof o){var c=t[o];c.text===i?n.onCancel():(n.setState({isLoading:!0,isEditingIndex:-1}),r(null,null,[{replacement:Y({},c,{text:i}),replaced:c}]))}})),J(W(n),"onCancel",(function(){n.setState({isEditingIndex:-1,newTranscriptText:""})})),J(W(n),"onChange",(function(e){var t=e.currentTarget;n.setState({newTranscriptText:t.value})})),J(W(n),"onClick",(function(e){var t=n.props.card.entries;"number"===typeof n.state.isEditingIndex?n.setState({isEditingIndex:e,newTranscriptText:t[e].text}):n.previewSegment(e)})),J(W(n),"copyTranscript",(function(){var e=n.props.card.entries,t="be-transcript-copied";!function(e){var t=document.createElement("textarea"),n=document.body;t.value=e,t.style.display="hidden",n&&(n.appendChild(t),t.select(),document.execCommand("copy"),n.removeChild(t))}(e.reduce(n.transcriptReducer,"")),n.copyBtn&&n.copyBtn.classList.add(t),setTimeout((function(){n.copyBtn&&n.copyBtn.classList.remove(t)}),1e3)})),J(W(n),"copyBtnRef",(function(e){n.copyBtn=e})),J(W(n),"toggleExpandCollapse",(function(){n.setState((function(e){return{isCollapsed:!e.isCollapsed}}))})),n}var n,a,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(t,e),n=t,(a=[{key:"componentDidUpdate",value:function(e){if(e!==this.props){var t="number"===typeof this.state.isEditingIndex;this.setState({isEditingIndex:t?-1:void 0,newTranscriptText:"",isLoading:!1})}}},{key:"previewSegment",value:function(e){var t=this.props,n=t.card.entries,r=t.getViewer,a=n[e].appears,o=r?r():null,i=R(a)&&Array.isArray(a)&&1===a.length,c=i?a[0].start:0;i&&o&&"function"===typeof o.play&&o.play(c)}},{key:"render",value:function(){var e=this.props,t=e.card.entries,n=e.isEditable,a=this.state,o=a.isEditingIndex,i=a.isCollapsed,c=a.isLoading,l=t.length>0,s=t.length>5,u="number"===typeof o,p=O()("be-transcript-edit",{"be-transcript-is-editing":u}),m=O()({"be-transcript-content-collapsed":i}),h=i?d.a.expand:d.a.collapse;return r.createElement(I.a,{className:"be-transcript",isLoading:c},l&&!c&&r.createElement("div",{className:"be-transcript-actions"},r.createElement(A.c,{text:r.createElement(f.a,d.a.copy)},r.createElement(k.a,{className:"be-transcript-copy","data-resin-target":y.f.TRANSCRIPTS.COPY,getDOMRef:this.copyBtnRef,onClick:this.copyTranscript,type:"button"},r.createElement(_,{color:C.k}))),s&&r.createElement(A.c,{text:r.createElement(f.a,h)},r.createElement(k.a,{className:"be-transcript-expand","data-resin-target":y.f.TRANSCRIPTS.EXPAND,onClick:this.toggleExpandCollapse,type:"button"},i?r.createElement(P,{color:C.k}):r.createElement(T,{color:C.k}))),n&&r.createElement(A.c,{text:r.createElement(f.a,d.a.editLabel)},r.createElement(k.a,{className:p,"data-resin-target":y.f.TRANSCRIPTS.EDIT,onClick:this.toggleIsEditing,type:"button"},r.createElement(x.a,null)))),u?r.createElement("div",{className:"be-transcript-edit-message"},r.createElement(f.a,d.a.transcriptEdit)):null,l?r.createElement("div",{className:m},t.map(this.transcriptMapper)):r.createElement(f.a,d.a.skillNoInfoFoundError))}}])&&U(n.prototype,a),o&&U(n,o),t}(r.PureComponent),Z=X,q=n(548),Q=n(701),ee=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(e,t){return{displayText:e.text,value:t}}))};n(736);function te(e){return te="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e){return re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},re(e)}function ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oe(e,t){return oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},oe(e,t)}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ce=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=re(t).call(this,e),n=!a||"object"!==te(a)&&"function"!==typeof a?ae(r):a,ie(ae(n),"onRemove",(function(e,t){var r=n.props;(0,r.onDelete)(r.keywords[t])})),ie(ae(n),"onKeyDown",(function(e){"Enter"!==e.key||n.state.isInCompositionMode||n.onBlur()})),ie(ae(n),"onBlur",(function(){var e=n.props.onAdd,t=n.state.keyword;t&&e({type:"text",text:t})})),ie(ae(n),"onCompositionStart",(function(){n.setState({isInCompositionMode:!0})})),ie(ae(n),"onCompositionEnd",(function(){n.setState({isInCompositionMode:!1})})),ie(ae(n),"onInput",(function(e){var t=e.currentTarget;n.setState({keyword:t.value})})),n.state={pills:ee(e.keywords),keyword:"",isInCompositionMode:!1},n}var n,a,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}(t,e),n=t,(a=[{key:"componentDidUpdate",value:function(e){var t=e.keywords,n=this.props.keywords;t!==n&&this.setState({pills:ee(n),keyword:""})}},{key:"render",value:function(){var e=this.props,t=e.onSave,n=e.onCancel,a=this.state,o=a.pills,i=a.keyword;return r.createElement("span",{className:"bdl-EditableKeywords"},r.createElement(Q.a,{onBlur:this.onBlur,onCompositionEnd:this.onCompositionEnd,onCompositionStart:this.onCompositionStart,onInput:this.onInput,onKeyDown:this.onKeyDown,onPaste:this.onInput,onRemove:this.onRemove,selectedOptions:o,value:i}),r.createElement("div",{className:"be-keywords-buttons"},r.createElement(H.b,{"data-resin-target":y.f.KEYWORDS.EDIT_CANCEL,onClick:n,type:"button"},r.createElement(f.a,d.a.cancel)),r.createElement(L.a,{"data-resin-target":y.f.KEYWORDS.EDIT_SAVE,onClick:t,type:"button"},r.createElement(f.a,d.a.save))))}}])&&ne(n.prototype,a),o&&ne(n,o),t}(r.PureComponent),le=n(214),se=n.n(le),ue=n(204);function fe(){return fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fe.apply(this,arguments)}var pe=function(e){var t=e.options,n=e.onSelect,r=e.selectedOptions,o=void 0===r?[]:r,i=e.buttonProps,c=void 0===i?{}:i;return a.a.createElement("div",{className:"bdl-PillCloud pill-cloud-container"},t&&t.map((function(e){return a.a.createElement(ue.b,fe({key:e.value,className:O()("bdl-Pill","bdl-PillCloud-button","pill","pill-cloud-button",{"is-selected":o.find((function(t){return se()(t,e)}))}),onClick:n?function(){return n(e)}:void 0,"data-resin-target":e.value},c),e.displayText)})))},de=function(e){var t=e.className,n=void 0===t?"":t,a=e.color,o=void 0===a?"#999":a,i=e.height,c=void 0===i?14:i,l=e.title,s=e.width,u=void 0===s?14:s;return r.createElement(j.a,{className:"icon-track-next ".concat(n),height:c,title:l,viewBox:"0 0 14 14",width:u},r.createElement("path",{className:"fill-color",d:"M7.72 7.85a1 1 0 0 0 0-1.41l-5-4.81A1 1 0 0 0 2 1.35a1 1 0 0 0-1 1V12a1 1 0 0 0 .28.69 1 1 0 0 0 1.41 0l5-4.81zM13 2v10a1 1 0 0 1-1 1 1 1 0 0 1-1-1V2a1 1 0 0 1 1-1 1 1 0 0 1 1 1z",fill:o}))},me=function(e){var t=e.className,n=void 0===t?"":t,a=e.color,o=void 0===a?"#999":a,i=e.height,c=void 0===i?14:i,l=e.title,s=e.width,u=void 0===s?14:s;return r.createElement(j.a,{className:"icon-track-previous ".concat(n),height:c,title:l,viewBox:"0 0 14 14",width:u},r.createElement("path",{className:"fill-color",d:"M6.31 7.88l5 4.81a1 1 0 0 0 1.41 0A1 1 0 0 0 13 12V2.35a1 1 0 0 0-1-1 1 1 0 0 0-.69.28l-5 4.81a1 1 0 0 0 0 1.41zM2 1a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1 1 1 0 0 1-1-1V2a1 1 0 0 1 1-1z",fill:o}))},he=(n(737),function(e){var t=e.start,n=e.end,r=e.duration,o=e.onClick,i=e.index,c=e.interactionTarget;if("number"!==typeof t||!r||t>=r)return null;var l=Math.round(290*t/r),s=l+6,u="number"===typeof n?Math.max(s,290*n/r):s,f=Math.round(Math.min(290,u))-l;return f<6&&(l-=6-f,f=6),a.a.createElement(k.a,{className:"be-timeline-time","data-resin-target":c,onClick:function(){return o(i)},style:{left:"".concat(l,"px"),width:"".concat(f,"px")},type:"button"})}),be=(n(738),function(e){var t=e.text,n=void 0===t?"":t,r=e.duration,o=void 0===r?0:r,i=e.timeslices,c=void 0===i?[]:i,l=e.getViewer,s=e.interactionTarget,u=-1,p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t>0?Math.min(c.length-1,e+t):Math.max(0,e+t),r=l?l():null,a=c[n];D(a)&&r&&"function"===typeof r.play&&(r.play(a.start),u=n)};return a.a.createElement("div",{className:"be-timeline"},n&&a.a.createElement("div",{className:"be-timeline-label"},n),a.a.createElement("div",{className:"be-timeline-line-wrapper"},a.a.createElement("div",{className:"be-timeline-line"}),c.map((function(e,t){var n=e.start,r=e.end;return a.a.createElement(he,{key:t,duration:o,end:r,index:t,interactionTarget:s,onClick:p,start:n})}))),a.a.createElement("div",{className:"be-timeline-btns"},a.a.createElement(k.a,{"data-resin-target":y.f.TIMELINE.PREVIOUS,onClick:function(){return p(u,-1)},type:"button"},a.a.createElement(me,{title:a.a.createElement(f.a,d.a.previousSegment)})),a.a.createElement(k.a,{"data-resin-target":y.f.TIMELINE.NEXT,onClick:function(){return p(u,1)},type:"button"},a.a.createElement(de,{title:a.a.createElement(f.a,d.a.nextSegment)}))))});n(739);function ye(e){return ye="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye(e)}function ve(){return ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ve.apply(this,arguments)}function ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ee(e){return Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ee(e)}function we(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Se(e,t){return Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Se(e,t)}function Oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ce=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=Ee(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==ye(a)&&"function"!==typeof a?we(r):a,Oe(we(n),"state",{selectedIndex:-1}),Oe(we(n),"onSelect",(function(e){var t=n.state.selectedIndex,r=e.value;n.setState({selectedIndex:t===r?-1:r})})),n}var n,a,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Se(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.keywords,n=e.getViewer,a=e.duration,o=this.state.selectedIndex,i=ee(t),c=t[o],l=c?{selectedOptions:[i[o]]}:{};return r.createElement(r.Fragment,null,r.createElement(pe,ve({onSelect:this.onSelect,options:i},l,{buttonProps:Oe({},y.c,y.f.KEYWORDS.SELECT)})),!!c&&Array.isArray(c.appears)&&c.appears.length>0&&r.createElement(be,{duration:a,getViewer:n,interactionTarget:y.f.KEYWORDS.TIMELINE,text:c.text,timeslices:c.appears}))}}])&&ge(n.prototype,a),o&&ge(n,o),t}(r.PureComponent),ke=Ce;n(740);function xe(e){return xe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe(e)}function je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _e(e){return _e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_e(e)}function Pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Te(e,t){return Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Te(e,t)}function Ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ie=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=_e(t).call(this,e),n=!a||"object"!==xe(a)&&"function"!==typeof a?Pe(r):a,Ne(Pe(n),"toggleIsEditing",(function(){n.setState((function(e){return{isEditing:!e.isEditing}}))})),Ne(Pe(n),"onAdd",(function(e){var t=n.props.transcript,r=n.state.adds,a=[],o=new RegExp("\\b".concat(e.text,"\\b"),"i");t&&Array.isArray(t.entries)&&t.entries.forEach((function(e){var t=e.text,n=e.appears;t&&o.test(t)&&Array.isArray(n)&&n.length>0&&a.push(n[0])})),e.appears=a,r.push(e),n.setState({adds:r.slice(0)})})),Ne(Pe(n),"onDelete",(function(e){var t=n.state,r=t.adds,a=t.removes,o=r.findIndex((function(t){return t===e}));o>-1?(r.splice(o,1),n.setState({adds:r.slice(0)})):(a.push(e),n.setState({removes:a.slice(0)}))})),Ne(Pe(n),"onSave",(function(){var e=n.props.onSkillChange,t=n.state,r=t.removes,a=t.adds;n.toggleIsEditing(),(r.length>0||a.length>0)&&(n.setState({isLoading:!0}),e(r,a))})),Ne(Pe(n),"onCancel",(function(){n.resetState(n.props)})),n.state={keywords:e.card.entries,adds:[],removes:[],isEditing:e.hasError,hasError:e.hasError,isLoading:!1},n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(t,e),n=t,(r=[{key:"resetState",value:function(e){this.setState({keywords:e.card.entries,adds:[],removes:[],isEditing:!1,hasError:!1,isLoading:!1})}},{key:"render",value:function(){var e=this.props,t=e.card,n=e.getViewer,r=e.isEditable,o=t.duration,i=this.state,c=i.isEditing,l=i.isLoading,s=i.hasError,u=i.keywords,p=i.removes,m=i.adds,h=u.length>0,b=u.filter((function(e){return!p.includes(e)})).concat(m),v=O()("be-keyword-edit",{"be-keyword-is-editing":c});return a.a.createElement(I.a,{className:"be-keywords",isLoading:l},h&&r&&!l&&a.a.createElement(A.c,{text:a.a.createElement(f.a,d.a.editLabel)},a.a.createElement(k.a,{className:v,"data-resin-target":y.f.KEYWORDS.EDIT,onClick:this.toggleIsEditing,type:"button"},a.a.createElement(x.a,null))),s&&a.a.createElement(q.a,{title:a.a.createElement(f.a,d.a.sidebarSkillsErrorTitle)},a.a.createElement(f.a,d.a.sidebarSkillsErrorContent)),c&&a.a.createElement(ce,{keywords:b,onAdd:this.onAdd,onCancel:this.onCancel,onDelete:this.onDelete,onSave:this.onSave}),!c&&h&&a.a.createElement(ke,{duration:o,getViewer:n,keywords:b}),!c&&!h&&a.a.createElement(f.a,d.a.skillNoInfoFoundError))}}])&&je(n.prototype,r),o&&je(n,o),t}(r.PureComponent),Ae=n(222),De=function(e){var t=e.className,n=void 0===t?"":t,a=e.color,o=void 0===a?"#000000":a,i=e.height,c=void 0===i?16:i,l=e.title,s=e.width,u=void 0===s?16:s;return r.createElement(j.a,{className:"icon-minus ".concat(n),height:c,title:l,viewBox:"0 0 16 16",width:u},r.createElement("path",{d:"M2 5h8v2H2z",fill:o,fillRule:"evenodd"}))},Re=(n(741),function(e){var t=e.face,n=e.selected,a=e.isEditing,o=e.onDelete,i=e.onSelect,c=!!n,l=t===n,s=c&&l&&!a,u=O()("be-face-wrapper",{"be-face-unselected":!a&&c&&!l});return r.createElement("div",{className:u},r.createElement(k.a,{className:"be-face","data-resin-target":y.f.FACES.FACE,onClick:function(){return!a&&i(t)},type:"button"},r.createElement("img",{alt:t.text,src:t.image_url,title:t.text}),s&&r.createElement(De,{color:E.x})),a&&r.createElement(k.a,{className:"be-face-delete","data-resin-target":y.f.FACES.DELETE,onClick:function(){return o(t)},type:"button"},r.createElement(Ae.a,{color:E.w,height:16,width:16})))});n(742);function Me(e){return Me="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Me(e)}function ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Le(e){return Le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Le(e)}function He(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ve(e,t){return Ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ve(e,t)}function Fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Be=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Le(t).call(this,e),n=!a||"object"!==Me(a)&&"function"!==typeof a?He(r):a,Fe(He(n),"toggleIsEditing",(function(){n.setState((function(e){return{isEditing:!e.isEditing}}))})),Fe(He(n),"onSelect",(function(e){var t=n.state.selected;n.setState({selected:t===e?void 0:e})})),Fe(He(n),"onDelete",(function(e){var t=n.state.removes;t.push(e),n.setState({removes:t.slice(0)})})),Fe(He(n),"onSave",(function(){var e=n.props.onSkillChange,t=n.state.removes;n.toggleIsEditing(),t.length>0&&(n.setState({isLoading:!0}),e(t))})),Fe(He(n),"onCancel",(function(){n.resetState(n.props)})),n.state={faces:e.card.entries,removes:[],isEditing:e.hasError,hasError:e.hasError,isLoading:!1},n}var n,a,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ve(e,t)}(t,e),n=t,(a=[{key:"resetState",value:function(e){this.setState({faces:e.card.entries,removes:[],isEditing:!1,selected:void 0,hasError:!1,isLoading:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.card,a=t.isEditable,o=t.getViewer,i=this.state,c=i.selected,l=i.faces,s=i.removes,u=i.isEditing,p=i.hasError,m=i.isLoading,h=n.duration,b=l.length>0,v=l.filter((function(e){return!s.includes(e)})),g=O()("be-face-edit",{"be-faces-is-editing":u});return r.createElement(I.a,{className:"be-faces",isLoading:m},b&&a&&!m&&r.createElement(A.c,{text:r.createElement(f.a,d.a.editLabel)},r.createElement(k.a,{className:g,"data-resin-target":y.f.FACES.EDIT,onClick:this.toggleIsEditing,type:"button"},r.createElement(x.a,null))),p&&r.createElement(q.a,{title:r.createElement(f.a,d.a.sidebarSkillsErrorTitle)},r.createElement(f.a,d.a.sidebarSkillsErrorContent)),b?v.map((function(t,n){return r.createElement(Re,{key:n,face:t,isEditing:u,onDelete:e.onDelete,onSelect:e.onSelect,selected:c})})):r.createElement(f.a,d.a.skillNoInfoFoundError),!!c&&!u&&Array.isArray(c.appears)&&c.appears.length>0&&r.createElement(be,{duration:h,getViewer:o,interactionTarget:y.f.FACES.TIMELINE,timeslices:c.appears}),u&&r.createElement("div",{className:"be-faces-buttons"},r.createElement(H.b,{"data-resin-target":y.f.FACES.EDIT_CANCEL,onClick:this.onCancel,type:"button"},r.createElement(f.a,d.a.cancel)),r.createElement(L.a,{"data-resin-target":y.f.FACES.EDIT_SAVE,onClick:this.onSave,type:"button"},r.createElement(f.a,d.a.save))))}}])&&ze(n.prototype,a),o&&ze(n,o),t}(r.PureComponent),Ke=function(e){var t=e.card,n=e.cards,r=e.hasError,o=e.isEditable,i=e.onSkillChange,c=e.getViewer;switch(t.skill_card_type){case E.Ie:return a.a.createElement(Ie,{card:t,getViewer:c,hasError:r,isEditable:o,onSkillChange:i,transcript:o?n.find((function(e){return e.skill_card_type===E.Ne})):void 0});case E.Me:case E.He:return a.a.createElement(Be,{card:t,getViewer:c,hasError:r,isEditable:o,onSkillChange:i});case E.Ne:return a.a.createElement(Z,{card:t,getViewer:c,hasError:r,isEditable:o,onSkillChange:i});case E.Je:return a.a.createElement(w,{card:t});default:return null}},Ye=function(e){var t=e.file,n=e.cards,a=e.errors,o=e.getViewer,i=e.onSkillChange,c=t.permissions,l=!!(void 0===c?{}:c).can_upload;return n.map((function(e,c){e.error&&!e.status&&(e.skill_card_type=E.Je,e.status={code:E.Ge},delete e.error);var s=e.id||b()("card_"),u=Object(g.b)(t,e),p=function(e){switch(e.skill_card_type){case E.Ie:return y.f.KEYWORDS.CARD;case E.He:case E.Me:return y.f.FACES.CARD;case E.Ne:return y.f.TRANSCRIPTS.CARD;default:return""}}(e),m=function(e){var t=e.skill_card_type,n=e.skill_card_title,a=void 0===n?{}:n,o=a.code,i=a.message,c="".concat(t,"Skill"),l=d.a[c]||d.a.defaultSkill;switch(o){case"skills_faces":return r.createElement(f.a,d.a.faceSkill);case"skills_transcript":return r.createElement(f.a,d.a.transcriptSkill);case"skills_topics":return r.createElement(f.a,d.a.topicsSkill);case"skills_status":return r.createElement(f.a,d.a.statusSkill);case"skills_error":return r.createElement(f.a,d.a.error);default:return i||r.createElement(f.a,l)}}(e),h=Array.isArray(e.entries)?e.entries.length>0:u;return u?r.createElement(v.a,{key:s,interactionTarget:p,isOpen:h,title:m},r.createElement(Ke,{card:e,cards:n,getViewer:o,hasError:!!a[c],isEditable:l,onSkillChange:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.apply(void 0,[c].concat(t))}})):null}))},Ue=n(101),Ge=n(100),We=n(562),$e=n(211),Je=n(213);n(743);function Xe(e){return Xe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xe(e)}function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach((function(t){rt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function et(e){return et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},et(e)}function tt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nt(e,t){return nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},nt(e,t)}function rt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var at="".concat(E.de,"_").concat(Ue.b);Object(Ge.b)(at);var ot=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=et(t).call(this,e),n=!a||"object"!==Xe(a)&&"function"!==typeof a?tt(r):a,rt(tt(n),"state",{errors:{}}),rt(tt(n),"fetchSkillsSuccessCallback",(function(e){n.updatePreviewTranscript(e),n.setState({cards:e})})),rt(tt(n),"updatePreviewTranscript",(function(e){var t=n.props,r=t.getPreview,a=t.getViewer,o=r?r():null,i=a?a():null,c=e.find((function(e){return e.skill_card_type===E.Ne}));c&&o&&(i?"function"===typeof i.loadAutoGeneratedCaptions&&i.loadAutoGeneratedCaptions(c):o.addListener("load",(function(e){var t=e.viewer;"function"===typeof t.loadAutoGeneratedCaptions&&t.loadAutoGeneratedCaptions(c)})))})),rt(tt(n),"onSaveSuccessHandler",(function(e,t){var r=qe({},n.state.errors);delete r[e],n.updatePreviewTranscript(t),n.setState({cards:t,errors:r})})),rt(tt(n),"onSaveErrorHandler",(function(e){var t=qe({},n.state.errors);t[e]=!0,n.setState({errors:t})})),rt(tt(n),"onSave",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=n.props,i=o.api,c=o.file,s=n.state.cards,u=(void 0===s?[]:s)[e],f="/cards/".concat(e),p=[];if(l()(c,E.Gc,!1)&&u){if(Array.isArray(a)&&a.forEach((function(e){var t=e.replaced,n=e.replacement,r=u.entries.findIndex((function(e){return e===t}));r>-1&&p.push({op:"replace",path:"".concat(f,"/entries/").concat(r),value:n})})),Array.isArray(t)){var d=[];t.forEach((function(e){var t=u.entries.findIndex((function(t){return t===e}));t>-1&&d.push(t)})),d.sort((function(e,t){return t-e})).forEach((function(e){p.push({op:"remove",path:"".concat(f,"/entries/").concat(e)})}))}Array.isArray(r)&&r.forEach((function(e){p.push({op:"add",path:"".concat(f,"/entries/-"),value:e})})),0!==p.length&&(p.splice(0,0,{op:"test",path:f,value:u}),i.getMetadataAPI(!1).updateSkills(c,p,(function(t){n.onSaveSuccessHandler(e,t)}),(function(){n.onSaveErrorHandler(e)})))}})),n.props.logger.onReadyMetric({endMarkName:at}),n}var n,a,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nt(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){var e=this.props,t=e.api,n=e.file;t.getMetadataAPI(!1).getSkills(n,this.fetchSkillsSuccessCallback,u.a)}},{key:"componentDidUpdate",value:function(e){var t=e.refreshIdentity,n=this.props,r=n.api,a=n.file;n.refreshIdentity!==t&&r.getMetadataAPI(!1).getSkills(a,this.fetchSkillsSuccessCallback,u.a)}},{key:"render",value:function(){var e=this.props,t=e.file,n=e.getViewer,a=e.elementId,o=this.state,i=o.cards,c=o.errors;return r.createElement(m.a,{className:"bcs-skills",elementId:a,sidebarView:E.ue,title:r.createElement(f.a,d.a.sidebarSkillsTitle)},i?r.createElement(Ye,{cards:i,errors:c,file:t,getViewer:n,onSkillChange:this.onSave}):r.createElement(p.b,null))}}])&&Qe(n.prototype,a),o&&Qe(n,o),t}(r.PureComponent);t.default=i()([Object(Je.a)(E.de),Object($e.a)(E.de),We.b])(ot)}}]);
//# sourceMappingURL=12.e61e8a27.chunk.js.map